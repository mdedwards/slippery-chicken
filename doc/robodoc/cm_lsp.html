<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<script src="./robodoc.js"></script>
<title>cm.lsp</title>
<!-- Source: ./../../src/cm.lsp -->
<!-- Generated with ROBODoc Version 4.99.44 (Oct 31 2021) -->
</head>
<script type=text/javascript src=../head-foot.js></script>
<body>
<div id="content">
<script type="text/javascript">header("../");</script>

<div id="logo">
<a name="robo_top_of_doc"></a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./roboindex.html#top">Index</a>
<a class="menuitem" href="./robo_parameters.html#top">Global Parameters</a>
<a class="menuitem" href="./robo_classes.html#top">Classes</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_modules.html#top">Modules</a>
<a class="menuitem" href="./robo_methods.html#top">Methods</a>
</div> <!-- navigation -->


<a name="sc2fcm"></a>
<a name="robo4"></a><h2 class=robodoc>sc/cm [ Modules ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_modules.html#robo_top_of_doc">Modules</a> ]</p>
<p class="item_name">NAME</p>
<pre> <strong>cm</strong>

 File:             <a href="#robo_top_of_doc">cm.lsp</a>

 Class Hierarchy:  none (no classes defined)

 Version:          1.1.0

 Project:          slippery chicken (algorithmic composition)

 Purpose:          Definition of common-music related and other functions
                   like transposition of notes/chords, <a href="./event_lsp.html#robo182">enharmonic</a>
                   equivalents etc.   

 Author:           Michael Edwards: m@michael-edwards.org

 Creation date:    1st March 2001

 $$ Last modified:  09:57:54 Wed Jun 18 2025 CEST

 SVN ID: $Id$
</pre>


<a name="cm2fdegree2dto2dnote"></a>
<a name="robo129"></a><h2 class=robodoc>cm/degree-to-note [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the specified <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degree number as a note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbol within
 the current <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>. An optional argument allows the user to specify that the
 <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degree number should be used to get the note-name <a href="./pitch_lsp.html#robo297">pitch</a> from a
 different <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> An integer that is a <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degree number.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - The <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> from which the note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbol associated with the
   specified <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degree is to be drawn.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbol.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>degree-to-note</strong> 127 'chromatic-<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>)

=&gt; G9

(<strong>degree-to-note</strong> 127 'twelfth-tone)

=&gt; ATS0

(<strong>degree-to-note</strong> 127 'quarter-tone)

=&gt; EQF4
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>degree-to-note</strong> (degree &amp;optional (<a href="./rthm-seq-palette_lsp.html#robo553">scale</a> <a href="#robo4">cm</a>::*<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>*))
</pre>


<a name="cm2fdegrees2dper2doctave"></a>
<a name="robo130"></a><h2 class=robodoc>cm/degrees-per-octave [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return the number of <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degrees in the span of one octave within the
 current tuning system.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - No arguments.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> - An integer that is the number of <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degrees in each octave.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<a href="#robo138">in-scale</a> :chromatic)
(degrees-per-octave)

=&gt; 12

(<a href="#robo138">in-scale</a> :quarter-tone)
(degrees-per-octave)

=&gt; 24
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>degrees-per-octave</strong> (&amp;optional (<a href="./rthm-seq-palette_lsp.html#robo553">scale</a> <a href="#robo4">cm</a>::*<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>*))
</pre>


<a name="cm2fdegrees2dper2dsemitone"></a>
<a name="robo131"></a><h2 class=robodoc>cm/degrees-per-semitone [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the number of <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degrees per equal-tempered semitone in the current
 tuning <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - No arguments
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - The <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> for which the number of degrees per semitone is to be
   retrieved.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An integer.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>degrees-per-semitone</strong> 'chromatic-<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>)

=&gt; 1

(<strong>degrees-per-semitone</strong> 'twelfth-tone)

=&gt; 6

(<strong>degrees-per-semitone</strong> 'quarter-tone)

=&gt; 2
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>degrees-per-semitone</strong> (&amp;optional (<a href="./rthm-seq-palette_lsp.html#robo553">scale</a> <a href="#robo4">cm</a>::*<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>*))
</pre>


<a name="cm2fdegrees2dto2dnotes"></a>
<a name="robo132"></a><h2 class=robodoc>cm/degrees-to-notes [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> NB: If the specified <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>-degree number within the current <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> would
     result in <a href="./pitch_lsp.html#robo297">pitch</a> outside of the maximum MIDI <a href="./pitch_lsp.html#robo297">pitch</a> range for that tuning
     (chromatic: C-1 to B10; quarter-tone: C-1 to BQS10; twelfth-tone: C-1
     to CTF11), the function will return an error.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> An integer that is a <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degree number in the current tuning.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbols.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<a href="#robo138">in-scale</a> :chromatic)
(<strong>degrees-to-notes</strong> '(0 143 116 127 38))

=&gt; (C-1 B10 AF8 G9 D2)

(<a href="#robo138">in-scale</a> :twelfth-tone)
(<strong>degrees-to-notes</strong> '(0 144 116 127 38 287 863))

=&gt; (C-1 C1 GSS0 ATS0 FSSS-1 CTF3 CTF11)

(<a href="#robo138">in-scale</a> :quarter-tone)
(<strong>degrees-to-notes</strong> '(0 144 116 127 38 287))

=&gt; (C-1 C5 BF3 EQF4 G0 BQS10)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>degrees-to-notes</strong> (degrees)
</pre>


<a name="cm2fevent2dlist2dto2dmidi2dfile"></a>
<a name="robo133"></a><h2 class=robodoc>cm/event-list-to-midi-file [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Write the events in a list to a midi-file. <a href="./rthm-seq-bar_lsp.html#robo493">events-update-time</a> is a related
 function useful for preparind ad-hoc events for midi-file-writing. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list of events objects
 - the path to the midi-file
 - the starting <a href="./tempo_lsp.html#robo302">tempo</a> (integer: BPM)
 - a time-offset for the events (seconds)
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - whether to overwrite events' amplitude slots and use a single
 velocity/amplitude value given here (0-1.0 (float) or 0-127 (integer) 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The MIDI file path
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>event-list-to-midi-file</strong> (<a href="./event_lsp.html#robo449">event</a>-list 
                                &amp;key (midi-file "/tmp/tmp.mid")
                                  (start-<a href="./tempo_lsp.html#robo302">tempo</a> 120) (time-offset 0)
                                  (auto-open (get-sc-config
                                              'midi-play-auto-open))
                                  force-velocity)
</pre>


<a name="cm2ffreq2dto2ddegree"></a>
<a name="robo134"></a><h2 class=robodoc>cm/freq-to-degree [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degree of the specified frequency in Hertz within the current
 <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>. 
 
 NB: This method will return fractional <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degrees.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A frequency in Hertz.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - The <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> in which to find the corresponding <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degree.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degree number. This may be a decimal number.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>freq-to-degree</strong> 423 'chromatic-<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>)

=&gt; 68.317856

(<strong>freq-to-degree</strong> 423 'twelfth-tone)

=&gt; 409.9071

(<strong>freq-to-degree</strong> 423 'quarter-tone)

=&gt; 136.63571
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>freq-to-degree</strong> (freq &amp;optional (<a href="./rthm-seq-palette_lsp.html#robo553">scale</a> <a href="#robo4">cm</a>::*<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>*))
</pre>


<a name="cm2ffreq2dto2dmidi"></a>
<a name="robo135"></a><h2 class=robodoc>cm/freq-to-midi [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 10th July 2016, Essen Werden
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> convert a frequency in Hertz to a MIDI note number (possibly floating
 point, indicating microtonality).  
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> a frequency in Hertz
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a floating point value representing the MIDI note number of the given frequency
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>freq-to-midi</strong> 260) --&gt; 59.892094
(<strong>freq-to-midi</strong> (<a href="#robo143">midi-to-freq</a> 60)) --&gt; 60.0
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>freq-to-midi</strong> (freq)
</pre>


<a name="cm2ffreq2dto2dnote"></a>
<a name="robo136"></a><h2 class=robodoc>cm/freq-to-note [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the note-name <a href="./pitch_lsp.html#robo297">pitch</a> equivalent of the specified frequency, rounded to
 the <a href="./utilities_lsp.html#robo981">nearest</a> <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degree of the current <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A number that is a frequency in Hertz.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - The <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> in which the note-name <a href="./pitch_lsp.html#robo297">pitch</a> equivalent is to be sought (Common
 Music <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> object or symbol). If a symbol, then 'chromatic-<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>,
 'twelfth-tone, or 'quarter-tone only at present.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbol.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>freq-to-note</strong> 423 'chromatic-<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>)

=&gt; AF4

(<strong>freq-to-note</strong> 423 'twelfth-tone)

=&gt; GSSS4

(<strong>freq-to-note</strong> 423 'quarter-tone)

=&gt; AQF4
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>freq-to-note</strong> (freq &amp;optional (<a href="./rthm-seq-palette_lsp.html#robo553">scale</a> <a href="#robo4">cm</a>::*<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>*))
</pre>


<a name="cm2fget2dpitch2dbend"></a>
<a name="robo137"></a><h2 class=robodoc>cm/get-pitch-bend [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the MIDI <a href="./pitch_lsp.html#robo297">pitch</a>-bend value necessary for application to a MIDI <a href="./pitch_lsp.html#robo297">pitch</a> in
 order to achieve the specified frequency.

 NB: This will always return a positive value <a href="./utilities_lsp.html#robo934">between</a> 0.0 and 1.0, as
     <a href="./slippery-chicken_lsp.html#robo632">slippery-chicken</a> always applies <a href="./pitch_lsp.html#robo297">pitch</a>-bends upwards from the <a href="./utilities_lsp.html#robo981">nearest</a>
     chromatic note below the specified frequency. 

 NB: This value will be the same in all tuning scales.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A frequency in Hertz.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A two-digit decimal number that is the <a href="./pitch_lsp.html#robo297">pitch</a>-bend value required to achieve
 the specified frequency in MIDI.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>get-pitch-bend</strong> 423)

=&gt; 0.32
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>get-pitch-bend</strong> (freq)
</pre>


<a name="cm2fin2dscale"></a>
<a name="robo138"></a><h2 class=robodoc>cm/in-scale [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Set the global <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> (tuning) for the current <a href="./slippery-chicken_lsp.html#robo632">slippery-chicken</a>
 environment. Current options are :chromatic, :quarter-tone or
 :twelfth-tone. See the file <a href="./cm-load_lsp.html#robo_top_of_doc">cm-load.lsp</a> for specifications and the html
 manual page "More about note-names and scales" for more details on use.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> (tuning) designation.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> the (new) Common Music <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> object
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>in-scale</strong> :chromatic)

=&gt; #&lt;tuning "chromatic-<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>"&gt;

(<strong>in-scale</strong> :quarter-tone)

=&gt; #&lt;tuning "quarter-tone"&gt;

(<strong>in-scale</strong> :twelfth-tone)

=&gt; #&lt;tuning "twelfth-tone"&gt;
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>in-scale</strong> (<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>)
</pre>


<a name="cm2fmidi2dfile2dto2devents"></a>
<a name="robo141"></a><h2 class=robodoc>cm/midi-file-to-events [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 28/6/16, Edinburgh
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Read in a MIDI file and convert notes to <a href="./event_lsp.html#robo449">event</a> objects.
 NB This won't (yet) import microtones as indicated by <a href="./pitch_lsp.html#robo297">pitch</a>-bend messages
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> the path to the midi file
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :track. The track number to read. Default = NIL which means read all
 tracks.
 - :<a href="./tempo_lsp.html#robo302">tempo</a>. The <a href="./tempo_lsp.html#robo302">tempo</a> of the track in crotchets (quarter notes) per
 minute. This should override the midi-file's <a href="./tempo_lsp.html#robo302">tempo</a>. See also
 test-<strong>midi-file-to-events</strong> in sc-test-suite.lsp  
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a list of <a href="./event_lsp.html#robo449">event</a> objects
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>midi-file-to-events</strong> (file &amp;key track <a href="./tempo_lsp.html#robo302">tempo</a>)
</pre>


<a name="cm2fmidi2dto2ddegree"></a>
<a name="robo142"></a><h2 class=robodoc>cm/midi-to-degree [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Convert the specified MIDI note number to the degree number of the current
 <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A MIDI note number.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> - An integer that is the <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>-degree equivalent of the specified MIDI note
   number in the current <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<a href="#robo138">in-scale</a> :chromatic)
(<strong>midi-to-degree</strong> 64)

=&gt; 64

(<a href="#robo138">in-scale</a> :twelfth-tone)
(<strong>midi-to-degree</strong> 64)

=&gt; 384

(<a href="#robo138">in-scale</a> :quarter-tone)
(<strong>midi-to-degree</strong> 64)

=&gt; 128
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>midi-to-degree</strong> (midi-note &amp;optional (<a href="./rthm-seq-palette_lsp.html#robo553">scale</a> <a href="#robo4">cm</a>::*<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>*))
</pre>


<a name="cm2fmidi2dto2dfreq"></a>
<a name="robo143"></a><h2 class=robodoc>cm/midi-to-freq [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the frequency equivalent in Hertz to the specified MIDI note number. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number (can be a decimal) that is a MIDI note number.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A decimal number that is a frequency in Hertz.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>midi-to-freq</strong> 67)

=&gt; 391.99542

(<strong>midi-to-freq</strong> 67.9)

=&gt; 412.91272
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>midi-to-freq</strong> (midi-note)
</pre>


<a name="cm2fmidi2dto2dnote"></a>
<a name="robo144"></a><h2 class=robodoc>cm/midi-to-note [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbol equivalent of the specified MIDI note
 number. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - a MIDI note number: integer or float. If float, appropriate microtones
 will be returned if the current <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> is <a href="./event_lsp.html#robo211">microtonal</a> (e.g. (<a href="#robo138">in-scale</a>
 :quarter-tone)) 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbol.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>midi-to-note</strong> 67)
=&gt; G4
(<strong>midi-to-note</strong> 60.5)
=&gt;CQS4
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>midi-to-note</strong> (midi-note &amp;optional (<a href="./rthm-seq-palette_lsp.html#robo553">scale</a> <a href="#robo4">cm</a>::*<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>*))
</pre>


<a name="cm2fmidi2qlist"></a>
<a name="robo145"></a><h2 class=robodoc>cm/midi2qlist [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 10th November 2016, Edinburgh
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a midi-file to qlist text format, for sequencing in PD or MaxMSP.
 If you don't want specific tracks from the file, just pass two arguments so
 &lt;tracks&gt; remains nil.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the path to the midi file you want to convert (string)
 - the path to the qlist text file you'd like to write (string). If this is
   nil then we'll write to the same patch as the midi file with the extension
   .txt added. NB If this file exists it will be overwritten, no questions
   asked.
 - (&amp;rest) the numbers of the tracks you'd like to convert, starting from 1.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The number of notes written (integer)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>midi2qlist</strong> (midi-file qlist-file &amp;rest tracks)
</pre>


<a name="cm2fnote2dto2ddegree"></a>
<a name="robo146"></a><h2 class=robodoc>cm/note-to-degree [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degree number of the specified note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbol within
 the current <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbol.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - The <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> in which to find the <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>-degree of the specified <a href="./pitch_lsp.html#robo297">pitch</a>.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An integer that is a <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degree in the current <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>note-to-degree</strong> 'AF4 'chromatic-<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>)

=&gt; 68

(<strong>note-to-degree</strong> 'AF4 'twelfth-tone)

=&gt; 408

(<strong>note-to-degree</strong> 'AF4 'quarter-tone)

=&gt; 136
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>note-to-degree</strong> (note &amp;optional (<a href="./rthm-seq-palette_lsp.html#robo553">scale</a> <a href="#robo4">cm</a>::*<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>*))
</pre>


<a name="cm2fnote2dto2dfreq"></a>
<a name="robo147"></a><h2 class=robodoc>cm/note-to-freq [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the frequency in Hertz of the specified note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbol.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbol.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A frequency in Hertz.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<a href="#robo138">in-scale</a> :chromatic)
(<strong>note-to-freq</strong> 'AF4)

=&gt; 415.3047

(<a href="#robo138">in-scale</a> :twelfth-tone)
(<strong>note-to-freq</strong> 'GSSS4)

=&gt; 423.37845

(<a href="#robo138">in-scale</a> :quarter-tone)
(<strong>note-to-freq</strong> 'AQF4)

=&gt; 427.47403
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>note-to-freq</strong> (note)
</pre>


<a name="cm2fnote2dto2dmidi"></a>
<a name="robo148"></a><h2 class=robodoc>cm/note-to-midi [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the MIDI note number equivalent for a chromatic note-name <a href="./pitch_lsp.html#robo297">pitch</a>
 symbol. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A chromatic note-name <a href="./pitch_lsp.html#robo297">pitch</a> symbol.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An integer.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>note-to-midi</strong> 'g4)

=&gt; 67
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>note-to-midi</strong> (midi-note)
</pre>


<a name="cm2fset2ddiapason"></a>
<a name="robo150"></a><h2 class=robodoc>cm/set-diapason [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo4">cm</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> March 11th 2021
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Set the frequency of the note A4 (the diapason). By default, in slippery
 chicken (and common music) this is 440 Hertz. If this function is called, it
 will change the diapason for all currently defined scales, and thus will
 affect all calculations in any <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> that converts to or from frequency.

 NB Explicit calling of this function is discouraged. Use instead something
 like this: (set-sc-config 'diapason 442)
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the new frequency of the note A4 (<a href="./utilities_lsp.html#robo976">middle</a> A: i.e. the note played by the
   oboe when a western orchestra tunes). (For internal use, if this is NIL,
   the frequency of the <a href="./chord_lsp.html#robo94">lowest</a> A will be returned.)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The frequency in Hertz of the <a href="./chord_lsp.html#robo94">lowest</a> A in the (new) tuning.
</pre>
<p class="item_name">EXAMPLE</p>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(let ((low-a 440/64))                   ; 6.875Hz (<a href="./chord_lsp.html#robo94">lowest</a> A)
  (defun <strong>set-diapason</strong> (hertz)
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./../../src/cm.lsp with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.44 on 2025-11-13 11:26:17</p>
</div> <!-- footer -->
</body>
</html>
