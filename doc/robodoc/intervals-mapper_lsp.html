<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<script src="./robodoc.js"></script>
<title>intervals-mapper.lsp</title>
<!-- Source: ./../../src/intervals-mapper.lsp -->
<!-- Generated with ROBODoc Version 4.99.44 (Oct 31 2021) -->
</head>
<script type=text/javascript src=../head-foot.js></script>
<body>
<div id="content">
<script type="text/javascript">header("../");</script>

<div id="logo">
<a name="robo_top_of_doc"></a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./roboindex.html#top">Index</a>
<a class="menuitem" href="./robo_parameters.html#top">Global Parameters</a>
<a class="menuitem" href="./robo_classes.html#top">Classes</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_modules.html#top">Modules</a>
<a class="menuitem" href="./robo_methods.html#top">Methods</a>
</div> <!-- navigation -->


<a name="intervals2dmapper2fget2dpitch2dsymbols"></a>
<a name="robo270"></a><h2 class=robodoc>intervals-mapper/get-pitch-symbols [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo636">intervals-mapper</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the pitches contained in a given <a href="#robo636">intervals-mapper</a> object returned as a
 list of note-name symbols.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An <a href="#robo636">intervals-mapper</a> object.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of note-name <a href="./pitch_lsp.html#robo295">pitch</a> symbols.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((im (<a href="#robo275">make-intervals-mapper</a> 'c0 '(d e gs as d ef g a bf cs d ef gf))))
  (<strong>get-pitch-symbols</strong> im))

=&gt; (C0 D0 FS0 AF0 C1 CS1 F1 G1 AF1 B1 C2 CS2 E2 FS2 BF2 C3 E3 F3 A3 B3 C4 EF4
    E4 F4 AF4 BF4 D5 E5 AF5 A5 CS6 EF6 E6 G6 AF6 A6 C7 D7 FS7 AF7 C8 CS8 F8 G8
    AF8 B8 C9 CS9 E9 FS9)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>get-pitch-symbols</strong> ((im intervals-mapper) &amp;optional ignore)
</pre>


<a name="intervals2dmapper2fget2dscale"></a>
<a name="robo271"></a><h2 class=robodoc>intervals-mapper/get-scale [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo636">intervals-mapper</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Create a <a href="./afu_lsp.html#robo32">scale</a> (sequence of pitches) beginning with the specified starting
 note and extending up to MIDI note 119 (by default: settable in the <a href="./event_lsp.html#robo197">highest</a>
 slot) by cycling through the interval structure of the STEPS slot.

 The <a href="./afu_lsp.html#robo32">scale</a> will only repeat at octaves if the interval structure of the list
 of pitches passed at initialisation creates that result. 

 NB: This method is usually only called automatically at initialisation.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An intervals mapper object.
 - A note-name <a href="./pitch_lsp.html#robo295">pitch</a> symbol (e.g. 'c0) that is the <a href="./pitch_lsp.html#robo295">pitch</a> on which to begin
   the <a href="./afu_lsp.html#robo32">scale</a>, and which is to be stored in the TONIC slot.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of the <a href="./pitch_lsp.html#robo295">pitch</a> objects in the new <a href="./afu_lsp.html#robo32">scale</a>. These are also stored in the
 SCALE-PITCHES slot. 
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((im (<a href="#robo275">make-intervals-mapper</a> 'c0 '(d e gs as d ef g a bf cs d ef gf))))
  (<a href="./pitch_lsp.html#robo360">pitch-list-to-symbols</a> (<strong>get-scale</strong> im 'd4)))

=&gt; (D4 E4 AF4 BF4 D5 EF5 G5 A5 BF5 CS6 D6 EF6 FS6 AF6 C7 D7 FS7 G7 B7 CS8 D8 F8
    FS8 G8 BF8 C9 E9 FS9)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>get-scale</strong> ((im intervals-mapper) start-note)
</pre>


<a name="intervals2dmapper2fget2dsteps"></a>
<a name="robo272"></a><h2 class=robodoc>intervals-mapper/get-steps [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo636">intervals-mapper</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Extract the interval structure of the list of note-name <a href="./pitch_lsp.html#robo295">pitch</a> symbols
 passed as the data to the instance of the <a href="#robo636">intervals-mapper</a> object upon
 initialization. The interval structure is returned as a list of semitone
 values. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An <a href="#robo636">intervals-mapper</a> object.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of integers that are the numbers of <a href="./utilities_lsp.html#robo1010">semitones</a> <a href="./utilities_lsp.html#robo925">between</a> each
 consecutive <a href="./pitch_lsp.html#robo295">pitch</a> in the original data list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((im (<a href="#robo275">make-intervals-mapper</a> 'c0 '(d e gs as d ef g a bf cs d ef gf))))
  (<strong>get-steps</strong> im))

=&gt; (2 4 2 4 1 4 2 1 3 1 1 3)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>get-steps</strong> ((im intervals-mapper))
</pre>


<a name="intervals2dmapper2fintervals2dmapper2ddegree"></a>
<a name="robo273"></a><h2 class=robodoc>intervals-mapper/intervals-mapper-degree [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo636">intervals-mapper</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DATE</p>
<pre> 14-Aug-2010
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Return the <a href="./afu_lsp.html#robo32">scale</a> degree number of a specified <a href="./pitch_lsp.html#robo295">pitch</a> class in relation to a
 specified octave within the given <a href="#robo636">intervals-mapper</a> object.

 To determine the <a href="./afu_lsp.html#robo32">scale</a> degree number, this method begins at the first <a href="./pitch_lsp.html#robo295">pitch</a>
 &gt;= C in the specified octave and passes consecutively through each
 subsequent <a href="./pitch_lsp.html#robo295">pitch</a> in the interval-mapper object's full <a href="./afu_lsp.html#robo32">scale</a>, counting each
 step until it first encounters the <a href="./pitch_lsp.html#robo295">pitch</a> class of the specified <a href="./pitch_lsp.html#robo295">pitch</a>.

 If there are no more instances of the specified <a href="./pitch_lsp.html#robo295">pitch</a> class, the method
 returns NIL.

 The method takes as its <a href="./pitch_lsp.html#robo295">pitch</a> class a <a href="./pitch_lsp.html#robo295">pitch</a> object, which includes an
 octave indicator. For the purposes of this method, solely the <a href="./pitch_lsp.html#robo295">pitch</a>-class
 name is extracted from the <a href="./pitch_lsp.html#robo295">pitch</a> object.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An <a href="#robo636">intervals-mapper</a> object.
 - An instance of a <a href="./pitch_lsp.html#robo295">pitch</a> object whose <a href="./pitch_lsp.html#robo295">pitch</a> class is being sought.
 - An integer that is the octave in relationship to which the <a href="./afu_lsp.html#robo32">scale</a> degree
   is sought.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - T or NIL to indication whether to return the position of the found <a href="./pitch_lsp.html#robo295">pitch</a>
   object within the complete <a href="./afu_lsp.html#robo32">scale</a> list of the given <a href="#robo636">intervals-mapper</a>
   object rather than the <a href="./afu_lsp.html#robo32">scale</a> degree. T = return the position. 
   Default = NIL.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns an integer that is either the <a href="./afu_lsp.html#robo32">scale</a> degree of the specified <a href="./pitch_lsp.html#robo295">pitch</a>
 class in relation to the specified octave, counting from 1, or the position
 of the found <a href="./pitch_lsp.html#robo295">pitch</a> object within the interval-mapper object's complete
 <a href="./afu_lsp.html#robo32">scale</a>. 

 Returns NIL if no instances of the specified <a href="./pitch_lsp.html#robo295">pitch</a> class are found.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; The desired <a href="./pitch_lsp.html#robo295">pitch</a> class BF is found within the specified octave
(let ((im (<a href="#robo275">make-intervals-mapper</a> 'c0 '(d e gs as d ef g a bf cs d ef gf))))
  (<strong>intervals-mapper-degree</strong> im (<a href="./pitch_lsp.html#robo348">make-pitch</a> 'bf4) 4))

=&gt; 6

;;; The desired <a href="./pitch_lsp.html#robo295">pitch</a> class B is found outside of the specified octave
(let ((im (<a href="#robo275">make-intervals-mapper</a> 'c0 '(d e gs as d ef g a bf cs d ef gf))))
  (<strong>intervals-mapper-degree</strong> im (<a href="./pitch_lsp.html#robo348">make-pitch</a> 'b4) 5))

=&gt; 20

;;; Return the position instead
(let ((im (<a href="#robo275">make-intervals-mapper</a> 'c0 '(d e gs as d ef g a bf cs d ef gf))))
  (<strong>intervals-mapper-degree</strong> im (<a href="./pitch_lsp.html#robo348">make-pitch</a> 'b4) 5 t))

=&gt; 45

;;; The desired <a href="./pitch_lsp.html#robo295">pitch</a> class BF is not present in any of the octaves beginning
;;; including and above the specified octave

(let ((im (<a href="#robo275">make-intervals-mapper</a> 'c0 '(d e gs as d ef g a bf cs d ef gf))))
  (<strong>intervals-mapper-degree</strong> im (<a href="./pitch_lsp.html#robo348">make-pitch</a> 'bf4) 5))

=&gt; NIL
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>intervals-mapper-degree</strong> ((im intervals-mapper) <a href="./pitch_lsp.html#robo295">pitch</a> octave
                                    &amp;optional return-nth)
</pre>


<a name="intervals2dmapper2fintervals2dmapper2dnote"></a>
<a name="robo274"></a><h2 class=robodoc>intervals-mapper/intervals-mapper-note [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo636">intervals-mapper</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the <a href="./pitch_lsp.html#robo295">pitch</a> object that constitutes the specified <a href="./afu_lsp.html#robo32">scale</a> degree of the
 specified octave within an <a href="#robo636">intervals-mapper</a> object; or, if keyword argument
 &lt;nth&gt; is set to T, get the position of this <a href="./pitch_lsp.html#robo295">pitch</a> object within the full
 range of the <a href="#robo636">intervals-mapper</a> object's complete <a href="./afu_lsp.html#robo32">scale</a>.

 As there is no concept of a tonic that repeats at octaves, degree 1 in any
 given octave is simply the first note &gt;= the C in that octave.  

 If a note-name <a href="./pitch_lsp.html#robo295">pitch</a> symbol is given for the keyword argument &lt;tonic&gt;, the
 given <a href="#robo636">intervals-mapper</a> object's TONIC slot will be changed, and its
 <a href="./afu_lsp.html#robo32">scale</a>-pitches will be recalculated accordingly before getting the <a href="./pitch_lsp.html#robo295">pitch</a>.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An <a href="#robo636">intervals-mapper</a> object.
 - An integer that is the <a href="./afu_lsp.html#robo32">scale</a> degree (1-based) of the desired <a href="./pitch_lsp.html#robo295">pitch</a> within
   the specified octave, counting from the first note of the <a href="./afu_lsp.html#robo32">scale</a> above or
   on the C in that octave. If this number is higher than the number of
   pitches in the span of an octave, a <a href="./pitch_lsp.html#robo295">pitch</a> from a higher octave will
   accordingly be returned. Similarly, a negative number can also be given
   here to indicate that the <a href="./pitch_lsp.html#robo295">pitch</a> is to be collected from that many degrees
   below the specified octave.
 - An integer that indicates the octave from which the <a href="./pitch_lsp.html#robo295">pitch</a> is to be
   returned (e.g. 4 for the octave starting on <a href="./utilities_lsp.html#robo967">middle</a> C, 5 for the octave
   starting on the C above that etc.)
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments
 - :tonic. NIL or a note-name <a href="./pitch_lsp.html#robo295">pitch</a> symbol that is the new starting note for
   above which the <a href="#robo636">intervals-mapper</a> <a href="./afu_lsp.html#robo32">scale</a> is to be re-mapped before the
   <a href="./pitch_lsp.html#robo295">pitch</a> is returned. This will usually be the <a href="./event_lsp.html#robo202">lowest</a> <a href="./pitch_lsp.html#robo295">pitch</a> on which the
   <a href="./afu_lsp.html#robo32">scale</a> should start. If NIL, no changes will be made to the object's
   existing <a href="./afu_lsp.html#robo32">scale</a> pitches before returning the desired <a href="./pitch_lsp.html#robo295">pitch</a>. Default = NIL.
 - :nth. T or NIL to indicate whether instead of returning the <a href="./pitch_lsp.html#robo295">pitch</a> object
   itself, the method should return an integer that is the position of that
   <a href="./pitch_lsp.html#robo295">pitch</a> within the full span of the interval-mapper object's complete
   <a href="./afu_lsp.html#robo32">scale</a>. T = return the position. Default = NIL.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A <a href="./pitch_lsp.html#robo295">pitch</a> object by default, or its position in the <a href="./afu_lsp.html#robo32">scale</a> list if the :nth
 argument is set to T.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Returns a <a href="./pitch_lsp.html#robo295">pitch</a> object by default
(let ((im (<a href="#robo275">make-intervals-mapper</a> 'c0 '(d e gs as d ef g a bf cs d ef gf))))
  (<strong>intervals-mapper-note</strong> im 3 4))

=&gt; 
PITCH: frequency: 329.628, midi-note: 64, midi-channel: 0 
       <a href="./pitch_lsp.html#robo295">pitch</a>-bend: 0.0 
       degree: 128, data-consistent: T, white-note: E4
       <a href="./utilities_lsp.html#robo972">nearest</a>-chromatic: E4
       src: 1.2599211, src-ref-<a href="./pitch_lsp.html#robo295">pitch</a>: C4, score-note: E4 
       qtr-sharp: NIL, qtr-flat: NIL, qtr-tone: NIL,  
       micro-tone: NIL, 
       sharp: NIL, flat: NIL, natural: T, 
       octave: 4, c5ths: 0, no-8ve: E, no-8ve-no-acc: E
       show-accidental: T, white-degree: 30, 
       accidental: N, 
       accidental-in-parentheses: NIL, marks: NIL
LINKED-NAMED-OBJECT: previous: NIL, this: NIL, next: NIL
NAMED-OBJECT: id: E4, tag: NIL, 
data: E4

;;; Used with negative degree numbers
(let ((im (<a href="#robo275">make-intervals-mapper</a> 'c0 '(d e gs as d ef g a bf cs d ef gf))))
  (data (<strong>intervals-mapper-note</strong> im -3 2)))

=&gt; F1

;;; Use with a new tonic and setting nth to T to return the position 
(let ((im (<a href="#robo275">make-intervals-mapper</a> 'c0 '(d e gs as d ef g a bf cs d ef gf))))
  (<strong>intervals-mapper-note</strong> im 11 5 :tonic 'd1 :nth t))

=&gt; 29
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>intervals-mapper-note</strong> ((im intervals-mapper) degree octave
                                  &amp;key tonic nth)
</pre>


<a name="intervals2dmapper2fmake2dintervals2dmapper"></a>
<a name="robo275"></a><h2 class=robodoc>intervals-mapper/make-intervals-mapper [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo636">intervals-mapper</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Returns an <a href="#robo636">intervals-mapper</a> object starting with the specified <a href="./pitch_lsp.html#robo295">pitch</a>
 ('tonic') and using the interval structure of the specified list of
 pitches, creating a complete <a href="./pitch_lsp.html#robo295">pitch</a> list from the interval structure of list
 of pitches.

 NB The pitches specified aren't necessarily used in the resulting complete
    <a href="./pitch_lsp.html#robo295">pitch</a> list; rather, their interval structure is mapped above the
    specified starting <a href="./pitch_lsp.html#robo295">pitch</a> and repeated upwards until the method reaches
    MIDI note 127. 

 NB The <a href="./afu_lsp.html#robo32">scale</a> will only repeat at octaves if that is the interval structure
    of the list of pitches it is passed.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A note-name <a href="./pitch_lsp.html#robo295">pitch</a> symbol that is the starting <a href="./pitch_lsp.html#robo295">pitch</a>, (e.g. 'c0).
 - A list of note-name <a href="./pitch_lsp.html#robo295">pitch</a> symbols that provides the interval structure
   for the resulting <a href="./afu_lsp.html#robo32">scale</a>.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An <a href="#robo636">intervals-mapper</a> object.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; A <a href="./afu_lsp.html#robo32">scale</a> without repeating octaves:
(<strong>make-intervals-mapper</strong> 'c0 '(d e gs as d ef g a bf cs d ef gf))

=&gt; 
INTERVALS-MAPPER: steps: (2 4 2 4 1 4 2 1 3 1 1 3), 
<a href="./afu_lsp.html#robo32">scale</a>-pitches (<a href="./pitch_lsp.html#robo295">pitch</a> objects): (C0 D0 FS0 AF0 C1 CS1 F1 G1 AF1 B1 C2 CS2 E2 FS2
                                BF2 C3 E3 F3 A3 B3 C4 EF4 E4 F4 AF4 BF4 D5 E5
                                AF5 A5 CS6 EF6 E6 G6 AF6 A6 C7 D7 FS7 AF7 C8
                                CS8 F8 G8 AF8 B8 C9 CS9 E9 FS9)
tonic: C0
SCLIST: <a href="./sclist_lsp.html#robo298">sclist</a>-length: -1, bounds-alert: T, copy: T
LINKED-NAMED-OBJECT: previous: NIL, this: NIL, next: NIL
NAMED-OBJECT: id: NIL, tag: NIL, 
data: (D E GS AS D EF G A BF CS D EF GF)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>make-intervals-mapper</strong> (tonic notes &amp;optional (<a href="./event_lsp.html#robo197">highest</a> 119))
</pre>


<a name="sclist2fintervals2dmapper"></a>
<a name="robo636"></a><h2 class=robodoc>sclist/intervals-mapper [ Classes ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./sclist_lsp.html#robo298">sclist</a> ] [ <a href="./robo_classes.html#robo_top_of_doc">Classes</a> ]</p>
<p class="item_name">NAME</p>
<pre> <strong>intervals-mapper</strong>

 File:             <a href="#robo_top_of_doc">intervals-mapper.lsp</a>

 Class Hierarchy:  <a href="./named-object_lsp.html#robo628">named-object</a> -&gt; <a href="./linked-named-object_lsp.html#robo309">linked-named-object</a> -&gt; <a href="./sclist_lsp.html#robo298">sclist</a> -&gt;
                   <strong>intervals-mapper</strong>  

 Version:          1.1.0

 Project:          slippery chicken (algorithmic composition)

 Purpose:          Implementation of a <a href="./afu_lsp.html#robo32">scale</a> object that can initialize its
                   complete <a href="./pitch_lsp.html#robo295">pitch</a> list from the interval structure of a
                   given list of notes.  Given the <a href="./afu_lsp.html#robo32">scale</a>, it's a cinch to
                   <a href="./wolfram_lsp.html#robo1029">generate</a> note sequences based on note offset patterns
                   e.g.
                   (let ((s (<a href="#robo275">make-intervals-mapper</a> 'c0 '(d e gs as d ef g a 
                                           bf cs d ef gf)))
                         (pat '(-1 2 4  3 6 -2 -1 2 6  7 3 6 2)))
                     (loop for p in pat collect
                          (data (<a href="#robo274">intervals-mapper-note</a> s p 4))))
                   -&gt; (A3 EF4 F4 E4 BF4 F3 A3 EF4 BF4 D5 E4 BF4 EF4)

 Author:           Michael Edwards: m@michael-edwards.org

 Creation date:    August 3rd 2010 Edinburgh

 $$ Last modified:  20:38:22 Mon Aug 19 2024 CEST


 SVN ID: $Id$
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./../../src/intervals-mapper.lsp with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.44 on 2025-05-10 11:02:11</p>
</div> <!-- footer -->
</body>
</html>
