<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<script src="./robodoc.js"></script>
<title>player.lsp</title>
<!-- Source: ./../../src/player.lsp -->
<!-- Generated with ROBODoc Version 4.99.44 (Oct 31 2021) -->
</head>
<script type=text/javascript src=../head-foot.js></script>
<body>
<div id="content">
<script type="text/javascript">header("../");</script>

<div id="logo">
<a name="robo_top_of_doc"></a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./roboindex.html#top">Index</a>
<a class="menuitem" href="./robo_parameters.html#top">Global Parameters</a>
<a class="menuitem" href="./robo_classes.html#top">Classes</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_modules.html#top">Modules</a>
<a class="menuitem" href="./robo_methods.html#top">Methods</a>
</div> <!-- navigation -->


<a name="linked2dnamed2dobject2fplayer"></a>
<a name="robo298"></a><h2 class=robodoc>linked-named-object/player [ Classes ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./linked-named-object_lsp.html#robo311">linked-named-object</a> ] [ <a href="./robo_classes.html#robo_top_of_doc">Classes</a> ]</p>
<p class="item_name">NAME</p>
<pre> <strong>player</strong>

 File:             <a href="#robo_top_of_doc">player.lsp</a>

 Class Hierarchy:  <a href="./named-object_lsp.html#robo631">named-object</a> -&gt; <a href="./linked-named-object_lsp.html#robo311">linked-named-object</a> -&gt; <strong>player</strong>

 Version:          1.1.0

 Project:          slippery chicken (algorithmic composition)

 Purpose:          Implementation of the <strong>player</strong> class which holds an
                   <a href="./instrument_lsp.html#robo296">instrument</a> or a <a href="./assoc-list_lsp.html#robo115">assoc-list</a> of <a href="./instruments_lsp.html#robo12">instruments</a> in it's data
                   slot.    

 Author:           Michael Edwards: m@michael-edwards.org

 Creation date:    7th September 2001

 $$ Last modified:  16:42:03 Sat Nov  1 2025 CET

 SVN ID: $Id$
</pre>


<a name="player2fmake2dplayer"></a>
<a name="robo385"></a><h2 class=robodoc>player/make-player [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo298">player</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Create a <a href="#robo298">player</a> object from a specified <a href="./instrument-palette_lsp.html#robo313">instrument-palette</a> object and a
 specified <a href="./instrument_lsp.html#robo296">instrument</a> or list of <a href="./instruments_lsp.html#robo12">instruments</a> which that <a href="#robo298">player</a> plays. 

 The <a href="#robo298">player</a> object is separate from the <a href="./instrument_lsp.html#robo296">instrument</a> object as on <a href="#robo298">player</a> in an
 <a href="./ensemble_lsp.html#robo414">ensemble</a> may perform more than one <a href="./instrument_lsp.html#robo296">instrument</a> ("<a href="./sc-map_lsp.html#robo592">double</a>"), such as flute and
 piccolo, clarinet and bass clarinet, or sax, flute and clarinet.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A symbol which will be the ID of the resulting <a href="#robo298">player</a> object.
 - An <a href="./instrument-palette_lsp.html#robo313">instrument-palette</a> object. If NIL then
   <a href="./instruments_lsp.html#robo254">+slippery-chicken-standard-instrument-palette+</a> will be used 
 - A symbol or a list of symbols that are the <a href="./instruments_lsp.html#robo12">instruments</a> from the
   specified <a href="./instrument-palette_lsp.html#robo313">instrument-palette</a> object that the given <a href="#robo298">player</a> will play, as
   spelled and defined within the <a href="./instrument-palette_lsp.html#robo313">instrument-palette</a> object. NB: If only one
   <a href="./instrument_lsp.html#robo296">instrument</a> is to be assigned to the given <a href="#robo298">player</a>, it should be stated as
   symbol rather than a list, to avoid errors in the DOUBLES slot.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :midi-channel. An integer that indicates the MIDI channel on which any
   non-<a href="./event_lsp.html#robo211">microtonal</a> <a href="./pitch_lsp.html#robo297">pitch</a> material for this <a href="#robo298">player</a> is to be played
   back. Default = 1.
 - :microtones-midi-channel. An integer that indicates the MIDI channel on
   which any <a href="./event_lsp.html#robo211">microtonal</a> <a href="./pitch_lsp.html#robo297">pitch</a> material for this <a href="#robo298">player</a> is to be played
   back. slippery chicken uses this channel to <a href="./recursive-assoc-list_lsp.html#robo411">add</a> MIDI <a href="./pitch_lsp.html#robo297">pitch</a>-bends via CM
   so that <a href="./event_lsp.html#robo211">microtonal</a> chords are possible, but due to a current glitch these
   tracks contain no <a href="./pitch_lsp.html#robo297">pitch</a>-bend data. A work-around for this is to simply
   open the MIDI file in a sequencer and shift the entire channel by the
   desired <a href="./pitch_lsp.html#robo297">pitch</a>-bend value. Default = -1 = same as :midi-channel.
 - :<a href="./cmn_lsp.html#robo7">cmn</a>-staff-args. A list of pairs that indicate any additional arguments
   to the call to <a href="./cmn_lsp.html#robo7">cmn</a>::staff for this <a href="#robo298">player</a>, such as staff size, number of
   lines etc. Instead of being real <a href="./cmn_lsp.html#robo7">cmn</a> function calls, as they would be in
   normal <a href="./cmn_lsp.html#robo7">cmn</a>, this is a simple list of pairs; e.g. '(staff-size .8
   staff-lines 3). Defaults = NIL.
 - :staff-names. A symbol, string or list of staff names, generally strings,
   for each <a href="./instrument_lsp.html#robo296">instrument</a> the <a href="#robo298">player</a> will play. E.g. '("violin II"). If not
   given, then the <a href="./instrument_lsp.html#robo296">instrument</a>'s name as defined in the <a href="./instrument_lsp.html#robo296">instrument</a> <a href="./palette_lsp.html#robo426">palette</a>
   will be used. Default = NIL.
 - :staff-short-names. A symbol, string or list of short staff
   names. E.g. '("vln2"). Default = NIL
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns a <a href="#robo298">player</a> object.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;; Create a <a href="#robo298">player</a> object with just one <a href="./instrument_lsp.html#robo296">instrument</a> object
(let ((ip (<a href="./instrument-palette_lsp.html#robo240">make-instrument-palette</a> 
            'inst-pal 
            '((picc (:transposition-<a href="./utilities_lsp.html#robo1019">semitones</a> 12 :<a href="./chord_lsp.html#robo94">lowest</a>-written d4
                     :<a href="./event_lsp.html#robo199">highest</a>-written c6)) 
              (flute (:<a href="./chord_lsp.html#robo94">lowest</a>-written c4 :<a href="./event_lsp.html#robo199">highest</a>-written d7))  
              (clar (:transposition-<a href="./utilities_lsp.html#robo1019">semitones</a> -2 :<a href="./chord_lsp.html#robo94">lowest</a>-written e3
                     :<a href="./event_lsp.html#robo199">highest</a>-written c6))  
              (horn (:transposition f :transposition-<a href="./utilities_lsp.html#robo1019">semitones</a> -7
                     :<a href="./chord_lsp.html#robo94">lowest</a>-written f2 :<a href="./event_lsp.html#robo199">highest</a>-written c5))    
              (vln (:<a href="./chord_lsp.html#robo94">lowest</a>-written g3 :<a href="./event_lsp.html#robo199">highest</a>-written c7 :chords t))  
              (vla (:<a href="./chord_lsp.html#robo94">lowest</a>-written c3 :<a href="./event_lsp.html#robo199">highest</a>-written f6 :chords t))))))
  (<strong>make-player</strong> '<a href="#robo298">player</a>-one ip 'flute))

=&gt; 
PLAYER: (id <a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>): INST-PAL 
doubles: NIL, <a href="./cmn_lsp.html#robo7">cmn</a>-staff-args: NIL
LINKED-NAMED-OBJECT: previous: NIL, this: NIL, next: NIL
NAMED-OBJECT: id: PLAYER-ONE, tag: NIL, 
data: 
INSTRUMENT: <a href="./chord_lsp.html#robo94">lowest</a>-written: 
[...]
NAMED-OBJECT: id: FLUTE, tag: NIL, 
data: NIL

;; Create a <a href="#robo298">player</a> object with two <a href="./instruments_lsp.html#robo12">instruments</a>, setting the midi channels using
;; the keyword arguments, then print the corresponding slots to see the changes 
(let* ((ip (<a href="./instrument-palette_lsp.html#robo240">make-instrument-palette</a> 
            'inst-pal 
            '((picc (:transposition-<a href="./utilities_lsp.html#robo1019">semitones</a> 12 :<a href="./chord_lsp.html#robo94">lowest</a>-written d4
                     :<a href="./event_lsp.html#robo199">highest</a>-written c6)) 
              (flute (:<a href="./chord_lsp.html#robo94">lowest</a>-written c4 :<a href="./event_lsp.html#robo199">highest</a>-written d7))  
              (clar (:transposition-<a href="./utilities_lsp.html#robo1019">semitones</a> -2 :<a href="./chord_lsp.html#robo94">lowest</a>-written e3
                     :<a href="./event_lsp.html#robo199">highest</a>-written c6))  
              (horn (:transposition f :transposition-<a href="./utilities_lsp.html#robo1019">semitones</a> -7
                     :<a href="./chord_lsp.html#robo94">lowest</a>-written f2 :<a href="./event_lsp.html#robo199">highest</a>-written c5))    
              (vln (:<a href="./chord_lsp.html#robo94">lowest</a>-written g3 :<a href="./event_lsp.html#robo199">highest</a>-written c7 :chords t))  
              (vla (:<a href="./chord_lsp.html#robo94">lowest</a>-written c3 :<a href="./event_lsp.html#robo199">highest</a>-written f6 :chords t))))) 
       (plr (<strong>make-player</strong> '<a href="#robo298">player</a>-one ip '(flute picc) 
                         :midi-channel 1
                         :microtones-midi-channel 2)))
  (print (loop for i in (data (data plr)) collect (id i)))
  (print (midi-channel plr))
  (print (microtones-midi-channel plr)))

=&gt;
(FLUTE PICC) 
1 
2

;;; With specified <a href="./cmn_lsp.html#robo7">cmn</a>-staff-args
(let ((ip (<a href="./instrument-palette_lsp.html#robo240">make-instrument-palette</a> 
           'inst-pal 
           '((picc (:transposition-<a href="./utilities_lsp.html#robo1019">semitones</a> 12 :<a href="./chord_lsp.html#robo94">lowest</a>-written d4
                    :<a href="./event_lsp.html#robo199">highest</a>-written c6)) 
             (flute (:<a href="./chord_lsp.html#robo94">lowest</a>-written c4 :<a href="./event_lsp.html#robo199">highest</a>-written d7))  
             (clar (:transposition-<a href="./utilities_lsp.html#robo1019">semitones</a> -2 :<a href="./chord_lsp.html#robo94">lowest</a>-written e3
                    :<a href="./event_lsp.html#robo199">highest</a>-written c6))  
             (horn (:transposition f :transposition-<a href="./utilities_lsp.html#robo1019">semitones</a> -7
                    :<a href="./chord_lsp.html#robo94">lowest</a>-written f2 :<a href="./event_lsp.html#robo199">highest</a>-written c5))    
             (vln (:<a href="./chord_lsp.html#robo94">lowest</a>-written g3 :<a href="./event_lsp.html#robo199">highest</a>-written c7 :chords t))  
             (vla (:<a href="./chord_lsp.html#robo94">lowest</a>-written c3 :<a href="./event_lsp.html#robo199">highest</a>-written f6 :chords t))))))
  (<strong>make-player</strong> '<a href="#robo298">player</a>-one ip '(flute picc) 
               :midi-channel 1
               :microtones-midi-channel 2
               :<a href="./cmn_lsp.html#robo7">cmn</a>-staff-args '(staff-size .8 staff-lines 3)))

=&gt; 
PLAYER: (id <a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>): INST-PAL 
doubles: T, <a href="./cmn_lsp.html#robo7">cmn</a>-staff-args: (#&lt;SELF-ACTING {10097B6E73}&gt;
                             #&lt;SELF-ACTING {10097B6EE3}&gt;), total-notes: 0, total-degrees: 0, 
total-duration: 0.000, total-bars: 0, <a href="./ensemble_lsp.html#robo168">tessitura</a>: NIL
LINKED-NAMED-OBJECT: previous: NIL, this: NIL, next: NIL
NAMED-OBJECT: id: PLAYER-ONE, tag: NIL, 
data: 
[...]
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>make-player</strong> (id <a href="./instrument-palette_lsp.html#robo313">instrument-palette</a> <a href="./instruments_lsp.html#robo12">instruments</a>
                    &amp;key (<a href="./cmn_lsp.html#robo7">cmn</a>-staff-args nil) staff-names staff-short-names
                         (microtones-midi-channel -1) (midi-channel 1))
</pre>


<a name="player2fmicrotonal2dchords2dp"></a>
<a name="robo386"></a><h2 class=robodoc>player/microtonal-chords-p [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo298">player</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Determines whether the MICROTONES-MIDI-CHANNEL slot of the given <a href="#robo298">player</a>
 object is set to a value greater than 0 and is different to the midi-channel
 slot, indicating that the <a href="#robo298">player</a> and its <a href="./instrument_lsp.html#robo296">instrument</a> are capable of
 performing <a href="./event_lsp.html#robo211">microtonal</a> chords.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A <a href="#robo298">player</a> object.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns T if the value stored in the MICROTONES-MIDI-CHANNEL slot of the
 given <a href="#robo298">player</a> object is greater than 0, otherwise returns NIL.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;; Returns T
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'vln ip 'violin :microtones-midi-channel 2)))
  (<strong>microtonal-chords-p</strong> plr))

=&gt; T

;; Returns NIL
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'pno ip 'piano)))
  (<strong>microtonal-chords-p</strong> plr))

=&gt; NIL
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>microtonal-chords-p</strong> ((p <a href="#robo298">player</a>))
  ;; MDE Thu Dec 28 17:49:36 2017 -- updated as now <a href="#robo385">make-player</a> sets microtones
  ;; channel to midi-channel if it's not explicitly set
  (and (integer&gt;0 (microtones-midi-channel p))
       (/= (microtones-midi-channel p)
           (midi-channel p))))

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(defmethod score-write-bar-line ((p <a href="#robo298">player</a>))
  (let* ((data (data p))
         (ins (if (typep data 'assoc-list)
                  (first (data data))
                data)))
    (score-write-bar-line ins)))
</pre>


<a name="player2fplayer2dget2dinstrument"></a>
<a name="robo387"></a><h2 class=robodoc>player/player-get-instrument [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo298">player</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the <a href="./instrument_lsp.html#robo296">instrument</a> object assigned to a single-<a href="./instrument_lsp.html#robo296">instrument</a> <a href="#robo298">player</a> object or
 get the specified <a href="./instrument_lsp.html#robo296">instrument</a> object assigned to a multiple-<a href="./instrument_lsp.html#robo296">instrument</a>
 <a href="#robo298">player</a> object.  

 NB: This method will drop into the debugger with an error if no optional
     argument is supplied when applying the method to a multiple-<a href="./instrument_lsp.html#robo296">instrument</a>
     <a href="#robo298">player</a> object. It will also print a warning when supplying an optional
     argument to a <a href="#robo298">player</a> object that contains only one <a href="./instrument_lsp.html#robo296">instrument</a> object.  
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A <a href="#robo298">player</a> object.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - Actually a required object for multiple-<a href="./instrument_lsp.html#robo296">instrument</a> <a href="#robo298">player</a> objects: The
   symbol that is the ID of the sought-after <a href="./instrument_lsp.html#robo296">instrument</a> object, as it
   appears in the <a href="./instrument-palette_lsp.html#robo313">instrument-palette</a> with which the <a href="#robo298">player</a> object which
   made. If the given <a href="#robo298">player</a> object consists of only one <a href="./instrument_lsp.html#robo296">instrument</a> object,
   this argument is disregarded and a warning is printed. If this argument
   is simply T then the first <a href="./instrument_lsp.html#robo296">instrument</a> is returned (in the <a href="./assoc-list_lsp.html#robo115">assoc-list</a>, not
   the <a href="./piece_lsp.html#robo58">piece</a>, of which we have no knowledge).
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns an <a href="./instrument_lsp.html#robo296">instrument</a> object.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;; Returns an <a href="./instrument_lsp.html#robo296">instrument</a> object. Needs no optional argument when applied to a
;; <a href="#robo298">player</a> object that contains only one <a href="./instrument_lsp.html#robo296">instrument</a> object
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'pno ip 'piano)))
   (<strong>player-get-instrument</strong> plr))

=&gt;
INSTRUMENT:
[...]
NAMED-OBJECT: id: PIANO, tag: NIL, 
data: NIL

;; Returns the only existing <a href="./instrument_lsp.html#robo296">instrument</a> object and prints a warning if using
;; the optional argument when applying to a single-<a href="./instrument_lsp.html#robo296">instrument</a> <a href="#robo298">player</a> object 
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'pno ip 'piano)))
  (id (<strong>player-get-instrument</strong> plr 'piano)))

=&gt; PIANO
WARNING:
   <a href="#robo298">player</a>::<a href="#robo298">player</a>-get-<a href="./instrument_lsp.html#robo296">instrument</a>: <a href="#robo298">player</a> PNO has only 1 <a href="./instrument_lsp.html#robo296">instrument</a> so optional
argument PIANO is being ignored 

;; Asking for a non-existent <a href="./instrument_lsp.html#robo296">instrument</a> obect from a single-<a href="./instrument_lsp.html#robo296">instrument</a> <a href="#robo298">player</a>
;; object returns the only existing <a href="./instrument_lsp.html#robo296">instrument</a> object instead
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'pno ip 'piano)))
  (id (<strong>player-get-instrument</strong> plr 'marimba)))

=&gt; PIANO
WARNING:
   <a href="#robo298">player</a>::<a href="#robo298">player</a>-get-<a href="./instrument_lsp.html#robo296">instrument</a>: <a href="#robo298">player</a> PNO has only 1 <a href="./instrument_lsp.html#robo296">instrument</a> so optional
argument PIANO is being ignored 

;; The ID desired <a href="./instrument_lsp.html#robo296">instrument</a> object must be specified when applying the method
;; to a multiple-<a href="./instrument_lsp.html#robo296">instrument</a> <a href="#robo298">player</a> object
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'percussion ip '(marimba vibraphone))))
  (id (<strong>player-get-instrument</strong> plr 'marimba)))

=&gt; MARIMBA

;; Interrupts and drops into the debugger when the optional argument is omitted
;; in applying the method to a multiple-<a href="./instrument_lsp.html#robo296">instrument</a> <a href="#robo298">player</a> object
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'percussion ip '(marimba vibraphone))))
   (<strong>player-get-instrument</strong> plr))

=&gt;
<a href="#robo298">player</a>::<a href="#robo298">player</a>-get-<a href="./instrument_lsp.html#robo296">instrument</a>: PERCUSSION doubles so you need to pass the ID of
the <a href="./instrument_lsp.html#robo296">instrument</a> you want. 
   [Condition of type SIMPLE-ERROR]
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>player-get-instrument</strong> ((p <a href="#robo298">player</a>) &amp;optional ins (warn t))
</pre>


<a name="player2fplays2dtransposing2dinstrument"></a>
<a name="robo388"></a><h2 class=robodoc>player/plays-transposing-instrument [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo298">player</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Determine whether a given <a href="#robo298">player</a> object has one or more transposing
 <a href="./instrument_lsp.html#robo296">instrument</a> objects assigned to it.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A <a href="#robo298">player</a> object.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - T or NIL to indicate whether <a href="./instruments_lsp.html#robo12">instruments</a> that <a href="./rthm-seq-bar_lsp.html#robo530">transpose</a> at the octave are
   to be considered transposing <a href="./instruments_lsp.html#robo12">instruments</a>.  T = <a href="./instruments_lsp.html#robo12">instruments</a> that <a href="./rthm-seq-bar_lsp.html#robo530">transpose</a>
   at the octave are not considered transposing <a href="./instruments_lsp.html#robo12">instruments</a>. Default = T.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns T if one or more of the <a href="./instrument_lsp.html#robo296">instrument</a> objects assigned to the given
 <a href="#robo298">player</a> object has a transposition value other than C or a
 transposition-<a href="./utilities_lsp.html#robo1019">semitones</a> value other than 0.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;; Create a <a href="#robo298">player</a> object using the 'b-flat-clarinet <a href="./instrument_lsp.html#robo296">instrument</a> object
;; definition from the default <a href="./instruments_lsp.html#robo254">+slippery-chicken-standard-instrument-palette+</a>,
;; then apply the method. 
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'cl ip 'b-flat-clarinet)))
  (<strong>plays-transposing-instrument</strong> plr))

=&gt; T

;; Create a <a href="#robo298">player</a> object using the 'flute <a href="./instrument_lsp.html#robo296">instrument</a> object definition from
;; the default <a href="./instruments_lsp.html#robo254">+slippery-chicken-standard-instrument-palette+</a>, then apply the
;; method. 
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'fl ip 'flute)))
  (<strong>plays-transposing-instrument</strong> plr))

=&gt; NIL

;; Although the intended procedure is to list single <a href="./instruments_lsp.html#robo12">instruments</a> as once-off
;; symbols (as in the previous example), single <a href="./instruments_lsp.html#robo12">instruments</a> can also be added
;; as a one-item list
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'fl ip '(flute))))
  (doubles plr))

=&gt; NIL

;; Create a <a href="#robo298">player</a> object using a list that consists of the 'flute and
;; 'alto-sax <a href="./instrument_lsp.html#robo296">instrument</a> object definitions from the default
;; <a href="./instruments_lsp.html#robo254">+slippery-chicken-standard-instrument-palette+</a>, then apply the method to see
;; that it returns T even when only one of the <a href="./instruments_lsp.html#robo12">instruments</a> is transposing.
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'fl ip '(flute alto-sax))))
  (<strong>plays-transposing-instrument</strong> plr))

=&gt; T

;; Setting the optional argument to NIL causes <a href="./instruments_lsp.html#robo12">instruments</a> that <a href="./rthm-seq-bar_lsp.html#robo530">transpose</a> at
;; the octave to return T.
(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'db ip '<a href="./sc-map_lsp.html#robo592">double</a>-bass)))
  (<strong>plays-transposing-instrument</strong> plr))

=&gt; NIL

(let* ((ip +slippery-chicken-standard-<a href="./instrument_lsp.html#robo296">instrument</a>-<a href="./palette_lsp.html#robo426">palette</a>+)
       (plr (<a href="#robo385">make-player</a> 'db ip '<a href="./sc-map_lsp.html#robo592">double</a>-bass)))
  (<strong>plays-transposing-instrument</strong> plr nil))

=&gt; T
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>plays-transposing-instrument</strong> ((p <a href="#robo298">player</a>) 
                                         &amp;optional (ignore-octaves t) ignore)
</pre>


<a name="player2freset2dinstrument2dstats"></a>
<a name="robo389"></a><h2 class=robodoc>player/reset-instrument-stats [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo298">player</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DATE</p>
<pre> 23rd August 2013
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Reset the <a href="./slippery-chicken_lsp.html#robo862">statistics</a> slots for each <a href="./instrument_lsp.html#robo296">instrument</a> the <a href="#robo298">player</a> plays.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The <a href="#robo298">player</a> object
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - just-<a href="#robo394">total-duration</a>. If NIL update all <a href="./slippery-chicken_lsp.html#robo862">statistics</a> slots, otherwise just
   the <a href="#robo394">total-duration</a> slot of each <a href="./instrument_lsp.html#robo296">instrument</a> 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> T if the <a href="#robo298">player</a> has <a href="./instruments_lsp.html#robo12">instruments</a>, NIL if not.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>reset-instrument-stats</strong> ((p <a href="#robo298">player</a>) &amp;optional just-total-duration)
</pre>


<a name="player2ftessitura2ddegree"></a>
<a name="robo390"></a><h2 class=robodoc>player/tessitura-degree [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo298">player</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return a number that represents the <a href="./utilities_lsp.html#robo933">average</a> <a href="./pitch_lsp.html#robo297">pitch</a> for a specified
 <a href="./instrument_lsp.html#robo296">instrument</a> over the course of a <a href="./piece_lsp.html#robo58">piece</a>. The number returned will be degrees
 in the current <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A <a href="#robo298">player</a> object.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A number that is the <a href="./ensemble_lsp.html#robo168">tessitura</a>-degree; i.e., <a href="./utilities_lsp.html#robo933">average</a> <a href="./pitch_lsp.html#robo297">pitch</a> of the given
 <a href="./instrument_lsp.html#robo296">instrument</a> for the entirety of the given musical data.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((mini
       (<a href="./slippery-chicken_lsp.html#robo843">make-slippery-chicken</a>
        '+mini+
        :<a href="./ensemble_lsp.html#robo414">ensemble</a> '(((vn (violin :midi-channel 1))
                     (va (violin :midi-channel 2))
                     (vc (cello :midi-channel 3))))
        :<a href="./set-palette_lsp.html#robo316">set-palette</a> '((1 ((gs3 as3 b3 cs4 ds4 e4 fs4 gs4 as4 b4 cs5))))
        :<a href="./set-map_lsp.html#robo601">set-map</a> '((1 (1 1 1 1 1)))
        :<a href="./rthm-seq-palette_lsp.html#robo315">rthm-seq-palette</a> '((1 ((((2 4) q (e) s (32) 32))
                                :<a href="./pitch-seq-palette_lsp.html#robo314">pitch-seq-palette</a> ((1 2 3)))))
        :<a href="./rthm-seq-map_lsp.html#robo600">rthm-seq-map</a> '((1 ((vn (1 1 1 1 1))
                            (va (1 1 1 1 1))
                            (vc (1 1 1 1 1))))))))
  (<strong>tessitura-degree</strong> (<a href="./assoc-list_lsp.html#robo37">get-data</a> 'vc (<a href="./ensemble_lsp.html#robo414">ensemble</a> mini))))

=&gt; 136
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>tessitura-degree</strong> ((p <a href="#robo298">player</a>))
</pre>


<a name="player2ftessitura2dnote"></a>
<a name="robo391"></a><h2 class=robodoc>player/tessitura-note [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo298">player</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return the value of the TESSITURA-DEGREE slot of a specified <a href="#robo298">player</a> object
 as a note-name symbol.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A <a href="#robo298">player</a> object.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> - A note-name symbol.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<a href="./cm_lsp.html#robo138">in-scale</a> :chromatic)

(let ((mini
       (<a href="./slippery-chicken_lsp.html#robo843">make-slippery-chicken</a>
        '+mini+
        :<a href="./ensemble_lsp.html#robo414">ensemble</a> '(((vn (violin :midi-channel 1))
                     (va (violin :midi-channel 2))
                     (vc (cello :midi-channel 3))))
        :<a href="./set-palette_lsp.html#robo316">set-palette</a> '((1 ((gs3 as3 b3 cs4 ds4 e4 fs4 gs4 as4 b4 cs5))))
        :<a href="./set-map_lsp.html#robo601">set-map</a> '((1 (1 1 1 1 1)))
        :<a href="./rthm-seq-palette_lsp.html#robo315">rthm-seq-palette</a> '((1 ((((2 4) q (e) s (32) 32))
                                :<a href="./pitch-seq-palette_lsp.html#robo314">pitch-seq-palette</a> ((1 2 3)))))
        :<a href="./rthm-seq-map_lsp.html#robo600">rthm-seq-map</a> '((1 ((vn (1 1 1 1 1))
                            (va (1 1 1 1 1))
                            (vc (1 1 1 1 1))))))))
  (<strong>tessitura-note</strong> (first (data (<a href="./ensemble_lsp.html#robo414">ensemble</a> mini)))))

=&gt; BF3
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>tessitura-note</strong> ((p <a href="#robo298">player</a>))
</pre>


<a name="player2ftotal2dbars"></a>
<a name="robo392"></a><h2 class=robodoc>player/total-bars [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo298">player</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return the number of bars in a specified <a href="#robo298">player</a> object.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A <a href="#robo298">player</a> object.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> - An integer.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((mini
       (<a href="./slippery-chicken_lsp.html#robo843">make-slippery-chicken</a>
        '+mini+
        :<a href="./ensemble_lsp.html#robo414">ensemble</a> '(((vn (violin :midi-channel 1))
                     (va (violin :midi-channel 2))
                     (vc (cello :midi-channel 3))))
        :<a href="./set-palette_lsp.html#robo316">set-palette</a> '((1 ((gs3 as3 b3 cs4 ds4 e4 fs4 gs4 as4 b4 cs5))))
        :<a href="./set-map_lsp.html#robo601">set-map</a> '((1 (1 1 1 1 1)))
        :<a href="./rthm-seq-palette_lsp.html#robo315">rthm-seq-palette</a> '((1 ((((2 4) q (e) s (32) 32))
                                :<a href="./pitch-seq-palette_lsp.html#robo314">pitch-seq-palette</a> ((1 2 3)))))
        :<a href="./rthm-seq-map_lsp.html#robo600">rthm-seq-map</a> '((1 ((vn (1 1 1 1 1))
                            (va (1 1 1 1 1))
                            (vc (1 1 1 1 1))))))))
  (<strong>total-bars</strong> (first (data (<a href="./ensemble_lsp.html#robo414">ensemble</a> mini)))))

=&gt; 5
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>total-bars</strong> ((p <a href="#robo298">player</a>))
</pre>


<a name="player2ftotal2ddegrees"></a>
<a name="robo393"></a><h2 class=robodoc>player/total-degrees [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo298">player</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return a number that reflects the mean note (<a href="./ensemble_lsp.html#robo168">tessitura</a>) of a <a href="#robo298">player</a>'s
 part. This is calculated by incrementing the TOTAL-DEGREES slot of the
 corresponding <a href="./instrument_lsp.html#robo296">instrument</a> object for each attacked note in the <a href="#robo298">player</a>'s part
 by the degree of that note (in the <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> of the <a href="./piece_lsp.html#robo58">piece</a>), and then dividing
 the sum by the total number of notes in the <a href="#robo298">player</a>'s part.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A <a href="#robo298">player</a> object.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> - An integer.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<a href="./cm_lsp.html#robo138">in-scale</a> :chromatic)

(let ((mini
       (<a href="./slippery-chicken_lsp.html#robo843">make-slippery-chicken</a>
        '+mini+
        :<a href="./ensemble_lsp.html#robo414">ensemble</a> '(((vn (violin :midi-channel 1))
                     (va (violin :midi-channel 2))
                     (vc (cello :midi-channel 3))))
        :<a href="./set-palette_lsp.html#robo316">set-palette</a> '((1 ((gs3 as3 b3 cs4 ds4 e4 fs4 gs4 as4 b4 cs5))))
        :<a href="./set-map_lsp.html#robo601">set-map</a> '((1 (1 1 1 1 1)))
        :<a href="./rthm-seq-palette_lsp.html#robo315">rthm-seq-palette</a> '((1 ((((2 4) q (e) s (32) 32))
                                :<a href="./pitch-seq-palette_lsp.html#robo314">pitch-seq-palette</a> ((1 2 3)))))
        :<a href="./rthm-seq-map_lsp.html#robo600">rthm-seq-map</a> '((1 ((vn (1 1 1 1 1))
                            (va (1 1 1 1 1))
                            (vc (1 1 1 1 1))))))))
  (<strong>total-degrees</strong> (first (data (<a href="./ensemble_lsp.html#robo414">ensemble</a> mini)))))

=&gt; 865
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>total-degrees</strong> ((p <a href="#robo298">player</a>))
</pre>


<a name="player2ftotal2dduration"></a>
<a name="robo394"></a><h2 class=robodoc>player/total-duration [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo298">player</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the total duration of played notes for a given <a href="#robo298">player</a> over the span of
 a <a href="./piece_lsp.html#robo58">piece</a>.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A <a href="#robo298">player</a> object.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A number that is the total duration in seconds of played notes.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((mini
       (<a href="./slippery-chicken_lsp.html#robo843">make-slippery-chicken</a>
        '+mini+
        :<a href="./ensemble_lsp.html#robo414">ensemble</a> '(((vn (violin :midi-channel 1))
                     (va (violin :midi-channel 2))
                     (vc (cello :midi-channel 3))))
        :<a href="./set-palette_lsp.html#robo316">set-palette</a> '((1 ((gs3 as3 b3 cs4 ds4 e4 fs4 gs4 as4 b4 cs5))))
        :<a href="./set-map_lsp.html#robo601">set-map</a> '((1 (1 1 1 1 1)))
        :<a href="./rthm-seq-palette_lsp.html#robo315">rthm-seq-palette</a> '((1 ((((2 4) q (e) s (32) 32))
                                :<a href="./pitch-seq-palette_lsp.html#robo314">pitch-seq-palette</a> ((1 2 3))))
                            (2 ((((2 4) (q) e (s) 32 32))
                                :<a href="./pitch-seq-palette_lsp.html#robo314">pitch-seq-palette</a> ((1 2 3)))))
        :<a href="./rthm-seq-map_lsp.html#robo600">rthm-seq-map</a> '((1 ((vn (1 1 1 1 1))
                            (va (2 2 2 2 2))
                            (vc (1 2 1 2 1))))))))
  (print (<strong>total-duration</strong> (<a href="./assoc-list_lsp.html#robo37">get-data</a> 'vn (<a href="./ensemble_lsp.html#robo414">ensemble</a> mini))))
  (print (<strong>total-duration</strong> (<a href="./assoc-list_lsp.html#robo37">get-data</a> 'va (<a href="./ensemble_lsp.html#robo414">ensemble</a> mini))))
  (print (<strong>total-duration</strong> (<a href="./assoc-list_lsp.html#robo37">get-data</a> 'vc (<a href="./ensemble_lsp.html#robo414">ensemble</a> mini)))))

=&gt;
6.875 
3.75 
5.625
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>total-duration</strong> ((p <a href="#robo298">player</a>))
</pre>


<a name="player2ftotal2dnotes"></a>
<a name="robo395"></a><h2 class=robodoc>player/total-notes [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo298">player</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the total number of notes (actually events) played by a specified
 <a href="#robo298">player</a> (not rests or tied notes, but midi-notes) in the <a href="./piece_lsp.html#robo58">piece</a> which this
 <a href="./instrument_lsp.html#robo296">instrument</a> plays. A <a href="./chord_lsp.html#robo634">chord</a> counts as 1 note/<a href="./event_lsp.html#robo449">event</a>.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A <a href="#robo298">player</a> object.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> - An integer that is the number of notes for that <a href="#robo298">player</a>.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((mini
       (<a href="./slippery-chicken_lsp.html#robo843">make-slippery-chicken</a>
        '+mini+
        :<a href="./ensemble_lsp.html#robo414">ensemble</a> '(((vn (violin :midi-channel 1))
                     (va (violin :midi-channel 2))
                     (vc (cello :midi-channel 3))))
        :<a href="./set-palette_lsp.html#robo316">set-palette</a> '((1 ((gs3 as3 b3 cs4 ds4 e4 fs4 gs4 as4 b4 cs5))))
        :<a href="./set-map_lsp.html#robo601">set-map</a> '((1 (1 1 1 1 1)))
        :<a href="./rthm-seq-palette_lsp.html#robo315">rthm-seq-palette</a> '((1 ((((2 4) q (e) s (32) 32))
                                :<a href="./pitch-seq-palette_lsp.html#robo314">pitch-seq-palette</a> ((1 2 3)))))
        :<a href="./rthm-seq-map_lsp.html#robo600">rthm-seq-map</a> '((1 ((vn (1 1 1 1 1))
                            (va (1 1 1 1 1))
                            (vc (1 1 1 1 1))))))))
  (print (<strong>total-notes</strong> (<a href="./assoc-list_lsp.html#robo37">get-data</a> 'vc (<a href="./ensemble_lsp.html#robo414">ensemble</a> mini)))))

=&gt; 15
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>total-notes</strong> ((p <a href="#robo298">player</a>))
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./../../src/player.lsp with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.44 on 2025-11-13 11:26:17</p>
</div> <!-- footer -->
</body>
</html>
