<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<script src="./robodoc.js"></script>
<title>sndfile-palette.lsp</title>
<!-- Source: ./../../src/sndfile-palette.lsp -->
<!-- Generated with ROBODoc Version 4.99.44 (Oct 31 2021) -->
</head>
<script type=text/javascript src=../head-foot.js></script>
<body>
<div id="content">
<script type="text/javascript">header("../");</script>

<div id="logo">
<a name="robo_top_of_doc"></a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./roboindex.html#top">Index</a>
<a class="menuitem" href="./robo_parameters.html#top">Global Parameters</a>
<a class="menuitem" href="./robo_classes.html#top">Classes</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_modules.html#top">Modules</a>
<a class="menuitem" href="./robo_methods.html#top">Methods</a>
</div> <!-- navigation -->


<a name="palette2fsndfile2dpalette"></a>
<a name="robo315"></a><h2 class=robodoc>palette/sndfile-palette [ Classes ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./palette_lsp.html#robo424">palette</a> ] [ <a href="./robo_classes.html#robo_top_of_doc">Classes</a> ]</p>
<p class="item_name">NAME</p>
<pre> <strong>sndfile-palette</strong>

 File:             <a href="#robo_top_of_doc">sndfile-palette.lsp</a>

 Class Hierarchy:  <a href="./named-object_lsp.html#robo628">named-object</a> -&gt; <a href="./linked-named-object_lsp.html#robo309">linked-named-object</a> -&gt; <a href="./sclist_lsp.html#robo298">sclist</a> -&gt; 
                   <a href="./circular-sclist_lsp.html#robo632">circular-sclist</a> -&gt; <a href="./assoc-list_lsp.html#robo113">assoc-list</a> -&gt; <a href="./recursive-assoc-list_lsp.html#robo47">recursive-assoc-list</a> -&gt;
                   <a href="./palette_lsp.html#robo424">palette</a> -&gt; <strong>sndfile-palette</strong>

 Version:          1.1.0

 Project:          slippery chicken (algorithmic composition)

 Purpose:          Implementation of the <strong>sndfile-palette</strong> class, which is a
                   simple <a href="./palette_lsp.html#robo424">palette</a> that checks that all the sound files given
                   in a list for each id exist.  See comments in methods for
                   limitations and special features of this class.

 Author:           Michael Edwards: m@michael-edwards.org

 Creation date:    18th March 2001

 $$ Last modified:  17:10:00 Sat Jun 29 2024 CEST

 SVN ID: $Id$
</pre>


<a name="sndfile2dpalette2ffind2dsndfile"></a>
<a name="robo869"></a><h2 class=robodoc>sndfile-palette/find-sndfile [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo315">sndfile-palette</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return the full directory path and file name of a specified sound file,
 from within the directories given in the PATHS slot.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A <a href="#robo315">sndfile-palette</a> object.
 - The name of a sound file from within that object. This can be a string or
   a symbol. Unless it is given as a string, it will be handled as a symbol
   and will be converted to lowercase. Inclusion of the file extension is
   optional. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns the full directory path and file name of the specified sound file
 as a string.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((msfp (<a href="#robo874">make-sfp</a> 'sfp-test 
                      '((<a href="./sndfile_lsp.html#robo299">sndfile</a>-group-1
                         (test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-1))
                        (<a href="./sndfile_lsp.html#robo299">sndfile</a>-group-2
                         (test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-2 test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-3 
                          (test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-4 :frequency 261.61)))
                        (<a href="./sndfile_lsp.html#robo299">sndfile</a>-group-3
                         ((test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-5 :start 0.006 :end 0.182) 
                          test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-6)))
                      :paths
                      '("/path/to/sndfiles-dir-1"
                        "/path/to/sndfiles-dir-2"))))
 (<strong>find-sndfile</strong> msfp 'test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-4))

=&gt; "/path/to/sndfiles-dir-2/test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-4.aiff"
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>find-sndfile</strong> ((sfp <a href="./sndfile_lsp.html#robo299">sndfile</a>-<a href="./palette_lsp.html#robo424">palette</a>) <a href="./sndfile_lsp.html#robo299">sndfile</a>)
</pre>


<a name="sndfile2dpalette2fget2dnearest"></a>
<a name="robo870"></a><h2 class=robodoc>sndfile-palette/get-nearest [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo315">sndfile-palette</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the <a href="./sndfile_lsp.html#robo299">sndfile</a> whose frequency slot is <a href="./utilities_lsp.html#robo972">nearest</a> to the first argument.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the frequency we're looking for, in Hertz (a number)
 - the <a href="#robo315">sndfile-palette</a> object we'll search
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - the IDs of the <a href="./sndfile_lsp.html#robo299">sndfile</a> groups we'll search. Either a list of ids or a
 single id. If NIL then all groups will be searched. Default = NIL.
 - if more than one <a href="./sndfile_lsp.html#robo299">sndfile</a> is very close in frequency, select one at random
 (see also the <a href="#robo871">get-nearest-by-freq</a> function)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> the <a href="./utilities_lsp.html#robo972">nearest</a> <a href="./sndfile_lsp.html#robo299">sndfile</a> object
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>get-nearest</strong> (freq (sfp <a href="./sndfile_lsp.html#robo299">sndfile</a>-<a href="./palette_lsp.html#robo424">palette</a>) &amp;optional ids random)
</pre>


<a name="sndfile2dpalette2fget2dnearest2dby2dfreq"></a>
<a name="robo871"></a><h2 class=robodoc>sndfile-palette/get-nearest-by-freq [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo315">sndfile-palette</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> October 1st 2015, Edinburgh
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Given a frequency and a list of <a href="./sndfile_lsp.html#robo299">sndfile</a> objects, return the <a href="./sndfile_lsp.html#robo299">sndfile</a> from
 the list whose frequency is closest to the first argument.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - a frequency in Hertz (number)
 - a simple list of <a href="./sndfile_lsp.html#robo299">sndfile</a> objects, such as that contained in the data slot
  of a <a href="#robo315">sndfile-palette</a> group.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - T or NIL to indicate whether a random file should be chosen when there are
   several sndfiles with the same frequency. (NB the function <a href="./permutations_lsp.html#robo325">random-rep</a> will
   be used so if you wanted repeatable results call (<a href="./permutations_lsp.html#robo325">random-rep</a> 1 t) in order
   to <a href="./circular-sclist_lsp.html#robo122">reset</a> the random seed before calling <a href="./slippery-chicken_lsp.html#robo792">clm-play</a> or whatever context uses
   this function.) Default = NIL.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> the <a href="./utilities_lsp.html#robo972">nearest</a> <a href="./sndfile_lsp.html#robo299">sndfile</a> object
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>get-nearest-by-freq</strong> (freq sflist &amp;optional random)
</pre>


<a name="sndfile2dpalette2fget2dsndfiles"></a>
<a name="robo872"></a><h2 class=robodoc>sndfile-palette/get-sndfiles [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo315">sndfile-palette</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 5th September 2015, Edinburgh
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Return a list of the full paths of sound files in the given path. Files
 without the extensions aif, wav, aiff, and snd are ignored.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The full path to the folder where the sound files are, as a string
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - a list of folders to skip i.e. just the last folder name, not the
   complete path
 - A single pattern (string) or list of patterns that the sound
   file name must have--just the filename, excluding path/folders and
   extension. If a list then all patterns must be in the file name, not
   just one of them, unless (hack alert!) the first element of the list is
   the symbol or, in which case only one of the patterns must be
   present. Default = NIL.  
 - Sim. to :insist except this/these are patterns none of which can
   be in the file name. Default = NIL.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of full paths as strings.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>get-sndfiles</strong> "/music/hyperboles/snd/cello/samples/"
              '("short-percussive" "weird"))
--&gt;
("/music/hyperboles/snd/cello/samples/1/g4-III-4-001.aif"
 "/music/hyperboles/snd/cello/samples/1/g4-III-4-002.aif"
 "/music/hyperboles/snd/cello/samples/1/g4-III-4-003.aif"
 "/music/hyperboles/snd/cello/samples/1/g4-III-4-004.aif"
 "/music/hyperboles/snd/cello/samples/10/cs5-I-5-9-13-4-001.aif"
 ... 
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>get-sndfiles</strong> (folder &amp;optional skip insist resist force-quotes)
</pre>


<a name="sndfile2dpalette2fkontakt2dto2dsfp"></a>
<a name="robo873"></a><h2 class=robodoc>sndfile-palette/kontakt-to-sfp [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo315">sndfile-palette</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> October 2nd 2015, Edinburgh
 
 DESCRIPTION This function is only available on Mac OSX 64bit Intel machines
 and requires the nki executable which since version 1.0.6 comes with
 <a href="./slippery-chicken_lsp.html#robo629">slippery-chicken</a> (in the bin directory).
 
 Using the public-domain C programme "nki tool" from the Linux Sampler
 project (<a href="http://www.linuxsampler.org/nkitool/),">http://www.linuxsampler.org/nkitool/),</a> convert a Kontakt .nki
 sampler file to a <a href="#robo315">sndfile-palette</a> object. This will only include the sound
 file and the MIDI note number it is mapped to, but it will mean that the
 <a href="./sndfile_lsp.html#robo299">sndfile</a> objects in the <a href="./palette_lsp.html#robo424">palette</a> include the correct frequency. So using such
 a <a href="#robo315">sndfile-palette</a> makes it possible to have <a href="./slippery-chicken_lsp.html#robo792">clm-play</a> act as a traditional
 sampler, though of course much more is possible too.

 The nki file could of course map more than one sample to any MIDI note
 (e.g. for handling different velocities). By default all of these could be
 included in the <a href="#robo315">sndfile-palette</a>, and the :snd-selector function passed to
 <a href="./slippery-chicken_lsp.html#robo792">clm-play</a> could select the correct file based on velocity, for
 instance. However, you may want to <a href="./rthm-seq_lsp.html#robo558">filter</a> out some sound files. This is
 where the :insist and :resist keyword arguments come in handy (see below).

 NB If you get the error message "zpipe: invalid or incomplete deflate data"
 then it's probably because the nki file is in Kontakt 4.2.2 (or higher)
 format so can't be converted with this tool. You could try "save as" in
 Kontakt 3 or 4 and rerunning this function, as those older programmes will
 probably save in the older format (worked for me at least once).
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the path to the .nki file to process
 - the path to the samples i.e. the sound files which the nki file uses
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> Keyword arguments:
 :insist
 - :insist. A single pattern (string) or list of patterns that the sound
   file name must have--just the filename, excluding path/folders and
   extension. If a list then all patterns must be in the file name, not
   just one of them. Default = NIL i.e. accept all.
 - :resist. Sim. to :insist except this/these are patterns none of which can
   be in the file name. Default = NIL.
 - :group. The group ID that will be assigned to the sound files. Default =
   NIL whereby the name of the nki file will be used.
 - :converter. The path to the nki tool executable. Default =
   /path/to/slippery-chicken/bin/nki 
</pre>
<p class="item_name">RETURN VALUE</p>
<p class="item_name">EXAMPLE</p>
<p class="item_name">SYNOPSIS</p>
<pre class="source">#+(and mac-osx X86-64)
(defun <strong>kontakt-to-sfp</strong> (nki samples-path
                       &amp;key insist resist group
                         (converter
                          (concatenate 'string
                                       cl-user::+slippery-chicken-home-dir+
                                       "bin/nki")))
</pre>


<a name="sndfile2dpalette2fmake2dsfp"></a>
<a name="robo874"></a><h2 class=robodoc>sndfile-palette/make-sfp [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo315">sndfile-palette</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Make a <a href="#robo315">sndfile-palette</a> object. This object is a simple <a href="./palette_lsp.html#robo424">palette</a> which checks
 to make sure that all of the sound files in a given list exist for each
 given ID.

 Sound files are given as as single names, without the path and without the
 extension. These can be given using the optional keyword arguments &lt;paths&gt;
 and &lt;extensions&gt;.

 NB Although this class is a <a href="./palette_lsp.html#robo424">palette</a> and therefore a subclass of
 <a href="./recursive-assoc-list_lsp.html#robo47">recursive-assoc-list</a>, the sound lists in this case cannot be nested beyond
 a depth of two (as in example below).  
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An ID for the <a href="./palette_lsp.html#robo424">palette</a>.
 - A list of lists that contains IDs for the names of one or more groups of
   sound files, each paired with a list of one or more names of existing
   sound files. The sound file names themselves can be paired with keywords
   from the <a href="./sndfile_lsp.html#robo299">sndfile</a> class, such as :start, :end, and :frequency, to define
   and describe segments of a given sound file.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :paths. A list of one or more paths to where the sound files are located.
 - :extensions. A list of one or more sound file extensions for the
   specified sound files. The default initialization for this slot of the
   <a href="#robo315">sndfile-palette</a> already contains ("wav" "aiff" "aif" "snd"), so this
   argument can often be left unspecified.
 - :auto-freq. whether to do automatic frequency detection on the sound
   files. T would mean using a <a href="./pitch_lsp.html#robo295">pitch</a> detection routine, or a function can
   also be passed, whereupon it will be called with the path slot as
   argument (the idea is that the fundamental can be extracted from the file
   name). Default = NIL.
 - :warn-not-found. T or NIL to indicate whether a warning should be printed
   to the Lisp listener if the specified sound file cannot be found. 
   T = print warning. Default = T.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns NIL.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((msfp (<strong>make-sfp</strong> 'sfp-test 
                      '((<a href="./sndfile_lsp.html#robo299">sndfile</a>-group-1
                         (test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-1))
                        (<a href="./sndfile_lsp.html#robo299">sndfile</a>-group-2
                         (test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-2 test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-3 
                          (test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-4 :frequency 261.61)))
                        (<a href="./sndfile_lsp.html#robo299">sndfile</a>-group-3
                         ((test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-5 :start 0.006 :end 0.182) 
                          test-<a href="./sndfile_lsp.html#robo299">sndfile</a>-6)))
                      :paths '("/path/to/sound-files-dir-1/"
                               "/path/to/sound-files-dir-2/")))))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>make-sfp</strong> (id sfp &amp;key paths (extensions '("wav" "aiff" "aif" "snd"))
                          auto-freq (warn-not-found t))
</pre>


<a name="sndfile2dpalette2fmake2dsfp2dfrom2dfolder"></a>
<a name="robo875"></a><h2 class=robodoc>sndfile-palette/make-sfp-from-folder [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo315">sndfile-palette</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 5th September 2015, Edinburgh
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Makes a <a href="#robo315">sndfile-palette</a> object from the sound files found in a specific
 folder (directory) on the file system. Allows any arbitrary levels of
 subfolders with the proviso that they'll be converted to a flat list, using
 the subfolders as tags (e.g. dir/subdir1/subdir2 becomes
 dir-subdir1-subdir2).

 The folders can contain other files (they'll be ignored). Sound files are
 those with extensions .aif .wav .aiff and .snd
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the folder path, as a string.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :skip. a list of folders to skip i.e. just the last folder name, not the
   complete path. Default = NIL.
 - :auto-freq. whether to do automatic frequency detection on the sound
   files. Default = NIL.
 - :insist. A single pattern (string) or list of patterns that the sound
   file name must have--just the filename, excluding path/folders and
   extension. If a list then all patterns must be in the file name, not
   just one of them. Default = NIL.
 - :resist. Sim. to :insist except this/these are patterns none of which can
   be in the file name. Default = NIL.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a <a href="#robo315">sndfile-palette</a> object
</pre>
<p class="item_name">SYNOPSIS</p>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>make-sfp-from-folder</strong> "/music/hyperboles/snd/cello/samples/"
                      :skip '("short-percussive" "weird"))
--&gt;
SNDFILE-PALETTE: paths: NIL
                 extensions: (wav aiff aif snd)
                 num-snds: 92
PALETTE: 
RECURSIVE-ASSOC-LIST: recurse-simple-data: T
                      num-data: 16
                      linked: T
                      full-ref: NIL
ASSOC-LIST: warn-not-found T
CIRCULAR-SCLIST: current 0
SCLIST: <a href="./sclist_lsp.html#robo298">sclist</a>-length: 16, bounds-alert: T, copy: T
LINKED-NAMED-OBJECT: previous: NIL, this: NIL, next: NIL
NAMED-OBJECT: id: AUTO, tag: NIL, 
data: (
LINKED-NAMED-OBJECT: previous: NIL, this: (1), next: (10)
NAMED-OBJECT: id: 1, tag: NIL, 
data: (

SNDFILE-EXT: use: T, cue-num: 2, <a href="./pitch_lsp.html#robo295">pitch</a>: -1, <a href="./pitch_lsp.html#robo295">pitch</a>-curve: -1, bandwidth: -1, 
             bandwidth-curve: -1, continuity: -1, continuity-curve: -1, 
             weight: -1, weight-curve: -1, energy: -1, energy-curve: -1, 
             harmonicity: -1, harmonicity-curve: -1, volume: -1, 
             volume-curve: -1, loop-it: NIL, bit-depth: 24, srate: 96000, 
             num-frames: 1719753, bytes: 5159314, group-id: (1)
             followers: NIL

SNDFILE: path: /music/hyperboles/snd/cello/samples/1/g4-III-4-004.aif, 
         snd-duration: 17.914093, channels: 1, frequency: 150.24414
         start: 0.0, end: 17.914093, amplitude: 1.0, duration 17.914093
         will-be-used: 0, has-been-used: 0
         data-consistent: T
...
|#
(defun <strong>make-sfp-from-folder</strong> (folder &amp;key skip auto-freq insist resist
                                         (default-group 'default-group))
</pre>


<a name="sndfile2dpalette2fmake2dsfp2dfrom2dgroups2din2dwavelab2dmarker2dfile"></a>
<a name="robo876"></a><h2 class=robodoc>sndfile-palette/make-sfp-from-groups-in-wavelab-marker-file [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo315">sndfile-palette</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Automatically <a href="./wolfram_lsp.html#robo1029">generate</a> a <a href="#robo315">sndfile-palette</a> object using the specified sound
 file from grouping defined in the specified wavelab marker file.

 The &lt;marker-file&gt; argument can be passed as a list of marker files, in
 which case these will first be concatenated.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string that is the name of the marker file, including the directory
   path and extension.
 - A string that is the name of the sound file. This can either be a full
   directory path, file name, and extension, or just a base file name. If
   the latter, values for the optional arguments :paths and :extensions must
   also be specified.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - :paths. NIL or a list of strings that are the directory paths to the
   specified sound files. If the sound file is passed with the directory
   path, this must be set to NIL. NB: The paths given here apply only to the
   sound files, not to the marker files. Default = NIL.
 - :extensions. A list of strings that are the extensions to the given sound
   files. If the sound files are passed with their extensions, this must be
   set to NIL. Default = NIL.
 - :warn-not-found. T or NIL to indicate whether to print a warning to the
   listener if the specified sound file is not found. T = print a
   warning. Default = NIL.
 - :sampling-rate. An integer that is the sampling rate of the specified
   sound file. Changing this value will alter the start-times determined for
   each sound segment. Default = 44100.
 - :print. T or NIL to indicate whether feedback about the groups found and
   created should be printed to the listener. T = print. Default = T.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns NIL.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>make-sfp-from-groups-in-wavelab-marker-file</strong> 
 "/path/to/24-7.mrk"
 "24-7"
 :paths '("/path/to/<a href="./sndfile_lsp.html#robo299">sndfile</a>/directory/")
 :sampling-rate 44100
 :extensions '("wav"))

=&gt;
24 markers read from /path/to/24-7.mrk
Adding tapping: 2.753 -&gt; 4.827
Adding tapping: 5.097 -&gt; 6.581
Adding tapping: 6.763 -&gt; 8.538
Adding splinter: 13.878 -&gt; 15.993
Adding tapping: 16.338 -&gt; 18.261
Adding splinter: 19.403 -&gt; 25.655

tapping: 4 sounds
splinter: 2 sounds
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>make-sfp-from-groups-in-wavelab-marker-file</strong> (marker-file <a href="./sndfile_lsp.html#robo299">sndfile</a> 
                                                    &amp;key
                                                    paths
                                                    extensions
                                                    warn-not-found
                                                    (sampling-rate 44100)
                                                    (print t))
</pre>


<a name="sndfile2dpalette2fmake2dsfp2dfrom2dreaper2dmarkers"></a>
<a name="robo877"></a><h2 class=robodoc>sndfile-palette/make-sfp-from-reaper-markers [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo315">sndfile-palette</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> July 2nd 2021
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Create a <a href="#robo315">sndfile-palette</a> object by reading a <a href="./reaper_lsp.html#robo643">reaper-file</a> with
 specially-named markers. This is specifically aimed at the situation where
 you want to use one longer sound file in many segments, rather than lots of
 different sound files. We search the reaper file for all markers whose names
 begin with <a href="./slippery-chicken_lsp.html#robo792">clm-play</a>. A marker which begins a sound file segment will then
 include the group name after a after a further hyphen e.g. the marker will
 be named clm-play-perc or clm-play-string-attack (in these cases the
 <a href="#robo315">sndfile-palette</a> will contain groups named perc and string-attack. A marker
 with the name <a href="./slippery-chicken_lsp.html#robo792">clm-play</a> will indicate the end of a <a href="./sndfile_lsp.html#robo299">sndfile</a> segment, and is
 required. All other markers in the reaper file will be ignored.

 (N.B. In all, this is a little different from the funtion which creates
 <a href="./sndfile_lsp.html#robo299">sndfile</a>-palettes from wavelap-marker files but that is a different situation
 (marker files, not wavelab files in general, as here with reaper files) and
 had a slightly different goal at the time, creating groups in bundles rather
 than in names. So we're not reproducing functionality here with reaper files
 rather we're providing a slightly different functionality which sorts
 current needs quite a few years on.)
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the path to the reaper file (string)
 - the path to the sound file. This must be provided as the reaper file could
   have marks at any point where there are several sound files
   playing. (string)
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - the default frequency of the sound files: either a <a href="./pitch_lsp.html#robo295">pitch</a> symbol, a
   frequency in Hertz, 'detect for autocorrelation <a href="./pitch_lsp.html#robo295">pitch</a> detection, or a
   function to be called to e.g. extract the <a href="./pitch_lsp.html#robo295">pitch</a> from the file name or use
   another <a href="./pitch_lsp.html#robo295">pitch</a> detection method. Default = 'C4 (<a href="./utilities_lsp.html#robo967">middle</a> C)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a <a href="#robo315">sndfile-palette</a> object with appropriate groups as read from the reaper
 file. 
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>make-sfp-from-reaper-markers</strong> (<a href="./reaper_lsp.html#robo643">reaper-file</a> sound-file &amp;optional
                                                              (auto-freq 'c4))
</pre>


<a name="sndfile2dpalette2fmake2dsfp2dfrom2dwavelab2dmarker2dfile"></a>
<a name="robo878"></a><h2 class=robodoc>sndfile-palette/make-sfp-from-wavelab-marker-file [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo315">sndfile-palette</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Automatically create a <a href="#robo315">sndfile-palette</a> object from the specified wavelab
 marker file and the specified sound file (from which the marker file must
 have been generated).

 The function will produce a <a href="#robo315">sndfile-palette</a> object with multiple groups,
 each of which consists of the number of sound file segments specified using
 the :snds-per-group argument (defaults to 8). By default the segments will
 be collected into the groups in chronological order. If the optional
 :random-every argument is given a value, every nth group will consist of
 random segments instead.

 The sound file segments of each group will correspond to the time points
 stored in the marker file. 

 The &lt;marker-file&gt; argument can consist of a list of marker files, in which
 case these would first be concatenated. 

 NB: Be aware that marker files created on operating systems differing from
     the one on which this function is called might trigger errors due to
     newline character mismatches.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string that is the name of the marker file, including the directory
   path and extension.
 - A string that is the name of the sound file. This can either be a full
   directory path, file name, and extension, or just a base file name. If
   the latter, values for the optional arguments :paths and :extensions must
   also be specified.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :snds-per-group. An integer that is the number of sound file segments to
   include in each group. Default = 8.
 - :random-every. An integer to indicate that every nth group is to consist
   of random (rather than chronologically consecutive) sound file segments.
   Default = 999999 (i.e. essentially never) 
 - :paths. NIL or a list of strings that are the directory paths to the
   specified sound files. If the sound file is passed with the directory
   path, this must be set to NIL. NB: The paths given here apply only to the
   sound files, not to the marker files. Default = NIL.
 - :sampling-rate. An integer that is the sampling rate of the specified
   sound file. Changing this value will alter the start-times determined for
   each sound segment. Default = 44100.
 - :extensions. A list of strings that are the extensions to the given sound
   files. If the sound files are passed with their extensions, this must be
   set to NIL. Default = NIL.
 - :warn-not-found. T or NIL to indicate whether to print a warning to the
   listener if the specified sound file is not found. T = print a
   warning. Default = NIL.
 - :name. The name for the overall <a href="#robo315">sndfile-palette</a> and the base name for
    each group within (these will have a suffix that is an auto-incrementing
    number e.g. 'auto would become 'auto1 'auto2 etc.).  Default = 'auto.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A <a href="#robo315">sndfile-palette</a> object.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>make-sfp-from-wavelab-marker-file</strong> 
  "/path/to/24-7.mrk"
 "24-7"
 :snds-per-group 2
 :random-every 3
 :paths '("/path/to/sound-file/directory/")
 :sampling-rate 44100
 :extensions '("wav"))

=&gt;
SNDFILE-PALETTE: paths: (/Volumes/JIMMY/SlipperyChicken/sc/test-suite/)
                 extensions: (wav)
PALETTE: 
RECURSIVE-ASSOC-LIST: recurse-simple-data: T
                      num-data: 8
                      linked: NIL
                      full-ref: NIL
ASSOC-LIST: warn-not-found NIL
CIRCULAR-SCLIST: current 0
SCLIST: <a href="./sclist_lsp.html#robo298">sclist</a>-length: 8, bounds-alert: T, copy: T
LINKED-NAMED-OBJECT: previous: NIL, this: NIL, next: NIL
NAMED-OBJECT: id: AUTO, tag: NIL, 
data: (
NAMED-OBJECT: id: "auto1", tag: NIL, 
data: (

SNDFILE: path: /Volumes/JIMMY/SlipperyChicken/sc/test-suite/24-7.wav, 
         snd-duration: 29.652811, channels: 2, frequency: 261.62555
         start: 0.09142857, end: 1.0361905, amplitude: 1.0, duration 0.94476193
         will-be-used: 0, has-been-used: 0
         data-consistent: T
LINKED-NAMED-OBJECT: previous: NIL, this: NIL, next: NIL
NAMED-OBJECT: id: "24-7", tag: NIL, 
data: /Volumes/JIMMY/SlipperyChicken/sc/test-suite/24-7.wav
[...]
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>make-sfp-from-wavelab-marker-file</strong> (marker-file <a href="./sndfile_lsp.html#robo299">sndfile</a> 
                                          &amp;key
                                          (snds-per-group 8)
                                          (random-every 999999) ;; i.e. never
                                          paths
                                          (sampling-rate 44100)
                                          extensions
                                          ;; MDE Fri Oct  5 14:04:08 2012 
                                          (name 'auto)
                                          warn-not-found)
</pre>


<a name="sndfile2dpalette2fset2dfrequency2dfrom2dfilename"></a>
<a name="robo879"></a><h2 class=robodoc>sndfile-palette/set-frequency-from-filename [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo315">sndfile-palette</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DATE</p>
<pre> October 1st 2015, Edinburgh
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Set the frequency slot of every sound file object in the palate to a value
 extracted from the file name. This is intended but of course not restricted
 to palettes created from sample libraries, where, as is often the case, the
 file name of each sample contains the <a href="./pitch_lsp.html#robo295">pitch</a> of the file. For example, from
 the Akoustik Piano sample library we have the file
 Stein-R(A1)-V(220)-dB(2446)-T(MF)-M(123)-P(404-03-01).wav. In this case the
 A1 in the first parentheses indicate the <a href="./pitch_lsp.html#robo295">pitch</a>. By writing and passing a
 short parsing function to read the <a href="./pitch_lsp.html#robo295">pitch</a> out of such a file name we can
 easily process each sound file in the <a href="./palette_lsp.html#robo424">palette</a>. See akoustik-piano-name
 below for an example of how to process such file names.

 See also <a href="#robo875">make-sfp-from-folder</a>.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The sound file <a href="./palette_lsp.html#robo424">palette</a> object
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> Keyword arguments:
 - :groups. A single group or list of groups (IDs) for the sound files we
   wish to process.
 - :name-fun.The function for processing a single name. Of course the names
   must be consistent and each sound file must be able to be processed by
   this single function. NB for reasons of similar usage in <a href="./spectra_lsp.html#robo897">get-spectra-al</a>
   (see <a href="./spectra_lsp.html#robo_top_of_doc">spectra.lsp</a>) this function actually must return the MIDI note number
   (may be a floating point for <a href="./event_lsp.html#robo209">microtonal</a> applications), which is then
   converted by the <a href="./sndfile_lsp.html#robo299">sndfile</a> class to a frequency in Hertz.
 - :on-error. The function to be called when the name function cannot
   determine the frequency of the sound file. This could be #'error (the
   default), #'warn, or nil if nothing is to be done on failure.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The <a href="#robo315">sndfile-palette</a> object after processing.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>set-frequency-from-filename</strong>
    ((sfp <a href="./sndfile_lsp.html#robo299">sndfile</a>-<a href="./palette_lsp.html#robo424">palette</a>)
     &amp;key groups (name-fun #'akoustik-piano-name) (on-error #'error))
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./../../src/sndfile-palette.lsp with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.44 on 2025-02-13 09:01:45</p>
</div> <!-- footer -->
</body>
</html>
