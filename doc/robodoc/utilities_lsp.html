<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<script src="./robodoc.js"></script>
<title>utilities.lsp</title>
<!-- Source: ./../../src/utilities.lsp -->
<!-- Generated with ROBODoc Version 4.99.44 (Oct 31 2021) -->
</head>
<script type=text/javascript src=../head-foot.js></script>
<body>
<div id="content">
<script type="text/javascript">header("../");</script>

<div id="logo">
<a name="robo_top_of_doc"></a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./roboindex.html#top">Index</a>
<a class="menuitem" href="./robo_parameters.html#top">Global Parameters</a>
<a class="menuitem" href="./robo_classes.html#top">Classes</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_modules.html#top">Modules</a>
<a class="menuitem" href="./robo_methods.html#top">Methods</a>
</div> <!-- navigation -->


<a name="sc2futilities"></a>
<a name="robo21"></a><h2 class=robodoc>sc/utilities [ Modules ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_modules.html#robo_top_of_doc">Modules</a> ]</p>
<p class="item_name">NAME</p>
<pre> <strong>utilities</strong>

 File:             <a href="#robo_top_of_doc">utilities.lsp</a>

 Class Hierarchy:  none: no classes defined

 Version:          1.1.0

 Project:          slippery chicken (algorithmic composition)

 Purpose:          Various helper functions of a general nature.

 Author:           Michael Edwards: m@michael-edwards.org

 Creation date:    June 24th 2002

 $$ Last modified:  16:59:54 Tue Oct 14 2025 CEST
</pre>


<a name="utilities2fa2dweighting"></a>
<a name="robo925"></a><h2 class=robodoc>utilities/a-weighting [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Implementation of A-weighting loudness compensation.  Formula taken from
 <a href="http://en.wikipedia.org/wiki/A-weighting">http://en.wikipedia.org/wiki/A-weighting</a>.  This doesn't take 1000Hz
 loudness into account, rather it implements the 40-phon Fletcher-Munson
 curve only.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The frequency in Hertz for which to find the loudness weighting.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword aguments:
 - :expt. A power (exponent) to raise the result to in order to
    tame/exaggerate the curve (make the db weightings less/more
    extreme). This only really makes sense if :linear t though will work
    with db values also of course.  Values &lt; 1 result in linear values
    closer to 1 (less extreme).  Values &gt; 1 are further from 1. Default = NIL
    i.e. no exponential function.
 - :linear.  If T return amplitude values as linear scalers rather than
    logarithmic decibel values.  NB If this is NIL then returned values are
    likely to be negative (db) values.  Default = T.  
 - :<a href="./rthm-seq-palette_lsp.html#robo546">invert</a>.  As the weighting routine tries to tell us what relative
    loudness we'll perceive given constant amplitudes, low and high
    frequencies will return negative values as we perceive them Xdb less
    than our most sensitive frequency area.  If :<a href="./rthm-seq-palette_lsp.html#robo546">invert</a> t, just flip this
    negatives to positives so that if :linear T you get a scaler to make
    lower/higher frequences equally loud as the most sensitive frequencies.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The linear or db weighting value for the given frequency.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Decibels:
(<strong>a-weighting</strong> 50 :<a href="./rthm-seq-palette_lsp.html#robo546">invert</a> nil :linear nil) =&gt; -30.274979
(<strong>a-weighting</strong> 50 :<a href="./rthm-seq-palette_lsp.html#robo546">invert</a> t :linear nil) =&gt; 30.274979
;;; Linear amplitude scalers:
(<strong>a-weighting</strong> 50) =&gt; 32.639904
(<strong>a-weighting</strong> 50 :<a href="./rthm-seq-palette_lsp.html#robo546">invert</a> nil) =&gt; 0.030637344
;;; Exaggeration:
(<strong>a-weighting</strong> 50 :expt 1.1) =&gt; 46.251286
;;; Smoothing:
(<strong>a-weighting</strong> 50 :expt .5) =&gt; 5.7131343

;;; Looping through the MIDI note range by tritones returning decibel values:
(loop for midi from 0 to 127 by 6
     for freq = (<a href="./cm_lsp.html#robo143">midi-to-freq</a> midi)
     collect (list (<a href="./cm_lsp.html#robo144">midi-to-note</a> midi)
                   (<strong>a-weighting</strong> freq :linear nil :<a href="./rthm-seq-palette_lsp.html#robo546">invert</a> nil)))
=&gt;
((C-1 -76.85258) (FS-1 -65.94491) (C0 -55.819363) (FS0 -46.71565)
 (C1 -38.714867) (FS1 -31.724197) (C2 -25.598646) (FS2 -20.247103)
 (C3 -15.622625) (FS3 -11.657975) (C4 -8.258142) (FS4 -5.358156)
 (C5 -2.9644737) (FS5 -1.1277018) (C6 0.13445985) (FS6 0.8842882) (C7 1.226917)
 (FS7 1.2351798) (C8 0.89729404) (FS8 0.09495151) (C9 -1.3861179)
 (FS9 -3.7814288))

;;; Similar but returning linear amplitude scalers:
(loop for midi from 0 to 127 by 6
     for freq = (<a href="./cm_lsp.html#robo143">midi-to-freq</a> midi)
     collect (list (<a href="./cm_lsp.html#robo144">midi-to-note</a> midi) (<strong>a-weighting</strong> freq)))
=&gt;
((C-1 6960.316) (FS-1 1982.6475) (C0 617.9711) (FS0 216.6619) (C1 86.246864)
 (FS1 38.56647) (C2 19.051636) (FS2 10.288571) (C3 6.041312) (FS3 3.827355)
 (C4 2.5876594) (FS4 1.8531382) (C5 1.4067719) (FS5 1.1386365) (C6 0.9846389)
 (FS6 0.9032034) (C7 0.8682687) (FS7 0.86744314) (C8 0.9018521) (FS8 0.9891278)
 (C9 1.1730213) (FS9 1.5455086))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>a-weighting</strong> (f &amp;key expt (linear t) (<a href="./rthm-seq-palette_lsp.html#robo546">invert</a> t))
</pre>


<a name="utilities2fagnostic2ddirectory2dpathname"></a>
<a name="robo926"></a><h2 class=robodoc>utilities/agnostic-directory-pathname [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Leon Focker: leon@leonfocker.de
</pre>
<p class="item_name">DATE</p>
<pre> March 17th 2024.
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> A replacement for directory-namestring, as that function does not return
 device names when used on windows.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> a string representing a pathname.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a pathname - to a directory without filename and type
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>agnostic-directory-pathname</strong> (namestring)
</pre>


<a name="utilities2fall2dmembers"></a>
<a name="robo927"></a><h2 class=robodoc>utilities/all-members [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Find out whether the members of the list given as the second argument are
 all present in the list given as the first argument.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list in which the members of the second argument will be sought. 
 - A list whose members will be sought in the first argument.
 
 OPTIONAL ARGUMENT
 - A comparison function.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> T or NIL.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>all-members</strong> '(1 2 3 4 5 6 7) '(1 2 3 7))

=&gt; T
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>all-members</strong> (list test-list &amp;optional (test #'equal))
</pre>


<a name="utilities2falmost2dflatten"></a>
<a name="robo928"></a><h2 class=robodoc>utilities/almost-flatten [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> September 4th 2013
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Similar to <a href="#robo958">flatten</a> but allows one level of nesting
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A list with an arbitrary level of nesting.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list with a maximum of one level of nesting
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>almost-flatten</strong> '((1 (2 3 4) (5 (6 7) (8 9 10 (11) 12)) 13) 14 15 (16 17)))
=&gt; (1 (2 3 4) 5 (6 7) 8 9 10 (11) (12) (13) 14 15 (16 17))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>almost-flatten</strong> (nested-list)
</pre>


<a name="utilities2falmost2dzero"></a>
<a name="robo929"></a><h2 class=robodoc>utilities/almost-zero [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return T if a given decimal is within 0.000001 of 0.0.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - A number that is a user-specified difference for the comparison test. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> T if the number is within the tolerance difference to zero, otherwise NIL. 
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>almost-zero</strong> 0.0000007)

=&gt; T
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>almost-zero</strong> (num &amp;optional (tolerance 0.000001))
</pre>


<a name="utilities2famp2db"></a>
<a name="robo930"></a><h2 class=robodoc>utilities/amp2db [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a standard digital amplitude value (&gt;0.0 to 1.0) to a corresponding
 decibel value.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A decimal number <a href="#robo934">between</a> &gt;0.0 and 1.0.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A decimal number that is a value in decibel.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>amp2db</strong> 0.3)

=&gt; -10.457575
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmacro <strong>amp2db</strong> (amp)
</pre>


<a name="utilities2famplitude2dto2ddynamic"></a>
<a name="robo931"></a><h2 class=robodoc>utilities/amplitude-to-dynamic [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a specified digital amplitude <a href="#robo934">between</a> 0.0 and 1.0 to a
 corresponding dynamic <a href="#robo934">between</a> niente and ffff.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A decimal number <a href="#robo934">between</a> 0.0 and 1.0.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - T or NIL to indicate whether to print a warning if the specified
   amplitude is &lt;0.0 or &gt;1.0. T = warn. Default = T.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A symbol that is a dynamic level.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>amplitude-to-dynamic</strong> 0.3)

=&gt; PP
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>amplitude-to-dynamic</strong> (amp &amp;optional (warn t))
</pre>


<a name="utilities2fauto2dscale2denv"></a>
<a name="robo932"></a><h2 class=robodoc>utilities/auto-scale-env [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> August 29th 2013
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Automatically <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> both the x and y values of an envelope to fit within
 the given ranges. Normally we'll assume that the minimum and maximum Y
 values are present in the original envelope and so the automatically scaled
 envelope will represent these with the new minimum and maximum
 values. However sometimes an envelope doesn't range over the possible
 extremes, for example (0 .3 100 .6) where the y range is from 0 to 1. If
 this is the case and you need a scaled envelope to take this into account,
 then how is the original envelopes minimum and maximum values to the
 keyword argument :orig-y-range.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The envelope: a list of x y pairs
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :x-min: The new minimum (starting) x value
 - :x-max: The new maximum (last) x value
 - :y-min: The new minimum (not necessarily starting!) y value
 - :y-max: The new maximum (not necessarily starting!) y value
 - :orig-y-range: a two-element list specifying the original envelope's
   minimum and maximum values (see above).
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The new envelope (list).
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>auto-scale-env</strong> '(0 0 10 1))
=&gt;
(0.0 0.0 100.0 10.0)

(<strong>auto-scale-env</strong> '(-1 0 .3 -3 1 1) :y-min 5 :y-max 6 :x-min 2)
=&gt;
(2.0 5.75 65.7 5.0 100.0 6.0))

(<strong>auto-scale-env</strong> '(0 1 5 1.5 7 0 10 1) :y-min -15 :y-max -4)
=&gt;
(0.0 -7.6666665 50.0 -4.0 70.0 -15.0 100.0 -7.6666665))

(<strong>auto-scale-env</strong> '(0 .5 100 .5) :y-min 1 :y-max 2)
=&gt; (0.0 1.0 100.0 1.0)

(<strong>auto-scale-env</strong> '(0 .5 100 .5) :y-min 1 :y-max 2 :orig-y-range '(0 1))
=&gt; (0.0 1.5 100.0 1.5)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>auto-scale-env</strong> (env &amp;key
                             (x-min 0.0) (x-max 100.0)
                             (y-min 0.0) (y-max 10.0)
                             orig-y-range)
</pre>


<a name="utilities2faverage"></a>
<a name="robo933"></a><h2 class=robodoc>utilities/average [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the <strong>average</strong> value of a list of numbers.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the list of numbers
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> the <strong>average</strong> of the list, as a float
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>average</strong> (num-list)
</pre>


<a name="utilities2fbetween"></a>
<a name="robo934"></a><h2 class=robodoc>utilities/between [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return a random number <strong>between</strong> two specified numbers. If the two numbers are
 integers, the random selection is inclusive. If either are floating-point
 (decimal) numbers, the result will be a float <strong>between</strong> the first (inclusive)
 and just less than the second (i.e. exclusive).
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A first, lower, number.
 - A second, higher, number. 

 NB: The first number must always be lower than the second.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - T or NIL to indicate whether the random seed should be fixed.
 - T or NIL to indicate whether, when fixed-random is set to T, we should
   <a href="./circular-sclist_lsp.html#robo124">reset</a> the random number generator (to guarantee the same random
   sequences). This would generally only be called once, perhaps at the
   start of a generation procedure.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An integer if both numbers are integers, or a float if one or both are
 decimal numbers.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Using the defaults. This will produce a different result each time.
(loop repeat 10 collect (<strong>between</strong> 1 100))

=&gt; (43 63 26 47 28 2 99 93 66 23)

;;; Setting fixed-random to T and using zerop to <a href="./circular-sclist_lsp.html#robo124">reset</a> the random when i is 0 
(loop repeat 5 
   collect (loop for i from 0 to 9 collect (<strong>between</strong> 1 100 t (zerop i))))

=&gt; ((93 2 38 81 43 19 70 18 44 26) (93 2 38 81 43 19 70 18 44 26)
    (93 2 38 81 43 19 70 18 44 26) (93 2 38 81 43 19 70 18 44 26)
    (93 2 38 81 43 19 70 18 44 26))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>between</strong> (low high &amp;optional fixed-random restart)
</pre>


<a name="utilities2fbetween2dextremes"></a>
<a name="robo935"></a><h2 class=robodoc>utilities/between-extremes [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> April 23rd 2016, Edinburgh
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Given a &lt;progress&gt; value of <a href="#robo934">between</a> 0 and 1, we'll return whatever that
 proportion is of the difference <a href="#robo934">between</a> &lt;min&gt; and &lt;max&gt; added to min. NB No
 randomness here.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the minimum value (returned when &lt;progress&gt; is 0.0)
 - the maximum value (returned when &lt;progress&gt; is 1.0)
 - a value <a href="#robo934">between</a> 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a number <a href="#robo934">between</a> min and max
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(BETWEEN-EXTREMES 0.5 1 0.5)
==&gt; 0.75
(BETWEEN-EXTREMES 0.5 1 0.9)
==&gt; 0.95
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>between-extremes</strong> (min max progress)
</pre>


<a name="utilities2fcartesian2dto2dpolar"></a>
<a name="robo936"></a><h2 class=robodoc>utilities/cartesian-to-polar [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Leon Focker: leon@leonfocker.de
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a point in a 3D coordinate space from the cartesian system to polar
 coordinates. This differs from the normal definition of this conversion, in
 that the elevation is the angle from true horizontal, not vertical...
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The x-coordinate
 - The y-coordinate
 - The z-coordinate
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list that holds the angle (azimuth), elevation and distance of the point.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>cartesian-to-polar</strong> 0 0 1)

=&gt; (0 90 1)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>cartesian-to-polar</strong> (x y z)
</pre>


<a name="utilities2fcentre2dlist"></a>
<a name="robo937"></a><h2 class=robodoc>utilities/centre-list [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> March 9th 2021, Heidhausen
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Take a list of numbers and <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> them so that they are symmetrical(ish)
 around either the mid-point (exactly) or the <a href="#robo976">middle</a> element (in terms of
 value). 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - a list of numbers
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> T or NIL to indicate whether the <a href="#robo976">middle</a> element should the zero point from
 which the other elements are offset or (if NIL) to use the calculated <a href="#robo976">middle</a>
 point. So if T, we won't centre around 0 but if NIL we will (i.e. if NIL
 we'll go equally as far in the negative direction as positive). In each case
 however, the returned list will by necessity range from negative to positive
 values.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of numbers.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>centre-list</strong> '(1 2 3 4 5 6) t)
-&gt; (-3 -2 -1 0 1 2) 
(<strong>centre-list</strong> '(1 2 3 4 5 6) NIL)
-&gt; (-2.5 -1.5 -0.5 0.5 1.5 2.5)
(<strong>centre-list</strong> '(12.2 -11 7 13 14 15 16 -2) nil)
-&gt; '(9.7 -13.5 4.5 10.5 11.5 12.5 13.5 -4.5)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>centre-list</strong> (list &amp;optional zero)
</pre>


<a name="utilities2fcombine2dinto2dsymbol"></a>
<a name="robo938"></a><h2 class=robodoc>utilities/combine-into-symbol [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Combine a sequence of elements of any combination of type string, number,
 or symbol into a symbol.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A sequence of elements.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A symbol as the primary value, with the length of that symbol as a
 secondary value.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>combine-into-symbol</strong> "test" 1 'a)

=&gt; TEST1A, 6
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>combine-into-symbol</strong> (&amp;rest params)
</pre>


<a name="utilities2fconvert2dpolar2denvelopes"></a>
<a name="robo939"></a><h2 class=robodoc>utilities/convert-polar-envelopes [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Leon Focker: leon@leonfocker.de
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a set of an angle-env and elevation-env into an envelope for the
 x, y and z coordinates. Distance is assumed to be 1, if no additional
 distance-env is given. The x axis represents left (-1) and right (+1).
 The y axis is front (+1) to back (-1), z goes up (+1) to head-level (0).
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An angle-env
 - An elevation-env
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 :distance-env. A distance-env...
 :minimum-samples. A number - minimal amount of points <a href="#robo934">between</a> first and
 last point of the envelopes at which to convert. If nil, only the original
 points of the envelopes are used, this however doesn't always fully
 represent the envelopes... Going from 0° to 180° is something else than
 going from y = 1 to y = -1.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list that holds the three envelopes for x, y and z
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>convert-polar-envelopes</strong> '(0 0  1 180) '(0 30  .5 0  1 45) :minimum-samples 5)

=&gt; (0.0 0.0 25 0.68301266 50.0 1.0 75 0.65328145 100.0 8.6595606e-17)
=&gt; (0.0 0.8660254 25 0.68301266 50.0 6.123234e-17 75 -0.65328145 100.0 -0.70710677)
=&gt; (0.0 0.5 25 0.25881904 50.0 0.0 75 0.38268343 100.0 0.70710677)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>convert-polar-envelopes</strong> (angle-env elevation-env
                                &amp;key (distance-env '(0 1 1 1))
                                  minimum-samples)
</pre>


<a name="utilities2fdb2amp"></a>
<a name="robo940"></a><h2 class=robodoc>utilities/db2amp [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a decibel value to a standard digital amplitude value (&gt;0.0 to 1.0),
 whereby 0dB = 1.0.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number that is a value in decibel.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A decimal number <a href="#robo934">between</a> &gt;0.0 and 1.0.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>db2amp</strong> -3)

=&gt; 0.70794576
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmacro <strong>db2amp</strong> (db)
</pre>


<a name="utilities2fdecider"></a>
<a name="robo941"></a><h2 class=robodoc>utilities/decider [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Leon Focker: leon@leonfocker.de
</pre>
<p class="item_name">DATE</p>
<pre> February 23rd 2023
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Return an index, which can be used to select an element from a sequence,
 when provided with a list of weights (see the example). It does that by
 scaling the selector argument relative to the sum of all weights, using
 <a href="#robo1015">rescale</a>. Then it goes through all the weights and as soon as the selector
 is smaller than the sum of the weights so far, the index of the current
 weight is returned. So when given a list of weights '(2 1), the following
 selectors will return:
 0     =&gt; 0
 1/3   =&gt; 0
 19/30 =&gt; 0
 2/3   =&gt; 1
 1     =&gt; 1
 This process is thus deterministic. By providing a random number as a
 selector, you can make random choices etc.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number <a href="#robo934">between</a> 0 and 1
 - A list of numbers, representing weights 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> index of chosen element
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; simple example, choosing from a list:
(let* ((ls '(c4 d4 e4 f4 g4 a4 b4))
       (weights '(1 1 2 2 3 1 2)))
  (nth (<strong>decider</strong> 0.1 weights) ls))
=&gt; d4

;;; making a simple melody, following a <a href="./sine_lsp.html#robo18">sine</a> wave:
(let* ((ls '(c4 d4 e4 f4 g4 a4 b4))
       (weights '(1 1 2 2 3 1 2)))
  (loop for i from 0 to pi by 0.25 collect
       (nth (<strong>decider</strong> (abs (sin i)) weights) ls)))
=&gt; (C4 E4 F4 G4 B4 B4 B4 B4 B4 A4 G4 F4 D4)

;;; make a random melody with 10 pitches:
(let* ((ls '(c4 d4 e4 f4 g4 a4 b4))
       (weights '(1 1 2 2 3 1 2)))
  (loop repeat 10 collect
       (nth (<strong>decider</strong> (random 1.0) weights) ls)))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>decider</strong> (selector weights)
</pre>


<a name="utilities2fdecimal2dplaces"></a>
<a name="robo942"></a><h2 class=robodoc>utilities/decimal-places [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 19-Mar-2012
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Round the given number to the specified number of decimal places.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number.
 - An integer that is the number of decimal places to which to round the
   given number.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A decimal number.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>decimal-places</strong> 1.1478349092347 2)

=&gt; 1.15
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>decimal-places</strong> (num places)
</pre>


<a name="utilities2fdecimate2denv"></a>
<a name="robo943"></a><h2 class=robodoc>utilities/decimate-env [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Reduce the number of x,y pairs in an envelope.  In every case the envelope
 is first stretched along the x-axis to fit the new number of points
 required.  Then we proceed by one of three methods:
 
 1) <a href="#robo933">average</a>: for every new output x value, <a href="#robo970">interpolate</a> 100 times from -0.5
 to +0.5 around the point, then <a href="#robo933">average</a> the y value.  This will catch
 clustering but round out spikes caused by them
 
 2) points: also an averaging method but only using the existing points in
 the original envelope (unless none is present for a new x value, whereupon
 interpolation is used): Take an <a href="#robo933">average</a> of the (several) points <a href="#robo981">nearest</a> the
 new output point. This might not recreate the extremes of the original
 envelope but clustering is captured, albeit averaged.
 
 3) <a href="#robo970">interpolate</a>: for each new output point, <a href="#robo970">interpolate</a> the new y value from
 the original envelope.  This will leave out details in the case of
 clustering, but accurately catch peaks if there are enough output points.
 
 In each case we create an even spread of x values, rather than clustering
 where clusters exist in the original.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the original envelope (list of x,y values on any scales).
 - the number of points required in the output list.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - the method to be applied (symbol): 'points, '<a href="#robo933">average</a>, '<a href="#robo970">interpolate</a>.
   Default = 'points.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list representing the x,y values of the new envelope
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>decimate-env</strong> '(0 0 4 4 5 5 5.1 5.1 5.3 1 5.6 5.6 6 6 10 10) 6)
=&gt;
(0.0 0.0 1 2.0 2 4.5 3 4.425 4 8.0 5.0 10.0)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>decimate-env</strong> (env num-points &amp;optional (method 'points))
</pre>


<a name="utilities2fdegree2dto2dradian"></a>
<a name="robo944"></a><h2 class=robodoc>utilities/degree-to-radian [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Leon Focker: leon@leonfocker.de
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Convert an angle in degrees to its equivalent in radians
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The number in degrees
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The number in radians
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>degree-to-radian</strong> 180)

=&gt; 3.141592653589793d0
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>degree-to-radian</strong> (degree)
</pre>


<a name="utilities2fdown2dup"></a>
<a name="robo945"></a><h2 class=robodoc>utilities/down-up [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> May 8th 2016
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This is a routine used in morphing maps but may be useful elsewhere. It
 interpolates <a href="#robo934">between</a> two numbers over a given number of steps before
 returning back to the first number. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the number of steps over which the procedure should <a href="#robo970">interpolate</a>
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :down. T or NIL: whether to first descend before ascending. Default = T
 - :up. T or NIL: whether to ascend after descending. Default = T
 - :start. The number to start at. Default = 1.0
 - :target. The number to <a href="#robo970">interpolate</a> towards. Default = 0.0.
 - :cons. Whether to return :start as the first number in the result list.
 - :butlast. Whether to omit the :start when ascending. Default = T.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of numbers.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(mapcar #'(lambda (x) (<a href="#robo942">decimal-places</a> x 2)) (<strong>down-up</strong> 20))
--&gt; (0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0.0 0.09 0.18 0.27 0.36 0.45 0.55 0.64
     0.73 0.82 0.91)
(mapcar #'(lambda (x) (<a href="#robo942">decimal-places</a> x 2)) (<strong>down-up</strong> 20 :cons t))
--&gt; (1.0 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8
     0.9)
(mapcar #'(lambda (x) (<a href="#robo942">decimal-places</a> x 2)) (<strong>down-up</strong> 20 :butlast nil))
--&gt; (0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9
     1.0)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>down-up</strong> (steps &amp;key (down t) (up t) (start 1.0d0) (target 0.0d0)
                        (cons nil) (butlast t))
</pre>


<a name="utilities2fdynamic2dto2damplitude"></a>
<a name="robo946"></a><h2 class=robodoc>utilities/dynamic-to-amplitude [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a symbol that is a dynamic level <a href="#robo934">between</a> niente and ffff to a
 corresponding digital amplitude value <a href="#robo934">between</a> 0.0 and 1.0.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A symbol that is a dynamic level <a href="#robo934">between</a> niente and fff.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - T or NIL to indicate whether to print a warning when the symbol specified
   is not recognized as a dynamic. T = warn. Default = T.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A decimal number <a href="#robo934">between</a> 0.0 and 1.0.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>dynamic-to-amplitude</strong> 'fff)

=&gt; 0.9
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>dynamic-to-amplitude</strong> (dynamic &amp;optional (warn t))
</pre>


<a name="utilities2fecons"></a>
<a name="robo947"></a><h2 class=robodoc>utilities/econs [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Add a specified element to the end of an existing list.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list.
 - An element to <a href="./recursive-assoc-list_lsp.html#robo411">add</a> to the end of the list.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A new list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>econs</strong> '(1 2 3 4) 5)

=&gt;  '(1 2 3 4 5)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>econs</strong> (list new-back)
</pre>


<a name="utilities2fedit2dfile"></a>
<a name="robo948"></a><h2 class=robodoc>utilities/edit-file [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Leon Focker: leon@leonfocker.de
</pre>
<p class="item_name">DATE</p>
<pre> April 30th 2023.
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> a simple wrapper to open a file as a string and save it into a lexical
 variable. This variable is then set to the return values of the expressions
 within the body of <strong>edit-file</strong>. Eventually the new value of the variable is
 written into the original file. This was originally designed to be used with
 the editing functions in <a href="./reaper_lsp.html#robo_top_of_doc">reaper.lsp</a> (set-track-channels etc.).
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string that is the path to a file (directory and filename)
 - A name for the lexical variable - this can be used within body
 (without quote)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> whatever was written into the file
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; set all faders of project.rpp to 0.5 and use "anything" as lexical variable
(<strong>edit-file</strong> "/E/project.rpp" anything
      (set-all-faders anything .5))
|#
#|
;;; more complex: insert a plugin on 3 tracks in two ways
(<strong>edit-file</strong> "/E/project.rpp" project
  (<a href="./reaper_lsp.html#robo402">insert-plugin</a> project *iem-<a href="./sndfile_lsp.html#robo896">stereo</a>-encoder* 1)
  (<a href="./reaper_lsp.html#robo402">insert-plugin</a> project *iem-<a href="./sndfile_lsp.html#robo896">stereo</a>-encoder* 2)
  (<a href="./reaper_lsp.html#robo402">insert-plugin</a> project *iem-<a href="./sndfile_lsp.html#robo896">stereo</a>-encoder* 3))
;;; alternatively:
(<strong>edit-file</strong> "/E/project.rpp" project
  (loop for i from 1 to 3 with temp-var = project
     do (setf temp-var (<a href="./reaper_lsp.html#robo402">insert-plugin</a> temp-var *iem-<a href="./sndfile_lsp.html#robo896">stereo</a>-encoder* i))
       finally (return temp-var)))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmacro <strong>edit-file</strong> (file var &amp;body body)
</pre>


<a name="utilities2fenv2dmean2dy"></a>
<a name="robo949"></a><h2 class=robodoc>utilities/env-mean-y [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> january 9th 2025
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Get the mean value of the y values in an envelope considering the breadth of
 the x axis. In other words, by sampling the envelope over many evenly spread
 points, return the mean y value
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the envelope as a list of x y breakpoint
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - how many points to use to sample the envelope. Default = 1000.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> the mean y value: a number
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>env-mean-y</strong> '(0 0 100 1)) = 0.5 (approx)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>env-mean-y</strong> (env &amp;optional (granularity 1000))
</pre>


<a name="utilities2fenv2dplus"></a>
<a name="robo950"></a><h2 class=robodoc>utilities/env-plus [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Increase all y values of a given list of break-point pairs by a specified
 amount.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An envelope in the form of a list of break-point pairs.
 - A number that is the amount by which all y values of the given envelope
   are to be increased.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of break-point pairs.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>env-plus</strong> '(0 0 25 11 50 13 75 19 100 23) 7.1)

=&gt; (0 7.1 25 18.1 50 20.1 75 26.1 100 30.1)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>env-plus</strong> (env <a href="./recursive-assoc-list_lsp.html#robo411">add</a>)
</pre>


<a name="utilities2fenv2dsymmetrical"></a>
<a name="robo951"></a><h2 class=robodoc>utilities/env-symmetrical [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Create a new list of break-point pairs that is symmetrical to the original
 around a specified center. If no center is specified, the center value
 defaults to 0.5
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An envelope in the form of a list of break-point pairs.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - A number that is the center value around which the values of the
   new list are to be symmetrical.
 - A number that is to be the minimum value for the y values returned.
 - A number that is to be the maximum value for the y values returned.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An envelope in the form of a list of break-point pairs.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Default center is 0.5
(<strong>env-symmetrical</strong> '(0 0 25 11 50 13 75 19 100 23))

=&gt; (0 1.0 25 -10.0 50 -12.0 75 -18.0 100 -22.0)

;; Specifying a center of 0
(<strong>env-symmetrical</strong> '(0 0 25 11 50 13 75 19 100 23) 0)

=&gt; (0 0.0 25 -11.0 50 -13.0 75 -19.0 100 -23.0)

;;; Specifying minimum and maximum y values for the envelope returned
(<strong>env-symmetrical</strong> '(0 0 25 11 50 13 75 19 100 23) 0 -20 -7)

=&gt; (0 -7 25 -11.0 50 -13.0 75 -19.0 100 -20)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>env-symmetrical</strong> (env &amp;optional (centre .5) 
                        (min most-negative-<a href="./sc-map_lsp.html#robo592">double</a>-float)
                        (max most-positive-<a href="./sc-map_lsp.html#robo592">double</a>-float))
</pre>


<a name="utilities2fenv2gnuplot"></a>
<a name="robo952"></a><h2 class=robodoc>utilities/env2gnuplot [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 24th December 2013
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Write a data file of x,y envelope values for use with gnuplit.  Once called
 start gnuplot and issue commands such as:
 gnuplot&gt; set terminal postscript default
 gnuplot&gt; set output '/tmp/env.ps'
 gnuplot&gt; <a href="./sclist_lsp.html#robo645">plot</a> '/tmp/env.txt' with lines.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The envelope as the usual list of x y pairs
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - The pathname of the data file to write.  Default = "/tmp/env.txt".
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Always T
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>env2gnuplot</strong> (env &amp;optional (file "/tmp/env.txt"))
</pre>


<a name="utilities2fenvelope2dboundaries"></a>
<a name="robo953"></a><h2 class=robodoc>utilities/envelope-boundaries [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Find sharp changes in envelope values. These are defined as when a y value
 rises or falls over 30% (by default) of it's overall range within 5%
 (again, by default) of its overall x axis range.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The envelope (a list of x y pairs).
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - jump-threshold: the minimum percentage change in y value that is deemed a
   sharp change. 
 - steepness-min: the maximum percentage of the overall x axis that
   constitutes a 'quick' change.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of x values at which boundaries are deemed to lie.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(ENVELOPE-BOUNDARIES '(0 10 20 10 21 3 25 4 26 9 50 7 51 1 55 2 56 7 70 10
                     100 10))
--&gt; (21 26 51 56)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>envelope-boundaries</strong> (envelope &amp;optional (jump-threshold 30)
                            (steepness-min 5))
</pre>


<a name="utilities2fequal2dwithin2dtolerance"></a>
<a name="robo954"></a><h2 class=robodoc>utilities/equal-within-tolerance [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Test whether the difference <a href="#robo934">between</a> two decimal numbers falls within a
 specified tolerance.

 This test is designed to compensate for calculation discrepancies caused by
 floating-point errors (such as 2.0 vs. 1.9999997), in which the equations
 should yield equal numbers. It is intended to be used in place of = in such
 circumstances.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A first number.
 - A second number.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - A decimal value that is the maximum difference allowed <a href="#robo934">between</a> the two
   numbers that will still return T. Default = 0.000001d0.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> T if the two tested numbers are equal within the specified tolerance,
 otherwise NIL.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;; An example of floating-point error
(loop for i from 0.0 below 1.1 by 0.1 collect i)

=&gt; (0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.70000005 0.8000001 0.9000001 1.0000001) 

;; Using =
(loop for i from 0.0 below 1.1 by 0.1 
   for j in '(0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0)
   collect (= i j))

=&gt; (T T T T T T T NIL NIL NIL NIL)

;; Using <strong>equal-within-tolerance</strong>
(loop for i from 0.0 below 1.1 by 0.1 
   for j in '(0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0)
   collect (<strong>equal-within-tolerance</strong> i j))

=&gt; (T T T T T T T T T T T)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>equal-within-tolerance</strong> (a b &amp;optional (tolerance 0.000001d0))
</pre>


<a name="utilities2fexaggerate2denv"></a>
<a name="robo955"></a><h2 class=robodoc>utilities/exaggerate-env [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Makes the y values in an envelope more radically pushed towards its
 extremes. Y values below the mid-point will be pushed downwards; those
 above will be pushed upwards. The opposite can be accomplished by making
 the exponent argument &gt; 1 (see below).
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the envelope: a list of numbers representing an envelope: x y pairs
 - the exponent: this determines the amount of
   exaggeration. Counterintuitively perhaps, the lower values are than 1 the
   more exaggeration takes place. Values &gt; 1 will mean the opposite:
   understated y values, if you will.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - easy-expt: because of the counterintuitive nature of the exponent, you
   can pass values <a href="#robo934">between</a> -10 and +10 if this third argument is T. This
   will be scaled to useful though not over-extreme exponents of 1.9 (-10)
   to .1 (+10) with 0 equating to an exponent of 1, i.e. no change.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The new exaggerated envelope (a list).
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>exaggerate-env</strong> '(0 0 50 .8 100 1) 1.9)
--&gt; (0 0.0 50 0.6894338 100 1.0)
(<strong>exaggerate-env</strong> '(0 0 50 .8 100 1) .1)
--&gt; (0 0.0 50 0.9751001 100 1.0)
(<strong>exaggerate-env</strong> '(0 0 50 .8 100 1) -10)
--&gt; (0 0.0 50 83.19083 100 1.0)
(<strong>exaggerate-env</strong> '(0 0 50 .8 100 1) -10 t)
--&gt; (0 0.0 50 0.6894338 100 1.0)
(<strong>exaggerate-env</strong> '(0 0 50 .8 100 1) 0 t)
--&gt; (0 0.0 50 0.8 100 1.0)
(<strong>exaggerate-env</strong> '(0 0 50 .8 100 1) 10 t)
--&gt; (0 0.0 50 0.9751001 100 1.0)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>exaggerate-env</strong> (env expt &amp;optional easy-expt)
</pre>


<a name="utilities2ffactor"></a>
<a name="robo956"></a><h2 class=robodoc>utilities/factor [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Boolean test to check if a specified number is a multiple of a second
 specified number.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number that will be tested to see if it is a multiple of the second
   number. 
 - A second number that is the base number for the <strong>factor</strong> test.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> T if the first number is a multiple of the second number, otherwise NIL.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>factor</strong> 14 7) =&gt; T
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>factor</strong> (num fac)
</pre>


<a name="utilities2ffilter2dparameters"></a>
<a name="robo957"></a><h2 class=robodoc>utilities/filter-parameters [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> July 1st 2021, Heidhausen
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Though generally applicable, a reaper marker specifically could look like
 this:  ("MARKER" (67 709.726 "b364 F1 molto pesante" 0 0 1 B)) Allow
 therefore searching of the results from (<a href="#robo963">get-parameters</a> ...) for specific
 strings, returning whole parameter lists or specific elements thereof. NB
 The strings are case-insensitive.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - a list of parameters, where each element is a 2-element list: the
 parameter name and a list of associated data. I.e. this implies e.g. calling
 <a href="#robo963">get-parameters</a> with the optional to-line-end set to T
 - the string to search for in the data lists
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - a number to specify the nth element that will be returned from the data
 lists 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a list of matching data lists
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>filter-parameters</strong>
  (<a href="#robo963">get-parameters</a> "markers.RPP" '("MARKER") #\  t)
  "harmonic" 1)
--&gt;
85 parameters read
(322.7273 527.37866 542.9216 686.73846 944.6802 952.6701)

;;; or without the nth option:

(<strong>filter-parameters</strong>
 (<a href="#robo963">get-parameters</a> "markers.RPP" '("MARKER") #\  t)
 "harmonic")
--&gt;
((29 322.7273 "c harmonic resonance" 0 0 1 B
  {8F7A97DD-F0B6-4E4D-9F67-27635F109E05})
 (55 527.37866 "nice resonant harmonic pizz" 0 0 1 B
  {E380FEF5-FE44-3B47-9C43-2BA80A3D0FAC})
 (57 542.9216 "nice harmonic S trem" 0 0 1 B
  {04BB89FE-8FB8-5B4A-AB5F-EDE1F9C921CC})
 (65 686.73846 "b347 E7 nice single harmonic repeat" 0 0 1 B
  {586CDD49-BE23-F149-AABC-A98EDD6C6EEE})
 (79 944.6802 "b483: nice spe and harmonics" 0 0 1 B
  {11E361AD-22C8-0D42-AB91-ECCBCAAEA075})
 (80 952.6701 "b491 muted harmonics" 0 0 1 B
  {097D7A4D-E9F0-FE4B-8BE6-E7BC85E2969B}))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>filter-parameters</strong> (parameters string &amp;optional get-nth)
</pre>


<a name="utilities2fflatten"></a>
<a name="robo958"></a><h2 class=robodoc>utilities/flatten [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return a list of nested lists of any depth as a flat list.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list of nested lists.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A flat list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>flatten</strong> '((1 (2 3 4) (5 (6 7) (8 9 10 (11) 12)) 13) 14 15 (16 17)))

=&gt; (1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>flatten</strong> (nested-list)
</pre>


<a name="utilities2fforce2dlength"></a>
<a name="robo959"></a><h2 class=robodoc>utilities/force-length [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 03-FEB-2011
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Create a new a list of a specified new length by adding or removing items
 at regular intervals from the original list. If adding items and the list
 contains numbers, linear interpolation will be used, but only <a href="#robo934">between</a> two
 adjacent items; i.e. not with a partial increment.

 NB: The function can only create new lists that have a length <a href="#robo934">between</a> 1 and
     1 less than <a href="./sc-map_lsp.html#robo592">double</a> the length of the original list.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A flat list.
 - A number that is the new length of the new list to be derived from the
   original list. This number must be a value <a href="#robo934">between</a> 1 and 1 less than
   <a href="./sc-map_lsp.html#robo592">double</a> the length of the original list.
</pre>
<p class="item_name">RETURN VALUE</p>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Shortening a list
(<strong>force-length</strong> (loop for i from 1 to 100 collect i) 17)

=&gt; (1 7 13 20 26 32 39 45 51 57 63 70 76 82 89 95 100)

;;; Lengthening a list
(<strong>force-length</strong> (loop for i from 1 to 100 collect i) 199)

=&gt; (1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 6 6.5 7 7.5 8 8.5 9 9.5 10 10.5 11 11.5 12
    12.5 13 13.5 14 14.5 15 15.5 16 16.5 17 17.5 18 18.5 19 19.5 20 20.5 21
    21.5 22 22.5 23 23.5 24 24.5 25 25.5 26 26.5 27 27.5 28 28.5 29 29.5 30
    30.5 31 31.5 32 32.5 33 33.5 34 34.5 35 35.5 36 36.5 37 37.5 38 38.5 39
    39.5 40 40.5 41 41.5 42 42.5 43 43.5 44 44.5 45 45.5 46 46.5 47 47.5 48
    48.5 49 49.5 50 50.5 51 51.5 52 52.5 53 53.5 54 54.5 55 55.5 56 56.5 57
    57.5 58 58.5 59 59.5 60 60.5 61 61.5 62 62.5 63 63.5 64 64.5 65 65.5 66
    66.5 67 67.5 68 68.5 69 69.5 70 70.5 71 71.5 72 72.5 73 73.5 74 74.5 75
    75.5 76 76.5 77 77.5 78 78.5 79 79.5 80 80.5 81 81.5 82 82.5 83 83.5 84
    84.5 85 85.5 86 86.5 87 87.5 88 88.5 89 89.5 90 90.5 91 91.5 92 92.5 93
    93.5 94 94.5 95 95.5 96 96.5 97 97.5 98 98.5 99 99.5 100)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>force-length</strong> (list new-len)
</pre>


<a name="utilities2fforce2dsymmetrical2dand2dnormalise"></a>
<a name="robo960"></a><h2 class=robodoc>utilities/force-symmetrical-and-normalise [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> February 8th 2022
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Take a list of numbers (usually samples but any of course) and, using the
 <a href="#robo933">average</a> sample value, offset them to be symmetrical around 0.0
 (usually). This is not the same as but is related to removing DC offset:
 here we're offsetting numbers individually rather than using the 
 high-pass <a href="./rthm-seq_lsp.html#robo561">filter</a> approach in the DSP time domain.

 Note that to make the samples symmetrical we offset by the <a href="#robo933">average</a> of the
 existing samples so any occasional outliers will still spike in one
 direction or another, thus making a waveform view seem to be still offset.

 Optionally also normalise to within -1.0 and 1.0 (or other values: see
 below). If either :min or :max are nil then normalisation won't be applied.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> a list of floats (<a href="./sc-map_lsp.html#robo592">double</a> precision)
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 :min. The new minimum value to map to. Default = -1.0
 :max. The new minimum value to map to. Default = 1.0
 :verbose. Print some stats. Default = NIL.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> the list of new samples
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>force-symmetrical-and-normalise</strong> (samples &amp;key (min -1.0)
                                                  (max 1.0) verbose)
</pre>


<a name="utilities2fget2dclusters"></a>
<a name="robo961"></a><h2 class=robodoc>utilities/get-clusters [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Takes a list with (ascending) numbers and creates sublists of those numbers
 within &lt;threshold&gt; of each other. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A list of (ascending) numbers. NB Though the numbers don't have to be in
 ascending order, the design application of the function makes most sense if
 they are.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> The maximum distance <a href="#robo934">between</a> two numbers in order for them to be considered
 as part of the same cluster.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list with clusters in sublists.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>get-clusters</strong> '(24 55 58 59 60 81 97 102 106 116 118 119 145 149 151 200 210
                211 214 217 226 233 235 236 237 238 239 383 411 415 419))
--&gt; (24 (55 58 59 60) 81 (97 102 106) (116 118 119) (145 149 151) 200
        (210 211 214 217) 226 (233 235 236 237 238 239) 383 (411 415 419))

(<strong>get-clusters</strong> '(0 .1 .3 .7 1.5 1.55 2 4.3 6.3 6.4) 1)
--&gt; ((0 0.1 0.3 0.7 1.5 1.55 2) 4.3 (6.3 6.4))

(<strong>get-clusters</strong> '(0 .1 .3 .7 1.5 1.55 2 4.3 6.3 6.4) 0.5)
--&gt; ((0 0.1 0.3 0.7) (1.5 1.55 2) 4.3 (6.3 6.4))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>get-clusters</strong> (list &amp;optional (threshold 5))
</pre>


<a name="utilities2fget2dharmonics"></a>
<a name="robo962"></a><h2 class=robodoc>utilities/get-harmonics [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return a list of the harmonic partial frequencies in Hertz from a
 specified (usually fundamental) frequency.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number that is the fundamental or starting frequency in Hertz.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments
 - :start-partial. An integer that is the number of the first harmonic
    partial to return. Default = 1.
 - :min-freq. A number that is the <a href="./chord_lsp.html#robo94">lowest</a> frequency in Hertz to
   return. Default = 20.
 - :max-freq. A number that is the <a href="./event_lsp.html#robo199">highest</a> frequency in Hertz to
   return. Default = 20000.
 - :start-freq-is-partial.  Rather than treating the first argument as the
   fundamental, treat it as the partial number indicated by this argument.
   Default = 1.
 - :max-results.  The maximum number of harmonics to return.  Default =
    most-positive-fixnum  
 - :skip. The increment for the harmonics.  If 1, then we ascend the
    harmonics series one partial at a time; 2 would mean skipping every other
    Default = 1.
 - :pitches. Return a list of <a href="./pitch_lsp.html#robo297">pitch</a> objects instead of frequencies. Default =
   NIL. 
 - :notes. Return a list of 2-element sublists: note symbols in the
   chromatics <a href="./rthm-seq-palette_lsp.html#robo553">scale</a>, with cent deviations 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of numbers that are the frequencies in Hertz of harmonic partials
 above the same fundamental frequency, or with the respective keyword, as
 <a href="./pitch_lsp.html#robo297">pitch</a> objects or note symbols 
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Get the first 15 harmonic partials above a fundamental <a href="./pitch_lsp.html#robo297">pitch</a> of 64 Hertz,
;;; starting with partial 2, and specifying an upper cut-off of 1010 Hz.

(<strong>get-harmonics</strong> 63 :start-partial 2 :max-freq 1010)

=&gt; (126 189 252 315 378 441 504 567 630 693 756 819 882 945 1008)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>get-harmonics</strong> (start-freq &amp;key (start-partial 1) (min-freq 20)
                                   (start-freq-is-partial 1) (max-freq 20000)
                                   (skip 1)
                                   pitches notes
                                   (max-results most-positive-fixnum))
</pre>


<a name="utilities2fget2dparameters"></a>
<a name="robo963"></a><h2 class=robodoc>utilities/get-parameters [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> January 29th 2021
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> A general routine for searching text files for parameters and their
 values. Here we search a file line by line, matching parameters and
 returning them in a list of parameter-value pairs. This is limited, however,
 to one parameter per line, and values of one word (i.e. numbers, strings,
 etc. not containing space), unless optional argument to-line-end is T (see
 below) 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the text file to search
 - either a single string or list thereof to search for (case-sensitive)
 - the separator character which divides the parameter name from its value
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - the parameter-value separator (character)
 - T or NIL to indicate whether all tokens after a recognised parameter
   should be returned in a list. Default = NIL = get just one parameter.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of parameter-value pairs
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; search a reaper file, where parameters are followed simply by space rather
;;; than = or : E.g. a current reaper file has lines like:
      SNAPOFFS 0
      LENGTH 0.36292517006803
      LOOP 1
      ALLTAKES 0
      FADEIN 2 0 0 2 0 1 1
      FADEOUT 2 0 0 2 0 -1 -1
      MUTE 0 0
      MIXFLAG 1
      BEAT 2
      SEL 1
      IGUID {3B79D8DF-AC08-EC4F-B93C-CAFE24FA1CBB}
      IID 3
      NAME sunni-mosque.wav
      VOLPAN 1 0 1 -1
      SOFFS 0.67933106575964
      PLAYRATE 1 1 0 -1 0 0.0025
;;; hence:
(<strong>get-parameters</strong> "~/projects/<a href="./sndfilenet_lsp.html#robo318">sndfilenet</a>/reaper/sunni-mosque-<a href="./rthm-seq-bar_lsp.html#robo528">split</a>.RPP"
                '("SOFFS" "LENGTH") #\ )
--&gt;
362 parameters read
(("LENGTH" 0.36292517) ("SOFFS" 0.67933106) ("LENGTH" 0.38848072)
 ("SOFFS" 1.0422562) ("LENGTH" 1.4923356) ("SOFFS" 1.430737)
 ("LENGTH" 1.9968253) ("SOFFS" 2.9230726) ("LENGTH" 0.5023356)
 ("SOFFS" 4.919898) ("LENGTH" 0.4907483) ("SOFFS" 5.4222336)
 ("LENGTH" 0.17068027) ("SOFFS" 5.912982) ("LENGTH" 3.6765532)
...
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>get-parameters</strong> (file parameters &amp;optional (separator #\=) to-line-end)
</pre>


<a name="utilities2fget2dprimes"></a>
<a name="robo964"></a><h2 class=robodoc>utilities/get-primes [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> July 6th 2022, Werden
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Get all the <a href="#robo1002">prime</a> numbers <a href="#robo934">between</a> minimum and maximum values
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the minimum (start point). Doesn't have to be a <a href="#robo1002">prime</a> number.
 - the maximum (end point). Doesn't have to be a <a href="#robo1002">prime</a> number.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - an integer to specify the maximum number of primes to return. If NIL
   (default) then we'll stop at max
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a list of <a href="#robo1002">prime</a> numbers
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>get-primes</strong> 5 19) -&gt; (5 7 11 13 17 19)
(<strong>get-primes</strong> 5 19 3) -&gt; (5 7 11)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>get-primes</strong> (min max &amp;optional num)
</pre>


<a name="utilities2fget2dsublist2dindices"></a>
<a name="robo965"></a><h2 class=robodoc>utilities/get-sublist-indices [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the starting position of sublists within a list as though the complete
 set of items were a flat list.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list of lists.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of integers that are the indices of the sublists.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>get-sublist-indices</strong> '((1 2) (3 4 5 6) (7 8 9) (10 11 12 13 14) (15)))

=&gt; (0 2 6 9 14)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>get-sublist-indices</strong> (list)
</pre>


<a name="utilities2fget2dsublist2dlengths"></a>
<a name="robo966"></a><h2 class=robodoc>utilities/get-sublist-lengths [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the lengths of all sublists in a given list.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list of lists.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - T or NIL to indicate whether to first remove zeros caused by empty
   sublists from the result.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of integers.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;; Straightforward usage allows zeros in the result
(<strong>get-sublist-lengths</strong> '((1 2) (3 4 5 6) (7 8 9) (10 11 12 13 14) ()))

=&gt; (2 4 3 5 0)

;; Setting the optional argument to T removes zeros from the result

(<strong>get-sublist-lengths</strong> '((1 2) (3 4 5 6) (7 8 9) (10 11 12 13 14) ()) t)

=&gt; (2 4 3 5)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>get-sublist-lengths</strong> (list &amp;optional (remove-zeros nil))
</pre>


<a name="utilities2fhailstone"></a>
<a name="robo967"></a><h2 class=robodoc>utilities/hailstone [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Implementation of the Collatz conjecture (see
 <a href="http://en.wikipedia.org/wiki/Collatz_conjecture)">http://en.wikipedia.org/wiki/Collatz_conjecture)</a>

 The Collatz conjecture suggests that by starting with a given number, and
 if it is even dividing it by two or if it is odd multiplying it by three
 and adding one, then repeating with the new result, the process will
 eventually always result in one.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number to start with.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of the results collected from each iteration starting with the
 specified number and ending with one.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>hailstone</strong> 11)

=&gt; (11 34 17 52 26 13 40 20 10 5 16 8 4 2 1)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>hailstone</strong> (n)
</pre>


<a name="utilities2fhz2ms"></a>
<a name="robo968"></a><h2 class=robodoc>utilities/hz2ms [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a frequency in Hertz to the equivalent number of milliseconds. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number that is a Hertz frequency.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A number that is the millisecond equivalent of the specified Hertz
 frequency. 
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>hz2ms</strong> 261.63)

=&gt; 3.8221915
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>hz2ms</strong> (hertz)
</pre>


<a name="utilities2finterleave"></a>
<a name="robo969"></a><h2 class=robodoc>utilities/interleave [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Interleave the elements of an aribitrary number of lists. Should the lists
 not be of the same length, this function will only use up as many elements
 as in the shortest list.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> As many lists as need to be interleaved.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A new list of interleaved elements.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(INTERLEAVE '(1 2 3 4 5) '(a b c d) '(x y z))
--&gt; (1 A X 2 B Y 3 C Z)

(INTERLEAVE '(1 2 3 4 5) '(a b c d e) '(v w x y z))
--&gt; (1 A V 2 B W 3 C X 4 D Y 5 E Z)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>interleave</strong> (&amp;rest lists)
</pre>


<a name="utilities2finterpolate"></a>
<a name="robo970"></a><h2 class=robodoc>utilities/interpolate [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the interpolated value at a specified point within an envelope. The
 envelope must be specified in the form of a list of break-point pairs.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number that is the point within the specified envelope for which to
   return the interpolated value.
 - A list of break-point pairs.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :scaler. A number that is the <a href="#robo956">factor</a> by which to <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> the values of
   the break-point pairs in the given envelope before retrieving the
   interpolated value. Default = 1.
 - :exp. A number that is the exponent to which the result should be
   raised. Default = 1.
 - :warn. T or NIL to indicate whether the method should print a warning if
   the specified point is outside of the bounds of the x-axis specified in
   the list of break-point pairs. T = warn. Default = T.
</pre>
<p class="item_name">RETURN VALUE</p>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Using the defaults
(<strong>interpolate</strong> 50 '(0 0 100 1))

=&gt; 0.5

;;; Specifying a different scaler
(<strong>interpolate</strong> 50 '(0 0 100 1) :scaler 2)

=&gt; 1.0

;;; Specifying a different exponent by which the result is to be raised
(<strong>interpolate</strong> 50 '(0 0 100 1) :exp 2)

=&gt; 0.25
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>interpolate</strong> (point env &amp;key (scaler 1) (exp 1) (warn t))
</pre>


<a name="utilities2finvert2denv"></a>
<a name="robo971"></a><h2 class=robodoc>utilities/invert-env [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> June 15th 2017, Edinburgh
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Invert an envelope so that its maximum value becomes its minimum,
 vice-versa, and everything inbetween.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A list of X-Y breakpoint pairs
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of X-Y breakpoint pairs exhibiting the inversion.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>invert-env</strong> '(0 0 100 1)) -&gt; (0 1.0 100 0.0)
(<strong>invert-env</strong> '(0 .3 40 .4 100 .9)) -&gt; (0 0.9 40 0.79999995 100 0.3)
(<strong>invert-env</strong> '(0 -.9 40 .4 100 .9)) -&gt; (0 0.9 40 -0.39999998 100 -0.9)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>invert-env</strong> (env)
</pre>


<a name="utilities2flist2dto2dstring"></a>
<a name="robo972"></a><h2 class=robodoc>utilities/list-to-string [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a list to a string.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - A string that will serve as a separator <a href="#robo934">between</a> the elements. 
   Default = " ".
 - T or NIL to indicate whether a list value of NIL is to be returned as
   "NIL" or NIL. T = "NIL" as a string. Default = T.
</pre>
<p class="item_name">RETURN VALUE</p>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Using defaults
(<strong>list-to-string</strong> '(1 2 3 4 5))

=&gt; "1 2 3 4 5"

;;; Specifying a different separator
(<strong>list-to-string</strong> '(1 2 3 4 5) "-")

=&gt; "1-2-3-4-5"

;;; A NIL list returns "NIL" as a string by default
(<strong>list-to-string</strong> NIL)

=&gt; "nil"

;;; Setting the second optional argument to NIL returns a NIL list as NIL
;;; rather than as "NIL" as a string
(<strong>list-to-string</strong> NIL "" nil)

=&gt; NIL
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>list-to-string</strong> (list &amp;optional (separator " ") (nil-as-string t))
</pre>


<a name="utilities2flogarithmic2dsteps"></a>
<a name="robo973"></a><h2 class=robodoc>utilities/logarithmic-steps [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Create a list of numbers progressing from the first specified argument to
 the second specified argument over the specified number of steps using an
 exponential curve rather than linear interpolation.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number that is the starting value in the resulting list.
 - A number that is the ending value in the resulting list.
 - An integer that will be the length of the resulting list - 1.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - A number that will be used as the exponent when determining the
   exponential interpolation <a href="#robo934">between</a> values. Default = 2.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of numbers.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>logarithmic-steps</strong> 1 100 19)

=&gt; (1.0 1.3055556 2.2222223 3.75 5.888889 8.638889 12.0 15.972222 20.555555
    25.75 31.555555 37.97222 45.0 52.63889 60.88889 69.75 79.22222 89.30556
    100.0)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>logarithmic-steps</strong> (low high num-steps &amp;optional (exponent 2))
</pre>


<a name="utilities2fmiddle"></a>
<a name="robo976"></a><h2 class=robodoc>utilities/middle [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the number value that is <strong>middle</strong> of two number values.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A first number.
 - A second number.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A number.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>middle</strong> 7 92)

=&gt; 49.5
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>middle</strong> (lower upper)
</pre>


<a name="utilities2fmins2dsecs2dto2dsecs"></a>
<a name="robo977"></a><h2 class=robodoc>utilities/mins-secs-to-secs [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Derive the number of seconds from a minutes-seconds value that is indicated
 as a string of the form "0:00.000" or a two-item list in the form '(minutes
 seconds) or three-item list in the form '(minutes seconds milliseconds)
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A time in minutes and seconds, as described above.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - if a string is to be passed, then a character that denotes the separator
 <a href="#robo934">between</a> minutes and seconds. Default = #\:
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A decimal number that is a number in seconds.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>mins-secs-to-secs</strong> '(2 1))
=&gt; 121.0
(<strong>mins-secs-to-secs</strong> '(16 59 534)))
=&gt; 1019.534 
(<strong>mins-secs-to-secs</strong> "3:06.829"))
=&gt; 186.829
;; using a different separator character <a href="#robo934">between</a> minutes and seconds
(<strong>mins-secs-to-secs</strong> "3-36.29" #\-) 0.0001)
=&gt; 216.29
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>mins-secs-to-secs</strong> (time &amp;optional (post-mins #\:))
</pre>


<a name="utilities2fmove2delements"></a>
<a name="robo978"></a><h2 class=robodoc>utilities/move-elements [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 02-Mar-2011
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Move the specified elements from one list (if they are present in that
 list) to another, deleting them from the first.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list of elements that are the elements to be moved.
 - A list from which the specified elements are to be moved and deleted.
 - A list to which the specified elements are to be moved.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - A predicate by which to test that the specified elements are equal to
   elements of the source list. Default = #'eq.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Two values: A first list that is the source list after the items have been
 moved; a second list that is the target list after the items have been
 moved. 
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>move-elements</strong> '(3 5 8) '(1 2 3 4 5 6 7 8 9) '(a b c d e))

=&gt; (1 2 4 6 7 9), (8 5 3 A B C D E)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>move-elements</strong> (what from to &amp;optional (test #'eq))
</pre>


<a name="utilities2fmove2dto2dend"></a>
<a name="robo979"></a><h2 class=robodoc>utilities/move-to-end [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 22-May-2011
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Move a specified element of a given list to the end of the list, returning
 the new list. 

 NB: If the element exists more than once in the given list, all but one of
     the occurrences will be removed and only one of them will be placed at
     the end.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An item that is an element of the list that is the second argument.
 - A list.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; All unique items
(<strong>move-to-end</strong> 2 '(1 2 3 4 5))

=&gt; (1 3 4 5 2)

;;; Duplicate items
(<strong>move-to-end</strong> 2 '(1 2 3 2 4 2 5))

=&gt; (1 3 4 5 2)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>move-to-end</strong> (what list &amp;optional (test #'eql))
</pre>


<a name="utilities2fnconc2dsublists"></a>
<a name="robo980"></a><h2 class=robodoc>utilities/nconc-sublists [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Concatenate corresponding sublists of a given list. Each sublist in the
 argument should have the same length and number of sublists etc.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A list of lists.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of lists.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>nconc-sublists</strong> '(((1 2) (a b) (cat dog)) 
                  ((3 4) (c d) (bird fish)) 
                  ((5 6) (e f) (pig cow))))

=&gt; ((1 2 3 4 5 6) (A B C D E F) (CAT DOG BIRD FISH PIG COW))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>nconc-sublists</strong> (lists)
</pre>


<a name="utilities2fnearest"></a>
<a name="robo981"></a><h2 class=robodoc>utilities/nearest [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 15th May 2020, Heidhausen
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Return the <strong>nearest</strong> number in a list to the first argument
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the number we're looking to get the closest to
 - the list of numbers we'll search
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> the element of the list that's closest to the first argument, the list
 sorted by <strong>nearest</strong> to the number, the distances to the number for the sorted
 list. 
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> none
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>nearest</strong> 1.21 '(4 2 5 3 5 4 1.2 1.3 1.1999))
--&gt; 1.2
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>nearest</strong> (num list)
</pre>


<a name="utilities2fnearest2dpower2dof2d2"></a>
<a name="robo982"></a><h2 class=robodoc>utilities/nearest-power-of-2 [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return the closest number to the specified value that is a power of two but
 not greater than the specified value (unless the optional argument is T:
 see below).
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - T or NIL to indicate whether we can return a power of 2 greater than the
   argument, if that is nearer to the argument than the lower power or 2.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An integer that is a power of two.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>nearest-power-of-2</strong> 31)

=&gt; 16

(<strong>nearest-power-of-2</strong> 31 t)

=&gt; 32

(<strong>nearest-power-of-2</strong> 32)

=&gt; 32

(<strong>nearest-power-of-2</strong> 33)

=&gt; 32
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>nearest-power-of-2</strong> (num &amp;optional allow&gt;)
</pre>


<a name="utilities2fnow2dstring"></a>
<a name="robo983"></a><h2 class=robodoc>utilities/now-string [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Daniel Ross (mr.danielross[at]gmail[dot]com) 
</pre>
<p class="item_name">DATE</p>
<pre> Sat 28 Mar 2020 13:21:08 GMT - London
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Return a string representing the current time in the format:
 YEAR MONTH DAY - HOURS MINUTES SECONDS
 e.g. "20200328-132227"

 It is thought that this function might be useful when outputing multiple
 files during the test phase of a <a href="./piece_lsp.html#robo58">piece</a>. E.g.
 (<a href="./rthm-seq-palette_lsp.html#robo542">cmn-display</a> +mini+
              :file (concatenate 'string "my-<a href="./piece_lsp.html#robo58">piece</a>" (now-string) ".eps"))
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> None
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> None
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A string
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(now-string)

=&gt; "20200328-132227"

(concatenate 'string "my-piece_" (now-string) ".eps")

=&gt; "my-piece_20200328-133357.eps"
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>now-string</strong> ()
</pre>


<a name="utilities2foctave2dfreqs"></a>
<a name="robo984"></a><h2 class=robodoc>utilities/octave-freqs [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> A boolean test to determine whether two specified frequencies are octave
 transpositions of the same <a href="./pitch_lsp.html#robo297">pitch</a> class. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A first number that is a frequency in Hertz.
 - A second number that is a frequency in Hertz.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - T or NIL to indicate whether identical frequencies ("unison") are also
   to be considered octave transpositions of the same <a href="./pitch_lsp.html#robo297">pitch</a> class. 
   T = unisons are also octaves. Default = T.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> T or NIL.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>octave-freqs</strong> 261.63 2093.04)

=&gt; T

(<strong>octave-freqs</strong> 261.63 3000.00)

=&gt; NIL

(<strong>octave-freqs</strong> 261.63 261.63)

=&gt; T

(<strong>octave-freqs</strong> 261.63 261.63 nil)

=&gt; NIL
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>octave-freqs</strong> (freq1 freq2 &amp;optional (unison-also t))
</pre>


<a name="utilities2fone2dto2dmany"></a>
<a name="robo985"></a><h2 class=robodoc>utilities/one-to-many [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> June 23rd 2020
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Find a <strong>one-to-many</strong> relationship <a href="#robo934">between</a> the first argument and a number of
 equally-spaced points given in the second argument. The first argument is a
 number <a href="#robo934">between</a> 0.0 and 1.0 (inclusive). We calculate the proximities from
 this point to the number of points given and return them as a list,
 optionally raised to a given exponent. The list returned is scaled so that
 all values sum to 1.0, so this is particularly useful for, say, calculating
 a number of amplitude scalers for a multi-voice synthesis process.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the point: a number <a href="#robo934">between</a> 0.0 and 1.0 inclusive
 - the number of points to use in the calculation. This will also be the
   number of results returned. Alternatively this can be a list of numbers
   <a href="#robo934">between</a> 0.0 and 1.0. This way you can pass your own points for e.g. an
   unequally-spaced set. In this case though the <a href="./sndfile-ext_lsp.html#robo874">proximity</a> is still
   determined from a maximum of 1.0, not the <a href="./event_lsp.html#robo199">highest</a> number in the given
   list. 
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - the exponent to raise proximities to. 1.0 will return a linear
   relationship. &gt; 1.0 will exaggerate the relationships so that those points
   further away from the first argument will be pushed further away than a
   linear relationship. &lt; 1.0 will lessen the distances.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a list of numbers the length of which is the same as the 2nd argument and
 the sum of which is 1.0
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>one-to-many</strong> .8 7) --&gt;
(0.045112778 0.082706764 0.12030074 0.15789473 0.19548872 0.21804512 0.18045112)
(<strong>one-to-many</strong> .8 7 .7) --&gt;
(0.06509622 0.09950039 0.1293403 0.15646003 0.18169008 0.19612299 0.17178996)
(<strong>one-to-many</strong> .8 7 1.3)  --&gt;
(0.030845987 0.06782856 0.11039718 0.15721251 0.20752355 0.23917702 0.1870151)
;;; passing 5 points: these don't have to have min/max of 0 and 1 ...
(<strong>one-to-many</strong> .8 '(0 .1 .35 .7 .92)) --&gt;
(0.07067137 0.10600708 0.19434628 0.3180212 0.31095406)
;;; ... and they don't have to be in ascending order either
(<strong>one-to-many</strong> .8 '(0 .1 .35 .7 .2)) --&gt;
(0.08510638 0.12765959 0.23404254 0.38297874 0.17021276)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>one-to-many</strong> (one how-many &amp;optional (expt 1.0))
</pre>


<a name="utilities2fos2dformat2dpath"></a>
<a name="robo986"></a><h2 class=robodoc>utilities/os-format-path [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Leon Focker: leon@leonfocker.de
</pre>
<p class="item_name">DATE</p>
<pre> March 30th 2023
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Converts device-names ("/E/", "E:/") according to type
 Windows:  "E:"
 Unix:     "/E/"
 If type is nil it will be set to the system this function was called on.
 If a path does not contain a device-name, it is left unchanged.
 A device-name is detected, when the name of the first directory consists
 of only one letter and the path does not start with a ./ or ~/
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - a string representing a path
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - a string or symbol which could be unix, linux or windows. If nil the type
 of the current system will automatically be chosen.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> - a string representing a path
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>os-format-path</strong> "/E/samples/kicks/kick.wav")
=&gt; "/E/samples/kicks/kick.wav"
(<strong>os-format-path</strong> "E:/samples/kicks/kick.wav")
=&gt; "/E/samples/kicks/kick.wav"
(<strong>os-format-path</strong> "/E/samples/kicks/kick.wav" 'windows)
=&gt; "E:/samples/kicks/kick.wav"
(<strong>os-format-path</strong> "E:/samples/kicks/kick.wav" 'windows)
=&gt; "E:/samples/kicks/kick.wav"
(<strong>os-format-path</strong> "./test.lsp" 'windows)
=&gt; "./test.lsp"
(<strong>os-format-path</strong> "test.lsp" 'unix)
=&gt; "test.lsp"
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>os-format-path</strong> (path &amp;optional type)
</pre>


<a name="utilities2fparse2daudacity2dlabel2dfile"></a>
<a name="robo987"></a><h2 class=robodoc>utilities/parse-audacity-label-file [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> August 12th 2019
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Parse a labels file exported from Audacity and return a list of (start end
 label) triplets. Times are in seconds.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the path to the label file
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a list
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>parse-audacity-label-file</strong> (label-file)
</pre>


<a name="utilities2fparse2daudacity2dlabel2dfile2dfor2dloops"></a>
<a name="robo988"></a><h2 class=robodoc>utilities/parse-audacity-label-file-for-loops [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Read an audacity label file and return its loop points as groups.

 NB: If this fails it's probably because there's a tab <a href="#robo934">between</a> time and
     label instead of spaces: save in emacs to detab.

 NB: Beware that marker files created on different operating systems from
     the one on which this function is called might trigger errors due to
     newline character mismatches.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string that is the name of the label file to be parsed, including
   directory path and extension.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns a list of lists which are the grouped time points. 

 Also prints separate feedback to the listener.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>parse-audacity-label-file-for-loops</strong>  "/path/to/24-7loops1.txt")

=&gt;
313 markers, 50 loops read

((25.674559 25.829296 26.116327 26.649048 27.038843)
 (32.211884 32.33669 32.481815 32.618233 32.716915 32.902676 33.227757
  33.61959)
 (36.893604 37.059048 37.160633 37.27383 37.439274 37.4683 37.627937)
 (39.52907 39.81932 39.999275 40.2634 40.338867 40.605896)
 (45.612698 45.818775 46.050976 46.145306 46.275192)
 (46.4566 46.644535 46.76934 46.886894 46.971066 47.16553)
 (84.15927 84.260864 84.292786 84.355194 84.47274 84.52789 84.556915
  84.65415)
 ...
 (676.1075 676.79114 677.1503 677.57904 678.12366)
 (799.29205 799.8019 800.58984 800.96063 801.13446 801.45886)
 (804.98145 805.2016 805.5724 805.83887 806.31396))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>parse-audacity-label-file-for-loops</strong> (label-file)
</pre>


<a name="utilities2fparse2dreaper2dfile2dfor2dloops"></a>
<a name="robo989"></a><h2 class=robodoc>utilities/parse-reaper-file-for-loops [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> July 1st 2021
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Read a reaper file and return its loop points as groups.

 The reaper file must contain markers with the word 'clm-loop-point-start'
 and 'clm-loop-point-stop' with any number of 'clm-loop-point' markers
 inbetween. This defines a new set of loop points, of which there can be any
 number. Any number of markers without these names can be <a href="#robo934">between</a> the -start
 and -stop markers; they will be ignored. It is assumed that the sound file
 you'll process starts at time zero in the reaper file and within itself.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string that is the name of the marker file to be parsed, including
   directory path and extension.

 OPTIONAL ARGUMENTS:
 T or NIL to issue a warning if a marker is found beginning with
 'clm-loop-point' but continuing with something other than -start or
 -stop. Default = T
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns a list of lists which are the grouped time points. 
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>parse-reaper-file-for-loops</strong> (<a href="./reaper_lsp.html#robo646">reaper-file</a> &amp;optional (warn t))
</pre>


<a name="utilities2fparse2dreaper2dfile2dfor2dsegment"></a>
<a name="robo990"></a><h2 class=robodoc>utilities/parse-reaper-file-for-segment [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> July 5th 2021
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Parse a reaper file and look for markers that correspond to the second
 argument. What we're after is sound file segments i.e. with a start and an
 end. So markers can be added with a certain symbol e.g. gran marking the
 start and that symbol with -end tacked on e.g. gran-end to indicate where a
 segment ends.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the path to the reaper file
 - the marker name we'll look for
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a list of start-end pairs (in seconds)
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>parse-reaper-file-for-segment</strong> "barbara-markers2.RPP" 'gran)
-&gt;  '((542.9326 548.098) (598.7433 600.6894) (944.8951 945.41925)
      (947.9406 948.8009) (952.61755 959.5987) (971.784 975.9188)))))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>parse-reaper-file-for-segment</strong> (<a href="./reaper_lsp.html#robo646">reaper-file</a> marker)
</pre>


<a name="utilities2fparse2dwavelab2dmarker2dfile2dfor2dloops"></a>
<a name="robo991"></a><h2 class=robodoc>utilities/parse-wavelab-marker-file-for-loops [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Read a wavelab marker file and return its loop points as groups.

 The marker file must contain markers with the word "loop". A marker with
 that name will start a new set of loop points, and nameless markers will
 belong to the group until the next "loop" marker.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string that is the name of the marker file to be parsed, including
   directory path and extension.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :sampling-rate. An integer that is the sampling rate of the sound file to
   which the marker file refers. This value will affect the resulting time
   points. Default = 44100.
 - :max-length. The maximum duration in seconds <a href="#robo934">between</a> two points: anything
   greater than this will result in a warning being printed.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns a list of lists which are the grouped time points. 

 Also prints separate feedback to the listener.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>parse-wavelab-marker-file-for-loops</strong> "/path/to/24-7loops1.mrk")

=&gt;
WARNING:
   <a href="#robo21">utilities</a>::<strong>parse-wavelab-marker-file-for-loops</strong> 
   loop points 10:13.213 to 10:14.475 are too long (1.2620239)
WARNING:
   <a href="#robo21">utilities</a>::<strong>parse-wavelab-marker-file-for-loops</strong> 
   loop points 10:33.223 to 10:34.486 are too long (1.2630615)
WARNING:
   <a href="#robo21">utilities</a>::<strong>parse-wavelab-marker-file-for-loops</strong> 
   loop points 10:36.456 to 10:37.522 are too long (1.06604)


312 markers, 50 loops read

((25.674559 25.829296 26.116327 26.649048 27.038843)
 (32.211884 32.33669 32.481815 32.618233 32.716915 32.902676 33.227757
  33.61959)
 (36.893604 37.059048 37.160633 37.27383 37.439274 37.4683 37.627937)
 (39.52907 39.81932 39.999275 40.2634 40.338867 40.605896)
 (45.612698 45.818775 46.050976 46.145306 46.275192)
 (46.4566 46.644535 46.76934 46.886894 46.971066 47.16553)
 (84.15927 84.260864 84.292786 84.355194 84.47274 84.52789 84.556915
  84.65415)
 ...
 (655.91077 656.4554 656.80304 657.4519 658.04285 658.8192)
 (676.1075 676.79114 677.1503 677.57904 678.12366)
 (799.29205 799.8019 800.58984 800.96063 801.13446 801.45886)
 (804.98145 805.2016 805.5724 805.83887 806.31396))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>parse-wavelab-marker-file-for-loops</strong>
    (marker-file &amp;key (sampling-rate 44100) (max-length 1.0))
</pre>


<a name="utilities2fpartial2dfreqs"></a>
<a name="robo992"></a><h2 class=robodoc>utilities/partial-freqs [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 13-Dec-2011
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> A Boolean test to determine whether either of two specified frequencies
 can be considered a harmonic partial of the other.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A first frequency in Hertz.
 - A second frequency in Hertz.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - T or NIL to indicate whether identical frequencies ("unison") are also to
   be considered partials of each other. T = unison are partials. 
   Default = T.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> T if one of the frequencies has the ratio of a harmonic partial to the
 other, otherwise NIL.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>partial-freqs</strong> 300 900)

=&gt; T

(<strong>partial-freqs</strong> 300 700)

=&gt; NIL

(<strong>partial-freqs</strong> 300 300)

=&gt; T

(<strong>partial-freqs</strong> 300 300 nil)

=&gt; NIL
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>partial-freqs</strong> (freq1 freq2 &amp;optional (unison-also t))
</pre>


<a name="utilities2fpdivide"></a>
<a name="robo993"></a><h2 class=robodoc>utilities/pdivide [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Creates a list of proportionally related times, dividing a starting
 duration into a number of smaller durations a specified number of times.
 We start with a proportion as a ratio (e.g. 3/2) and divide the given
 duration into two parts according to that ratio.  Then those two parts will
 be divided into the same ratios.  This will iterate the number of times
 indicated by the second argument.

 The following are some classical proportions:
         Latin        (Greek)
 (3 : 2) Sesquialtera (Diapente)
 (4 : 3) Sesquitertia (Diatessaron)
 (5 : 4) Sesquiquarta (Diatonus Semitonus)
 (8 : 3) Duplasuperbipartiens (Diapson Diatesseron)
 (9 : 8) Sesquioctava (Tonus)
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - an integer or ratio (in Lisp terms, a rational) e.g. 3/2
 - an integer &gt;=1 specifying the number of times to iterate the process of
   dividing the duration into proportions.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :duration. The overall duration to apply the proportional divisions to.
   Units are arbitrary of course as this is just a number. Default 1.0.
 - :print. If T, print each level of division as we proceed. Default NIL.
 - :reverse. If T reverse the proportion (so 3/2 becomes 2/3). Default NIL.
 - :alternate. If T, reverse the proportion every other division (not
   iteration) so that if we have a proportion of 3/2 on the second iteration
   we divide into 3/2 then 2/3.  Default NIL.
 - :increment. If T, then each time we divide we increment both sides of the
   proportion,  so 3:2 becomes 4:3 which becomes 5:4 etc.  Default NIL.
 - :halves. This will only make a difference if :increment is T: As results
   tend overall towards increasing (when numerator &lt; denominator e.g. 2/3) or
   decreasing (numerator &gt; denominator e.g. 3/2) numbers, we can mix things
   up by dividing the resultant list into two halves and splicing their
   elements one after the other.  Default NIL.
 - :<a href="./permutations_lsp.html#robo328">shuffle</a>. Mix things up by shuffling the resultant list.  As this uses
   the <a href="./permutations_lsp.html#robo328">shuffle</a> algorithm we have fixed-seed randomness so results will be
   the same upon each call within the same Lisp implementation/version.
   Default NIL. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Three values: the list of ascending timings from the last generation of the
 calculated proportions; the durations of each part for the last generation;
 the list of ascending timings for _each_ generation of the calculated
 proportions (a list of lists).
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">Notice here that each generation prints the proportions along with the
durations these correspond to and the start time of each (cumulative durations).

(<strong>pdivide</strong> 3/2 4 :duration 35 :print t)

PRINTS:
Generation 1: 3 (21.00=21.00), 2 (14.00=35.00), 

Generation 2: 3 (12.60=12.60), 2 (8.40=21.00), 3 (8.40=29.40), 2 (5.60=35.00), 

Generation 3: 3 (7.56=7.56), 2 (5.04=12.60), 3 (5.04=17.64), 2 (3.36=21.00), 
3 (5.04=26.04), 2 (3.36=29.40), 3 (3.36=32.76), 2 (2.24=35.00), 

Generation 4: 3 (4.54=4.54), 2 (3.02=7.56), 3 (3.02=10.58), 2 (2.02=12.60), 
3 (3.02=15.62), 2 (2.02=17.64), 3 (2.02=19.66), 2 (1.34=21.00), 3 (3.02=24.02),
2 (2.02=26.04), 3 (2.02=28.06), 2 (1.34=29.40), 3 (2.02=31.42), 2 (1.34=32.76),
3 (1.34=34.10), 2 (0.90=35.00), 

RETURNS: 
(0.0 4.5360003 7.5600004 10.584001 12.6 15.624001 17.640001 19.656002 21.000002
 24.024002 26.040003 28.056004 29.400003 31.416004 32.760006 34.104008
 35.000008)
(4.5360003 3.0240002 3.0240004 2.0160003 3.0240004 2.0160003 2.0160003
 1.3440002 3.0240004 2.0160003 2.0160003 1.3440002 2.0160003 1.3440001
 1.3440001 0.896)
((0.0 4.5360003 7.5600004 10.584001 12.6 15.624001 17.640001 19.656002
  21.000002 24.024002 26.040003 28.056004 29.400003 31.416004 32.760006
  34.104008 35.000008)
 (0.0 7.5600004 12.6 17.640001 21.000002 26.040003 29.400003 32.760002
  35.000004)
 (0.0 12.6 21.0 29.400002 35.0) (0.0 21.0 35.0))


(<strong>pdivide</strong> 3/2 4 :duration 35 :print t :increment t :halves t)

PRINTS:
Generation 1: 3 (21.00=21.00), 2 (14.00=35.00), 

Generation 2: 4 (12.00=12.00), 3 (9.00=21.00), 5 (7.78=28.78), 4 (6.22=35.00), 

Generation 3: 6 (6.55=6.55), 5 (5.45=12.00), 7 (4.85=16.85), 6 (4.15=21.00), 
8 (4.15=25.15), 7 (3.63=28.78), 9 (3.29=32.07), 8 (2.93=35.00), 

Generation 4: 10 (3.44=3.44), 9 (3.10=6.55), 11 (2.86=9.40), 10 (2.60=12.00), 
12 (2.53=14.53), 11 (2.32=16.85), 13 (2.16=19.01), 12 (1.99=21.00), 
14 (2.15=23.15), 13 (2.00=25.15), 15 (1.88=27.03), 14 (1.75=28.78), 
16 (1.70=30.48), 15 (1.59=32.07), 17 (1.51=33.58), 16 (1.42=35.00), 

RETURNS:
(0.0 3.4449766 5.595868 8.696347 10.6936035 13.550747 15.428142 18.025545
 19.77778 22.30621 24.0064 26.324125 27.918053 30.078053 31.58647 33.580315
 35.0)
(3.4449766 2.1508918 3.100479 1.9972568 2.8571434 1.8773947 2.5974028 1.752235
 2.5284283 1.7001898 2.317726 1.593928 2.16 1.5084175 1.9938462 1.4196872)
((0.0 3.4449766 6.5454555 9.402599 12.000002 14.52843 16.846155 19.006155
  21.000002 23.150894 25.148151 27.025547 28.777782 30.477972 32.0719 33.58032
  35.000004)
 (0.0 6.5454555 12.000002 16.846157 21.000004 25.148151 28.77778 32.0719
  35.000004)
 (0.0 12.000001 21.0 28.777779 35.0) (0.0 21.0 35.0))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>pdivide</strong> (start levels &amp;key (duration 1.0) print reverse alternate
                               halves <a href="./permutations_lsp.html#robo328">shuffle</a> increment)
</pre>


<a name="utilities2fperiodicity"></a>
<a name="robo995"></a><h2 class=robodoc>utilities/periodicity [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> November 13th 2024
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Think of isorhythm: you have a list of x pitches which you go through,
 repeating from the beginning when you get to the end, plus a
 similarly-handled list of y rhythms. x and y are different (lengths) so when
 does the cycle repeat i.e. when do we reuse the first element of each list
 and proceed again as at the beginning? The simple answer is x * y but it
 could be significantly less. This routine works that out.

 So, given a list of integers &gt; 0, representing perhaps the number of items
 (e.g. pitches, rhythms etc.) in an arbitrary number of lists, calculate the
 cycle length before we repeat, i.e. start again at the beginning of each
 list. 

 NB for convenience the argument can be a list of lists, the lengths of which
 will then be used as above. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> a list of integers &gt; 0 or a list of sublists
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> the cycle length before a repeat occurs
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>periodicity</strong> '(1 2 5))
10

(<strong>periodicity</strong> '(1 2 3 4 5 6))
60

(<strong>periodicity</strong> '(1 2 3 4 5 6 20))
60 

(<strong>periodicity</strong> '(1 2 3 4 5 6 16))
240
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>periodicity</strong> (cycle-lengths)
</pre>


<a name="utilities2fpexpand"></a>
<a name="robo996"></a><h2 class=robodoc>utilities/pexpand [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Instead of dividing an overall duration (<a href="#robo993">pdivide</a>) we start with a
 proportion and expand outwards from there, keeping each newly created part
 in the same proportion.  This is repeated the number of times specified in
 the first argument.  Useful for generating maps (<a href="./section_lsp.html#robo60">section</a> structure).
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The number of times to expand proportionally.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> As many integer proportions as required.  If the last argument here is t,
 then instead of using letters to denote sections we use numbers instead. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> 3 values: 
 1) a list showing the cumulative count (e.g. bar numbers) of where major
 and minor sections occur.  Topmost sections will have the labels A, B, C,
 etc. with subsections such as A.A, A.B, ... C.C.C.C.  Of course, wherever a
 major <a href="./section_lsp.html#robo60">section</a> starts, an arbitrary number of subsections also begin, but
 only the most major <a href="./section_lsp.html#robo60">section</a> is present in the list.
 2) the structure of the sections and subsections in the form of a list of
 sublists for each, and containing the <a href="./section_lsp.html#robo60">section</a> labels paired with their
 length.  The bottommost subsection will have a length of the sum of the
 proportions, with higher subsection groupings showing multiples of this.
 3) the overall length of the structure produced (also the first element of
 the second returned value).
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; 2 generations:
(<strong>pexpand</strong> 2 3 2) =&gt;
(1 (A) 6 (A A A B) 11 (A A A C) 16 (A A B) 21 (A A B B) 26 (A B) 31 (A B A B)
 36 (A B A C) 41 (A B B) 46 (A B B B) 51 (A C) 56 (A C A B) 61 (A C A C) 66
 (A C B) 71 (A C B B) 76 (B) 81 (B A A B) 86 (B A A C) 91 (B A B) 96 (B A B B)
 101 (B B) 106 (B B A B) 111 (B B A C) 116 (B B B) 121 (B B B B))
(125
 (((A) 75)
  (((A A) 25) (((A A A) 15) ((A A A A) 5) ((A A A B) 5) ((A A A C) 5))
   (((A A B) 10) ((A A B A) 5) ((A A B B) 5)))
  (((A B) 25) (((A B A) 15) ((A B A A) 5) ((A B A B) 5) ((A B A C) 5))
   (((A B B) 10) ((A B B A) 5) ((A B B B) 5)))
  (((A C) 25) (((A C A) 15) ((A C A A) 5) ((A C A B) 5) ((A C A C) 5))
   (((A C B) 10) ((A C B A) 5) ((A C B B) 5))))
 (((B) 50)
  (((B A) 25) (((B A A) 15) ((B A A A) 5) ((B A A B) 5) ((B A A C) 5))
   (((B A B) 10) ((B A B A) 5) ((B A B B) 5)))
  (((B B) 25) (((B B A) 15) ((B B A A) 5) ((B B A B) 5) ((B B A C) 5))
   (((B B B) 10) ((B B B A) 5) ((B B B B) 5)))))
125

;;; 3 generations:
(<strong>pexpand</strong> 3 3 2) =&gt;
(1 (A) 6 (A A A A A B) 11 (A A A A A C) 16 (A A A A B) 21 (A A A A B B) 26
 (A A A B) 31 (A A A B A B) 36 (A A A B A C) 41 (A A A B B) 46 (A A A B B B) 51
 (A A A C) 56 (A A A C A B) 61 (A A A C A C) 66 (A A A C B) 71 (A A A C B B) 76
...
 581 (B B B A A B) 586 (B B B A A C) 591 (B B B A B) 596 (B B B A B B) 601
 (B B B B) 606 (B B B B A B) 611 (B B B B A C) 616 (B B B B B) 621
 (B B B B B B))
(625
 (((A) 375)
  (((A A) 125)
   (((A A A) 75)
    (((A A A A) 25)
     (((A A A A A) 15) ((A A A A A A) 5) ((A A A A A B) 5) ((A A A A A C) 5))
     (((A A A A B) 10) ((A A A A B A) 5) ((A A A A B B) 5)))
...
   (((B B B) 50)
    (((B B B A) 25)
     (((B B B A A) 15) ((B B B A A A) 5) ((B B B A A B) 5) ((B B B A A C) 5))
     (((B B B A B) 10) ((B B B A B A) 5) ((B B B A B B) 5)))
    (((B B B B) 25)
     (((B B B B A) 15) ((B B B B A A) 5) ((B B B B A B) 5) ((B B B B A C) 5))
     (((B B B B B) 10) ((B B B B B A) 5) ((B B B B B B) 5)))))))
625

;;; 2 generations of 3 proportional values, returning numbers for labels
(<strong>pexpand</strong> 2 3 2 4 t) =&gt;
(1 (1) 10 (1 1 1 2) 19 (1 1 1 3) 28 (1 1 2) 37 (1 1 2 2) 46 (1 1 3) 55
 (1 1 3 2) 64 (1 1 3 3) 73 (1 1 3 4) 82 (1 2) 91 (1 2 1 2) 100 (1 2 1 3) 109
 (1 2 2) 118 (1 2 2 2) 127 (1 2 3) 136 (1 2 3 2) 145 (1 2 3 3) 154 (1 2 3 4)
... (3 4 2 2) 694 (3 4 3) 703 (3 4 3 2) 712 (3 4 3 3) 721 (3 4 3 4))

(729
 (((1) 243)
  (((1 1) 81) (((1 1 1) 27) ((1 1 1 1) 9) ((1 1 1 2) 9) ((1 1 1 3) 9))
   (((1 1 2) 18) ((1 1 2 1) 9) ((1 1 2 2) 9))
   (((1 1 3) 36) ((1 1 3 1) 9) ((1 1 3 2) 9) ((1 1 3 3) 9) ((1 1 3 4) 9)))
...
   (((3 2 2) 18) ((3 2 2 1) 9) ((3 2 2 2) 9))
   (((3 2 3) 36) ((3 2 3 1) 9) ((3 2 3 2) 9) ((3 2 3 3) 9) ((3 2 3 4) 9)))
  (((3 3) 81) (((3 3 1) 27) ((3 3 1 1) 9) ((3 3 1 2) 9) ((3 3 1 3) 9))
   (((3 3 2) 18) ((3 3 2 1) 9) ((3 3 2 2) 9))
   (((3 3 3) 36) ((3 3 3 1) 9) ((3 3 3 2) 9) ((3 3 3 3) 9) ((3 3 3 4) 9)))
  (((3 4) 81) (((3 4 1) 27) ((3 4 1 1) 9) ((3 4 1 2) 9) ((3 4 1 3) 9))
   (((3 4 2) 18) ((3 4 2 1) 9) ((3 4 2 2) 9))
   (((3 4 3) 36) ((3 4 3 1) 9) ((3 4 3 2) 9) ((3 4 3 3) 9) ((3 4 3 4) 9)))))
729
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>pexpand</strong> (generations &amp;rest proportions)
</pre>


<a name="utilities2fpexpand2dfind"></a>
<a name="robo997"></a><h2 class=robodoc>utilities/pexpand-find [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Find the cumulative number of where a label occurs in a list returned by
 <a href="#robo996">pexpand</a>.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the label we're looking for
 - a list of the type returned by <a href="#robo996">pexpand</a> (first returned value).
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - a function to be called when the label cannot be found.  Default =
 #'error but could also be #'warn or NIL.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An integer.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>pexpand-find</strong> (label list &amp;optional (on-error #'error))
</pre>


<a name="utilities2fpexpand2dsection2dlength"></a>
<a name="robo999"></a><h2 class=robodoc>utilities/pexpand-section-length [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return the length (integer) of any arbitrary <a href="./section_lsp.html#robo60">section</a> in the data returned
 by <a href="#robo996">pexpand</a>. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The (rest of) the kind of list returned as the second value of a call to
   <a href="#robo996">pexpand</a>.
 - The <a href="./section_lsp.html#robo60">section</a> ID we want the length of, either as a list or single symbol.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An integer or NIL if the <a href="./section_lsp.html#robo60">section</a> can't be found.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>pexpand-section-length</strong> (rest (nth-value 1 (<a href="#robo996">pexpand</a> 2 3 6 4 5))) '(c a b))
=&gt; 108

(<strong>pexpand-section-length</strong> (rest (nth-value 1 (<a href="#robo996">pexpand</a> 2 3 6 4 5))) 'c)
=&gt; 1296
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>pexpand-section-length</strong> (<a href="#robo996">pexpand</a>-list <a href="./section_lsp.html#robo60">section</a>)
</pre>


<a name="utilities2fpolar2dto2dcartesian"></a>
<a name="robo1000"></a><h2 class=robodoc>utilities/polar-to-cartesian [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Leon Focker: leon@leonfocker.de
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a point in a 3D coordinate space from the polar system to cartesian
 coordinates. This differs from the normal definition of this conversion, in
 that the elevation is the angle from true horizontal, not vertical...
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The horizonal angle from the Y axis (alpha, azimuth angle) in degree.
 - The vertical angle from the X axis (polar, elevation) <a href="#robo934">between</a> +-180°
 - The distance from the origin (the radius), 0 &lt;= distance &lt;= 1
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list that holds the x y and z coordinates for the point.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>polar-to-cartesian</strong> 0 45 1)

=&gt; (0.0 0.70710677 0.70710677)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>polar-to-cartesian</strong> (angle elevation distance)
</pre>


<a name="utilities2fpower2dof2d2"></a>
<a name="robo1001"></a><h2 class=robodoc>utilities/power-of-2 [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Test whether the specified number is a power of two and return the
 logarithm of the specified number to base 2.

 This method returns two values: T or NIL for the test and a decimal that is
 the logarithm of the specified number to base 2.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Two values: T or NIL for the test and a decimal number that is the
 logarithm of the specified number to base 2.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>power-of-2</strong> 16)

=&gt; T, 4.0

(<strong>power-of-2</strong> 17.3)

=&gt; NIL, 4.1127
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>power-of-2</strong> (float)
</pre>


<a name="utilities2fprime"></a>
<a name="robo1002"></a><h2 class=robodoc>utilities/prime [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> August 5th 2019, Heidhausen
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Taken from dlocsig.lisp by Fernando Lopez Lezcano (in the CLM <a href="./package_lsp.html#robo15">package</a>):
 Return T or NIL to indicated whether the argument is a <strong>prime</strong> number or not.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> an integer (all other types, including floats, will trigger an error)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> T or NIL
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>prime</strong> (val)
</pre>


<a name="utilities2fpts2cm"></a>
<a name="robo1003"></a><h2 class=robodoc>utilities/pts2cm [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a specified number of points to a length in centimeters at a
 resolution of 72ppi.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A number.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>pts2cm</strong> 150)

=&gt; 5.2916665
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>pts2cm</strong> (points)
</pre>


<a name="utilities2fradian2dto2ddegree"></a>
<a name="robo1004"></a><h2 class=robodoc>utilities/radian-to-degree [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Leon Focker: leon@leonfocker.de
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Convert an angle in radians to its equivalent in degrees
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The number in radians
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The number in degrees
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>radian-to-degree</strong> pi)

=&gt; 180
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>radian-to-degree</strong> (radian)
</pre>


<a name="utilities2frandom2damount"></a>
<a name="robo1005"></a><h2 class=robodoc>utilities/random-amount [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return a random number from within a total range of &lt;percent&gt; of the given
 number, centering around zero. Thus, if the &lt;number&gt; is 100, and the
 &lt;percent&gt; is 5, the results will be a random number <a href="#robo934">between</a> -2.5 and +2.5.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A number.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> A number that will be a percent of the given number.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A random positive or negative number.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Using the default will return numbers within a 5% span of the given number, 
;;; centering around zero. With 100 that means <a href="#robo934">between</a> -2.5 and +2.5.
(loop repeat 10 collect (<strong>random-amount</strong> 100))

=&gt; (0.7424975 -1.4954442 -1.7126495 1.5918689 -0.43478793 -1.7916341 -1.9115914
    0.8541988 0.057197176 2.0713913)

;;; Specifying 10% of 80 will return random numbers <a href="#robo934">between</a> -4.0 and +4.0
(loop repeat 10 collect (<strong>random-amount</strong> 80 10))

=&gt; (-0.66686153 3.0387697 3.4737322 -2.3753185 -0.8495751 -0.47580242
    -0.25743783 -1.1395472 1.3560238 -0.5958566)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>random-amount</strong> (number &amp;optional (percent 5))
</pre>


<a name="utilities2frandom2dfrom2dlist"></a>
<a name="robo1006"></a><h2 class=robodoc>utilities/random-from-list [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return a random element from a specified list of elements. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - An integer can be passed stating the length of the list, for more
   efficient processing. NB: There is no check to ensure this number is
   indeed the length of the list. If the number is less than the length of
   the list, only elements from the first part of the list will be
   returned. If it is greater than the length of the list, the method may
   return NIL.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An element from the specified list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>random-from-list</strong> '(3 5 7 11 13 17 19 23 29))

=&gt; 13
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>random-from-list</strong> (list &amp;optional list-length) ; for efficiency
</pre>


<a name="utilities2frandomise"></a>
<a name="robo1007"></a><h2 class=robodoc>utilities/randomise [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return a random decimal number close to (+ or -) the number specified
 (within a certain percentage of that number's value). Note that if you want
 the result to go from 0 to 2x the argument, then &lt;percent&gt; needs to be 200,
 not 100.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - A number that is a percentage value, such that any random number returned
   will be within that percentage of the original number's value. 
   Default = 5.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A decimal number.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(loop repeat 10 collect (<strong>randomise</strong> 100))

=&gt; (99.413795 99.15346 98.682014 100.76199 97.74929 99.05693 100.59494 97.96452
    100.42091 100.01329)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>randomise</strong> (number &amp;optional (percent 5))
</pre>


<a name="utilities2fread2dfile2das2dstring"></a>
<a name="robo1008"></a><h2 class=robodoc>utilities/read-file-as-string [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Leon Focker: leon@leonfocker.de
</pre>
<p class="item_name">DATE</p>
<pre> April 30th 2023.
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Read an entire file (not just an s-expression) a into string and return it
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string that is the path to a file (directory and filename)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A string with the contents of the file
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<a href="#robo1009">read-from-file</a> "/path/to/lisp-lorem-ipsum.txt")
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>read-file-as-string</strong> (infile)
</pre>


<a name="utilities2fread2dfrom2dfile"></a>
<a name="robo1009"></a><h2 class=robodoc>utilities/read-from-file [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Read a Lisp expression from a file. This is determined by the Lisp
 parenthetical syntax.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string that is a file name including directory path and extension. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The Lisp expression contained in the file.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>read-from-file</strong> "/path/to/lisp-lorem-ipsum.txt")

=&gt; (LOREM IPSUM DOLOR SIT AMET CONSECTETUR ADIPISCING ELIT CRAS CONSEQUAT
    CONVALLIS JUSTO VITAE CONSECTETUR MAURIS IN NIBH VEL EST TEMPUS LOBORTIS
    SUSPENDISSE POTENTI SED MAURIS MASSA ADIPISCING VITAE DIGNISSIM CONDIMENTUM
    VOLUTPAT VEL FELIS FUSCE AUGUE DUI PULVINAR ULTRICIES IMPERDIET SED
    PHARETRA EU QUAM INTEGER IN VULPUTATE VELIT ALIQUAM ERAT VOLUTPAT VIVAMUS
    SIT AMET ORCI EGET EROS CONSEQUAT TINCIDUNT NUNC ELEMENTUM ADIPISCING
    LOBORTIS MORBI AT LOREM EST EGET MATTIS ERAT DONEC AC RISUS A DUI MALESUADA
    LOBORTIS AC AT EST INTEGER AT INTERDUM TORTOR VIVAMUS HENDRERIT CONSEQUAT
    AUGUE QUISQUE ALIQUAM TELLUS NEC VESTIBULUM LOBORTIS RISUS TURPIS LUCTUS
    LIGULA IN BIBENDUM FELIS SEM PULVINAR DOLOR VIVAMUS RHONCUS NISI GRAVIDA
    PORTA VULPUTATE IPSUM LACUS PORTA RISUS A VULPUTATE MAGNA JUSTO A EST)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>read-from-file</strong> (file)
</pre>


<a name="utilities2freflect2dlist"></a>
<a name="robo1010"></a><h2 class=robodoc>utilities/reflect-list [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Order a list of numbers from least to greatest, then <a href="./rthm-seq-bar_lsp.html#robo530">transpose</a> the list so
 that if an element is the second <a href="./chord_lsp.html#robo94">lowest</a>, it will be replaced by the second
 <a href="./event_lsp.html#robo199">highest</a> etc.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list or numbers.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of numbers.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>reflect-list</strong> '(1 4 3 5 9 6 2 7 8 8 9))

=&gt; (9 6 7 5 1 4 8 3 2 2 1)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>reflect-list</strong> (list)
</pre>


<a name="utilities2fremove2dall"></a>
<a name="robo1011"></a><h2 class=robodoc>utilities/remove-all [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Remove all of the specified elements from a list, returning a list
 containing only those elements that are not in the first argument list.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A first list that is the list of items to remove.
 - A second list that is the original list.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - A predicate for testing equality <a href="#robo934">between</a> the elements of the two lists. 
   Default = #'eq.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>remove-all</strong> '(3 5 8 13) '(1 2 3 4 5 6 7 8 9 10 11 12 13))

=&gt; (1 2 4 6 7 9 10 11 12)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>remove-all</strong> (rm-list list &amp;optional (test #' eq))
</pre>


<a name="utilities2fremove2delements"></a>
<a name="robo1012"></a><h2 class=robodoc>utilities/remove-elements [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Remove a specified number of elements from a given list starting at a
 specified position (0-based) within the list.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list.
 - An integer that is the 0-based position within that list that will be the
   first element to be removed.
 - An integer that is the number of elements to remove.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>remove-elements</strong> '(1 2 3 4 5 6 7) 2 4)

=&gt; (1 2 7)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>remove-elements</strong> (list start how-many)
</pre>


<a name="utilities2fremove2dmore"></a>
<a name="robo1013"></a><h2 class=robodoc>utilities/remove-more [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Remove all instances of a list of specified elements from an original
 list. The predicate used to test the presence of the specified elements in
 the original list must be specified by the user (such as #'eq, #'equalp,
 #'= etc.)
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list.
 - A predicate with which to test the presence of the specified elements.
 - A sequence of elements to be removed from the given list.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>remove-more</strong> '(1 2 3 4 5 5 5 6 7 7 8) #'= 5 7 2)

=&gt; (1 3 4 6 8)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>remove-more</strong> (list test &amp;rest remove)
</pre>


<a name="utilities2freplace2delements"></a>
<a name="robo1014"></a><h2 class=robodoc>utilities/replace-elements [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Replace the elements in list <a href="#robo934">between</a> start and end (inclusive) with the new
 list.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list.
 - An integer that is first position of the segment of the original list to
   be replaced.
 - An integer that is the last position of the segment of the original list
   to be replaced.
 - A list that is to replace the specified segment of the original
   list. This list can be of a different length than that of the segment
   of the original specified by the start and end positions.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>replace-elements</strong> '(1 2 3 4 5 6 7 8 9) 3 7 '(dog cat goldfish))

=&gt; (1 2 3 DOG CAT GOLDFISH 9)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>replace-elements</strong> (list start end new)
</pre>


<a name="utilities2frescale"></a>
<a name="robo1015"></a><h2 class=robodoc>utilities/rescale [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> June 8th 2016, Edinburgh
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Given a value within an original range, return its value withing a new range
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the value we want to <strong>rescale</strong>
 - the original minimum
 - the original maximum
 - the new minimum
 - the new maximum
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 :out-of-range. The function to call when the first argument is not within
 the range of arguments two and three. This would normally be #'error,
 #'warn or NIL. If #'warn or NIL, argument 1 will be hard-limited to the
 original range. Default = #'error
 :type-of-result. Usually this function uses float precision, but by setting
 type-of-result to #'<a href="./sc-map_lsp.html#robo592">double</a>-float or #'rationalize, it is more precise.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The value within the new range (a number)
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>rescale</strong> .5 0 1 0 100)
==&gt; 50.0
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>rescale</strong> (val min max new-min new-max &amp;optional (out-of-range #'error)
                                              (type-of-result #'float))
</pre>


<a name="utilities2fround2dif2dclose"></a>
<a name="robo1016"></a><h2 class=robodoc>utilities/round-if-close [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Round a decimal number if it is within a given tolerance to the next whole
 number. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A decimal number.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - If the given number is this amount or less than the <a href="#robo981">nearest</a> whole number,
   round the given number to the <a href="#robo981">nearest</a> whole number.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> If the given number is within the tolerance, return the number, otherwise
 return the <a href="#robo981">nearest</a> whole number.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>round-if-close</strong> 1.999998)

=&gt; 1.999998

(<strong>round-if-close</strong> 1.999999)

=&gt; 2
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>round-if-close</strong> (num &amp;optional (tolerance 0.000001))
</pre>


<a name="utilities2fscale2denv"></a>
<a name="robo1017"></a><h2 class=robodoc>utilities/scale-env [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Scale either the x-axis values, the data values, or both of a list of
 break-point pairs by specified factors.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An envelope in the form of a list of break-point pairs.
 - A number that is the <a href="#robo956">factor</a> by which the y values (data segment of the
   break-point pairs) are to be scaled.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :y-min. A number that is the minimum value for all y values after
   scaling.  NB The -min/-max arguments are hard-<a href="./sclist_lsp.html#robo640">limits</a> only; they do not
   <a href="#robo956">factor</a> into the arithmetic.
 - :y-max. A number that is the maximum value for all y values after
   scaling.
 - :x-scaler. A number that is the <a href="#robo956">factor</a> by which to <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> the x-axis
   values of the break-point pairs.
 - :x-min. A number that is the minimum value for all x values after
   scaling. NB: This optional argument can only be used if a value has been
   specified for the :x-scaler. 
 - :x-max. A number that is the maximum value for all x values after
   scaling. NB: This optional argument can only be used if a value has been
   specified for the :x-scaler.
 - :first-x. If a number, <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> the x-axis so that this is the first x-value.
   This then ignores x-scaler.
 - :last-x. If a number, <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> the x-axis so that this is the last x-value.
   This then ignores x-scaler.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An envelope in the form of a list of break-point pairs.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Scaling only the y values.
(<strong>scale-env</strong> '(0 53 25 189 50 7 75 200 100 3) 0.5)

=&gt; (0 26.5 25 94.5 50 3.5 75 100.0 100 1.5)

;;; Scaling the y values and setting a min and max for those values
(<strong>scale-env</strong> '(0 53 25 189 50 7 75 200 100 3) 0.5 :y-min 20 :y-max 100)

=&gt; (0 26.5 25 94.5 50 20 75 100 100 20)

;;; Scaling only the x-axis values
(<strong>scale-env</strong> '(0 53 25 189 50 7 75 200 100 3) 1.0 :x-scaler 2)

=&gt; (0 53.0 50 189.0 100 7.0 150 200.0 200 3.0)

;;; Scaling the x values and setting a min and max for those values
(<strong>scale-env</strong> '(0 53 25 189 50 7 75 200 100 3) 1.0 :x-scaler 2 :x-min 9 :x-max 90)

=&gt; (9 53.0 50 189.0 90 7.0 90 200.0 90 3.0)

;;; 'Stretching' the envelope by providing first-x and last-x values
(<strong>scale-env</strong> '(1 0 5 1 20 0) 1 :first-x 0 :last-x 100)

=&gt; (0.0 0 21.052631 1 100.0 0)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>scale-env</strong> (env y-scaler &amp;key x-scaler first-x last-x
                                 (x-min most-negative-<a href="./sc-map_lsp.html#robo592">double</a>-float)
                                 (y-min most-negative-<a href="./sc-map_lsp.html#robo592">double</a>-float)
                                 (x-max most-positive-<a href="./sc-map_lsp.html#robo592">double</a>-float)
                                 (y-max most-positive-<a href="./sc-map_lsp.html#robo592">double</a>-float))
</pre>


<a name="utilities2fsecs2dto2dmins2dsecs"></a>
<a name="robo1018"></a><h2 class=robodoc>utilities/secs-to-mins-secs [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Convert a number of seconds into a string of the form "24:41.723" where
 seconds are always rounded to three decimal places (i.e. milliseconds).
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the number of seconds
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :post-mins. The string used to separate minutes and seconds. Default ":"
 - :post-secs. The string used to separate seconds and milliseconds.
    Default "." 
 - :post-msecs. The string used to follow milliseconds. Default "" 
 - :same-width. Ensure minutes values are always two characters wide, like
   seconds, i.e with a leading 0.
 - :round. Round to the <a href="#robo981">nearest</a> second and don't print milliseconds. Default
   NIL. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A string
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>secs-to-mins-secs</strong> 77.1232145)
"1:17.123"
(<strong>secs-to-mins-secs</strong> 67.1)
"1:07.100"
(<strong>secs-to-mins-secs</strong> 67.1 :same-width t)
"01:07.100"
(<strong>secs-to-mins-secs</strong> 67.1 :same-width t :post-secs "s")
"01:07s100"
(<strong>secs-to-mins-secs</strong> 67.1 :post-secs "secs" :post-mins "min" :post-msecs "msecs")
"1min07secs100msecs"
(<strong>secs-to-mins-secs</strong> 67.7 :same-width t :round t)
"01:08"
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>secs-to-mins-secs</strong> (seconds &amp;key
                                    round
                                    (post-mins ":")
                                    (post-secs ".")
                                    (post-msecs "")
                                    (same-width nil))
</pre>


<a name="utilities2fsemitones"></a>
<a name="robo1019"></a><h2 class=robodoc>utilities/semitones [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return the sample-rate conversion <a href="#robo956">factor</a> required for transposing an audio
 file by a specific number of <strong>semitones</strong>. The number of <strong>semitones</strong> can be
 given as a decimal number, and may be positive or negative.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number of <strong>semitones</strong>.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - A number that is the <a href="#robo956">factor</a> required to <a href="./rthm-seq-bar_lsp.html#robo530">transpose</a> by an octave. 
   Default = 2.0.
 - A number that is the number of <strong>semitones</strong> per octave. Default = 12. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A number.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Usage with default values
(<strong>semitones</strong> 3)

=&gt; 1.1892071

;;; Specifying a different number of <strong>semitones</strong> per octave
(<strong>semitones</strong> 3 2.0 13)

=&gt; 1.1734605

;;; Specifying a different <a href="#robo956">factor</a> for transposing by an octave 
(<strong>semitones</strong> 3 4.0)

=&gt; 1.4142135

;;; Fractional <strong>semitones</strong> are allowed
(<strong>semitones</strong> 3.72)

=&gt; 1.2397077

;;; Negative <strong>semitones</strong> are also allowed
(<strong>semitones</strong> -3.72)

=&gt; 0.80664176
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>semitones</strong> (st &amp;optional (octave-size 2.0) (divisions-per-octave 12))
</pre>


<a name="utilities2fsetf2dlast"></a>
<a name="robo1020"></a><h2 class=robodoc>utilities/setf-last [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Change the last element in a given list to a specified new element.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list.
 - The new last element of that list.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns the new last element.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((l '(1 2 3 4 5)))
  (<strong>setf-last</strong> l 'dog)
  l)

=&gt; (1 2 3 4 DOG)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmacro <strong>setf-last</strong> (list new-last)
</pre>


<a name="utilities2fsmooth2dprocession"></a>
<a name="robo1021"></a><h2 class=robodoc>utilities/smooth-procession [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 23rd August 2024
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> like the <a href="./rthm-chain_lsp.html#robo472">procession</a> function but ensuring that we only ever ascend or
 descend values by a step of 1 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> the same as the <a href="./rthm-chain_lsp.html#robo472">procession</a> function
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> ditto for the keyword arguments
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> the <a href="./rthm-chain_lsp.html#robo472">procession</a> list
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>smooth-procession</strong> (num-results items
                          &amp;rest keyargs &amp;key &amp;allow-other-keys)
</pre>


<a name="utilities2fsort2dsymbol2dlist"></a>
<a name="robo1022"></a><h2 class=robodoc>utilities/sort-symbol-list [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Sort a list of symbols alphabetically ascending, case-insensitive. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A list of symbols.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The same list of symbols sorted alphabetically ascending, case-insensitive.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>sort-symbol-list</strong> '(Lorem ipsum dolor sit amet consectetur adipiscing))

=&gt; (ADIPISCING AMET CONSECTETUR DOLOR IPSUM LOREM SIT)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>sort-symbol-list</strong> (list)
</pre>


<a name="utilities2fsplice"></a>
<a name="robo1023"></a><h2 class=robodoc>utilities/splice [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Insert the elements of a first list into a second list beginning at a
 specified index (0-based).
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list that contains the elements to be inserted into the second list.
 - A list into which the elements of the first argument are to be inserted. 
 - An integer that is the index within the second list where the elements
   are to be inserted.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> - A list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>splice</strong> '(dog cat goldfish) '(1 2 3 4 5 6 7 8 9) 3)

=&gt; (1 2 3 DOG CAT GOLDFISH 4 5 6 7 8 9)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>splice</strong> (elements into-list where)
</pre>


<a name="utilities2fsplit2dgroups"></a>
<a name="robo1024"></a><h2 class=robodoc>utilities/split-groups [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Create a list consisting of as many repetitions of a specified number as
 will fit into a given greater number, with the last item in the new list
 being the value of any remainder.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number that is to be <a href="./rthm-seq-bar_lsp.html#robo528">split</a> into repetitions of a specified smaller
   number (the second argument).
 - The number that is to be the repeating item in the new list. This number
   must be smaller than the first number.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list consisting of repetitions of the specified number, with the last
 element being any possible remainder.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>split-groups</strong> 101 17)

=&gt; (17 17 17 17 17 16)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>split-groups</strong> (num divider)
</pre>


<a name="utilities2fsplit2dinto2dsub2dgroups"></a>
<a name="robo1025"></a><h2 class=robodoc>utilities/split-into-sub-groups [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Create a new list consisting of sublists made from the elements of the
 original flat list, whose lengths are determined by the second argument to
 the function.

 NB: The lengths given in the second argument are not required to <a href="./recursive-assoc-list_lsp.html#robo411">add</a> up to
     the length of the original list. If their sum is less than the original
     list, the resulting list of sublists will only contain a segment of the
     original elements. If their sum is greater than the length of the
     original list, the last sublist in the new list will be shorter than
     the corresponding group value.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A flat list.
 - A list of integers that are the lengths of the consecutive subgroups
   into which the original list is to be divided. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of lists.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;; Used with a list of subgroup lengths whose sum is equal to the length of the
;; original list
(<strong>split-into-sub-groups</strong> '(1 2 3 4 5 6 7 8 9 10) '(2 2 3 2 1))

=&gt; ((1 2) (3 4) (5 6 7) (8 9) (10))

;; Used with a list of subgroup lengths whose sum is less than the length of the
;; original list 
(<strong>split-into-sub-groups</strong> '(1 2 3 4 5 6 7 8 9 10) '(2 1))

=&gt; ((1 2) (3))

;; Used with a list of subgroup lengths whose sum is greater than the length of
;; the original list
(<strong>split-into-sub-groups</strong> '(1 2 3 4 5 6 7 8 9 10) '(2 3 17))

=&gt; ((1 2) (3 4 5) (6 7 8 9 10))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>split-into-sub-groups</strong> (list groups)
</pre>


<a name="utilities2fsplit2dinto2dsub2dgroups2"></a>
<a name="robo1026"></a><h2 class=robodoc>utilities/split-into-sub-groups2 [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Create a new list of lists by splitting the original flat list into
 sublists of the specified length.

 NB: The length given as the second argument is not required to be fit
     evenly into the length of the original flat list. If the original list
     is not evenly divisible by the specified length, the resulting list of
     sublists will contain a final sublist of a different length.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A flat list.
 - An integer that is the length of each of the sublists to be created.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of lists.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;; The second argument fits evenly into the length of the original list. 
(<strong>split-into-sub-groups2</strong> '(1 2 3 4 5 6 7 8 9 10 11 12) 3)

=&gt; ((1 2 3) (4 5 6) (7 8 9) (10 11 12))

;; The second argument does not fit evenly into the length of the original
;; list. 

(<strong>split-into-sub-groups2</strong> '(1 2 3 4 5 6 7 8 9 10 11 12) 5)

=&gt; ((1 2 3 4 5) (6 7 8 9 10) (11 12))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>split-into-sub-groups2</strong> (list length &amp;optional <a href="./permutations_lsp.html#robo328">shuffle</a>)
</pre>


<a name="utilities2fsplit2dinto2dsub2dgroups3"></a>
<a name="robo1027"></a><h2 class=robodoc>utilities/split-into-sub-groups3 [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Split a given flat list into sublists of the specified length, putting any
 remaining elements, if there are any, into the last sublist.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A flat list.
 - An integer that is the length of the new sublists.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list of lists.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>split-into-sub-groups3</strong> '(1 2 3 4 5 6 7 8 9 10 11 12) 3)

=&gt; ((1 2 3) (4 5 6) (7 8 9) (10 11 12))

(<strong>split-into-sub-groups3</strong> '(1 2 3 4 5 6 7 8 9 10 11 12) 5)

=&gt; ((1 2 3 4 5) (6 7 8 9 10 11 12))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>split-into-sub-groups3</strong> (list length)
</pre>


<a name="utilities2fsplit2dinto2dsub2dgroups4"></a>
<a name="robo1028"></a><h2 class=robodoc>utilities/split-into-sub-groups4 [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> August 28th 2018, Heidhausen
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Split into sub-groups with lengths defined by the integers in the second
 argument list. The difference here to related functions is that the given
 lengths will repeat circularly until no more elements of the first argument
 remain. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the list to <a href="./rthm-seq-bar_lsp.html#robo528">split</a> into sub-groups
 - a list of lengths, to be repeated
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> a list of sublists
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>split-into-sub-groups4</strong> '(1 2 3 4 5 6 7 8 9 10 11 12) '(3 4))
==&gt; ((1 2 3) (4 5 6 7) (8 9 10) (11 12))

(<strong>split-into-sub-groups4</strong> '(1 2 3 4 5 6 7 8 9 10 11 12 13 14) '(3 4))
==&gt; ((1 2 3) (4 5 6 7) (8 9 10) (11 12 13 14))

(<strong>split-into-sub-groups4</strong> '(1 2 3 4 5 6 7 8 9 10 11 12) '(1 2 3 4))
==&gt; '((1) (2 3) (4 5 6) (7 8 9 10) (11) (12))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>split-into-sub-groups4</strong> (list lengths)
</pre>


<a name="utilities2fsrt"></a>
<a name="robo1029"></a><h2 class=robodoc>utilities/srt [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Return the semitone transposition for a given sampling rate conversion
 <a href="#robo956">factor</a>.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number that is a sample-rate conversion <a href="#robo956">factor</a>.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - A number that is the <a href="#robo956">factor</a> required for transposing one octave. 
 - A number that is the number of <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> degrees in an octave.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A number.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Using the defaults
(<strong>srt</strong> 1.73)

=&gt; 9.4893

;;; Using a sample-rate conversion <a href="#robo956">factor</a> of 4.0 for the octave and specifying
;;; 13 divisions of the octave
(<strong>srt</strong> 1.73 4.0 13)

=&gt; 5.14
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(let ((last8vesize 0)
      (log8ve 0.0)) ;; so we don't have to recalculate each time
  (defun <strong>srt</strong> (<strong>srt</strong> &amp;optional (octave-size 2.0) (divisions-per-octave 12)
              ;; MDE Tue Feb  7 16:59:45 2012 -- round so we don't get tiny
              ;; fractions of <a href="#robo1019">semitones</a> due to float inaccuracies?
              (round-to 0.0001))
</pre>


<a name="utilities2fstring2dreplace"></a>
<a name="robo1030"></a><h2 class=robodoc>utilities/string-replace [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Replace specified segments of a string with a new specified string.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string that is the string segment to be replaced.
 - A string that is the string with which the specified string segment is to
   be replaced.
 - The string in which the specified segment is to be sought and replaced.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A string.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>string-replace</strong> "flat" "\\flat" "bflat clarinet")

=&gt; "b\\flat clarinet"
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>string-replace</strong> (what with string)
</pre>


<a name="utilities2fswap2delements"></a>
<a name="robo1031"></a><h2 class=robodoc>utilities/swap-elements [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Swap the order of each consecutive pair of elements in a list.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>swap-elements</strong> '(1 2 3 4 5 6 7 8 9 10))

=&gt; (2 1 4 3 6 5 8 7 10 9)

(<strong>swap-elements</strong> '(1 2 3 4 5 6 7 8 9))

=&gt; (2 1 4 3 6 5 8 7 9)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>swap-elements</strong> (list)
</pre>


<a name="utilities2fupdate2dapp2dsrc"></a>
<a name="robo1032"></a><h2 class=robodoc>utilities/update-app-src [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> June 1st 2013
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> DISABLED DUE TO SVN SERVER ACCESS RESTRICTIONS AND SERVER CHANGES.
 NB This function currently works in SBCL and CCL on UNIX systems only.
 
 For users of the slippery chicken app, this function will update the source
 code of the app to the latest in the online subversion (svn) repository.
 An internet connection is therefore necessary.  

 The first time it is run it will delete the current source code and
 download all the new source code, so make sure to back up if you've
 modified the source code yourself (not recommended).  When it is run from
 then on, it will only update the source code that is out of date.

 Once the source code is updated, you'll need to restart the app or just
 Lisp for the changes to be recompiled. 
 
 **NB** The first time you call this function, you might get a "certificate
 error".  In order to accept the certificate, start the terminal application
 and type the following:
 
 cd /tmp/
 svn co <a href="https://svn.ecdf.ed.ac.uk/repo/user/medward2/sc-tags/sc-latest/src">https://svn.ecdf.ed.ac.uk/repo/user/medward2/sc-tags/sc-latest/src</a>
 
 That should give you a prompt in the terminal from which you can accept the
 certificate.  Then the next time you try it from Lisp the certificate
 should not cause a problem.
 
 Users without the app can always download the latest source code in a
 terminal by issuing the following command.
 svn co <a href="https://svn.ecdf.ed.ac.uk/repo/user/medward2/sc-tags/sc-latest/src">https://svn.ecdf.ed.ac.uk/repo/user/medward2/sc-tags/sc-latest/src</a>
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The full path to the <a href="./slippery-chicken_lsp.html#robo632">slippery-chicken</a> application, minus the last slash.
 Remember that this can't include any spaces in file/folder names 
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :rm.  The path to the shell 'rm' command.  Default = "/bin/rm"
 - :svn.  The path to the shell 'svn' command.  Default = "/usr/bin/svn"
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The shell return value of the call to SVN, usually 0 on success.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">Running for the first time:
(<strong>update-app-src</strong> "/tmp/sc-app/slippery-chicken.app")
A    /tmp/sc-app/slippery-chicken.app/Contents/Resources/sc/src/<a href="./sndfile_lsp.html#robo_top_of_doc">sndfile.lsp</a>
A    /tmp/sc-app/slippery-chicken.app/Contents/Resources/sc/src/osc.lsp
A    /tmp/sc-app/slippery-chicken.app/Contents/Resources/sc/src/<a href="./osc-sc_lsp.html#robo_top_of_doc">osc-sc.lsp</a>
[...]
Checked out revision 3608.
0

or after successfully updating a previously updated version:
...
At revision 3608.
0
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>update-app-src</strong> (path-to-app &amp;key (rm "/bin/rm") (svn "/usr/bin/svn"))
</pre>


<a name="utilities2fvisualize"></a>
<a name="robo1033"></a><h2 class=robodoc>utilities/visualize [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Leon Focker: leon@leonfocker.de
</pre>
<p class="item_name">DATE</p>
<pre> February 23rd 2023
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Print a Visualization of an array or a list into the repl with 64 values
 -&gt; *ascii art* &lt;-
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An array or a list
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 :y-range. Maximum value that the y-axis display. When nil, the graph will be
 normalized.
 :start. Where to start reading the sequence from. Default = 0 
 :abs. When t, the absolute value of all numbers is visualized
 :<a href="./rthm-seq-palette_lsp.html#robo553">scale</a>. If the sequence is shorter than 64 and <a href="./rthm-seq-palette_lsp.html#robo553">scale</a> is t, the graph will
 be scaled to 64 values
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> ":)"
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>visualize</strong> (loop repeat 64 for i from 0 by 0.1 collect (sin i)))
(<strong>visualize</strong> (loop repeat 128 for i from 0 by 0.1 collect (sin i)) :start 64)
(<strong>visualize</strong> (loop repeat 128 for i from 0 by 0.1 collect (* (sin i) 2))
   :<a href="./rthm-seq-palette_lsp.html#robo553">scale</a> nil :start 96)
(<strong>visualize</strong> (loop repeat 55 for i from 0 by 0.1 collect (* (sin i) 2))
   :<a href="./rthm-seq-palette_lsp.html#robo553">scale</a> nil :abs t :y-range 1)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>visualize</strong> (ls &amp;key y-range (start 0) abs (<a href="./rthm-seq-palette_lsp.html#robo553">scale</a> t))
</pre>


<a name="utilities2fwavelab2dto2daudacity2dmarker2dfile"></a>
<a name="robo1034"></a><h2 class=robodoc>utilities/wavelab-to-audacity-marker-file [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Write a .txt file suitable for import to audacity with the same name and in
 the same directory as the file argument.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string that is the name of a wavelab marker file, including directory
   path and extension.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - An integer that is the sampling rate of the sound file to which the
   wavelab marker file refers. This value will affect the times of the
   output. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Returns T and prints the number of markers read to the listener. 
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>wavelab-to-audacity-marker-file</strong> "/path/to/24-7.mrk"  44100)

=&gt; 51 markers read
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>wavelab-to-audacity-marker-file</strong> (file &amp;optional (sampling-rate 44100))
</pre>


<a name="utilities2fwrap2dlist"></a>
<a name="robo1035"></a><h2 class=robodoc>utilities/wrap-list [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Shift the elements of a list to start at a specified position and <a href="./set-palette_lsp.html#robo689">wrap</a> to
 the beginning of the list to the list's tail.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list.
 - An integer which is the 0-based position in the original list where the
   new list is to begin.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>wrap-list</strong> '(1 2 3 4 5 6 7 8 9) 4)

=&gt; (5 6 7 8 9 1 2 3 4)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>wrap-list</strong> (list start)
</pre>


<a name="utilities2fwrite2dlist2dto2dcoll"></a>
<a name="robo1036"></a><h2 class=robodoc>utilities/write-list-to-coll [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo21">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Daniel Ross (mr.danielross[at]gmail[dot]com) 
</pre>
<p class="item_name">DATE</p>
<pre> Tue 18 Feb 2020 15:38:40 GMT
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Turn a list of lists into a text file, formatted to be read by the MaxMSP
 [coll] object. This is a bit like <a href="./set-palette_lsp.html#robo672">gen-max-coll-file</a> (see set-<a href="./palette_lsp.html#robo_top_of_doc">palette.lsp</a>)
 but instead works with any data in a list.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A list of lists in the form '((a b c) (d e f))
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments
 :file - the output file. Default = "/tmp/sc-max-coll.txt"
 :base - the minimum number for coll indexing. In the resulting output file,
 each list in the list of lists will be preceeded by an (increasing) integer
 and a comma. This argument sets the base value of that integer. Default = 0.
 :capitalize - Should any outputted text be capitalized or not?
 Default = NIL.
 :if-exists - what to do if the file already exists. This argument is passed
 to with-open-file. More info here: <a href="http://clhs.lisp.se/Body/m_w_open.htm">http://clhs.lisp.se/Body/m_w_open.htm</a>
 Default = :supercede
 :prefix - <a href="./recursive-assoc-list_lsp.html#robo411">add</a> a string prefix to the item number. Default = NIL.
 :alt-label - if you do not want the items labels to be consecutive numbers,
 then you can here either provide a list of lists or a function. If a list of
 lists, this must be the same length as the first argument. If a function, it
 must be called with the item number (which increases incrementally from
 base). 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The output file location
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((l '((hello!)(how are you?)(very well thank you.)(1 2 3 4))))
      (<strong>write-list-to-coll</strong> l :base 6))

=&gt; "/tmp/sc-max-coll.txt" 

The resulting text file will looks like this when opened:

6, hello!;
7, how are you?;
8, very well thank you.;
9, 1 2 3 4;

;; DJR Tue 3 Mar 2020 13:52:34 GMT
(let ((l '((hello!)(how are you?)(very well thank you.)(1 2 3 4))))
      (<strong>write-list-to-coll</strong> l :base 15 
                          :alt-label #'(lambda (count)
                                         (let ((l '(foo bar)))
                                           (nth (mod count 2) l)))
                          :prefix "yes_"))

=&gt; "/tmp/sc-max-coll.txt" 

The resulting text file will looks like this when opened:

yes_bar, hello!;
yes_foo, how are you?;
yes_bar, very well thank you.;
yes_foo, 1 2 3 4;
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>write-list-to-coll</strong> (data-list &amp;key (base 0)
                                       (file "/tmp/sc-max-coll.txt")
                                       (capitalize nil)
                                       (if-exists :supersede)
                                       ;; DJR Tue 3 Mar 2020 13:52:34 GMT
                                       (prefix "")
                                       alt-label)
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./../../src/utilities.lsp with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.44 on 2025-11-13 11:26:17</p>
</div> <!-- footer -->
</body>
</html>
